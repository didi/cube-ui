(function(s,Ge){typeof exports=="object"&&typeof module<"u"?module.exports=Ge(require("vue")):typeof define=="function"&&define.amd?define(["vue"],Ge):(s=typeof globalThis<"u"?globalThis:s||self,s.cube=Ge(s.Vue))})(this,function(s){"use strict";const Ge="",oo={install(){}},lo={cancel:"取消",confirm:"确认",ok:"确定",prev:"上一步",next:"下一步",selectText:"请选择",now:"现在",selectTime:"选择时间",today:"今日",formatDate:"M月D日",hours:"点",minutes:"分",validator:{required:"此为必填项",type:{string:"请输入字符",number:"请输入数字",array:"数据类型应为数组",date:"请选择有效日期",email:"请输入有效邮箱",tel:"请输入有效的手机号码",url:"请输入有效网址"},min:{string:"至少输入 {{config}} 位字符",number:"不得小于 {{config}}",array:"请选择至少 {{config}} 项",date:'请选择 {{config | toLocaleDateString("yyyy年MM月dd日")}} 之后的时间',email:"至少输入 {{config}} 位字符",tel:"至少输入 {{config}} 位字符",url:"至少输入 {{config}} 位字符"},max:{string:"请勿超过 {{config}} 位字符",number:"请勿大于 {{config}}",array:"最多选择 {{config}} 项",date:'请选择 {{config | toLocaleDateString("yyyy年MM月dd日")}} 之前的时间',email:"请勿超过 {{config}} 位字符",tel:"请勿超过 {{config}} 位字符",url:"请勿超过 {{config}} 位字符"},len:{string:"请输入 {{config}} 位字符",number:"长度应等于 {{config}}",array:"请选择 {{config}} 项",date:'请选择 {{config | toLocaleDateString("yyyy年MM月dd日")}} 之前的时间',email:"请输入 {{config}} 位字符",tel:"请输入 {{config}} 位字符",url:"请输入 {{config}} 位字符"},pattern:"格式错误",custom:"未通过校验",notWhitespace:"空白内容无效"}},ro={cancel:"Cancel",confirm:"Confirm",ok:"OK",prev:"Prev",next:"Next",selectText:"Please select",now:"Now",selectTime:"Select time",today:"Today",formatDate:"M-D",hours:"",minutes:"",validator:{required:"Required.",type:{string:"Please input characters.",number:"Please input numbers.",array:"The data type should be array.",date:"Please select a valid date.",email:"Please input a valid E-mail.",tel:"Please input a valid telphone number.",url:"Please input a valid web site."},min:{string:"Please input at least {{config}} characters.",number:"The number could not smaller than {{config}}.",array:"Please select at least {{config}} items.",date:'Please select a date after {{config | toLocaleDateString("yyyy-MM-dd")}}.',email:"Please input at least {{config}} characters.",tel:"Please input at least {{config}} characters.",url:"Please input at least {{config}} characters."},max:{string:"Please input no more than {{config}} characters.",number:"The number could not bigger than {{config}}",array:"Please select no more than  {{config}} items",date:'Please select a date before {{config | toLocaleDateString("yyyy-MM-dd")}}.',email:"Please input no more than {{config}} characters.",tel:"Please input no more than {{config}} characters.",url:"Please input no more than {{config}} characters."},len:{string:"Please input {{config}} characters.",number:"The length should equal {{config}}",array:"Please select {{config}} items",date:'Please select {{config | toLocaleDateString("yyyy-MM-dd")}}.',email:"Please input {{config}} characters.",tel:"Please input {{config}} characters.",url:"Please input {{config}} characters."},pattern:'The input don"t match pattern.',custom:"Invalid.",notWhitespace:"Whitespace is invalid."}},ao=function(e,t){},co=function(e,t){},ho=/-(\w)/g;function Ei(e){return e=String(e),e.replace(ho,function(t,i){return i?i.toUpperCase():""})}function uo(e){return e=String(e),e.replace(/([A-Z])/g,"-$1").toLowerCase()}function Ke(e,t){if(e.findIndex)return e.findIndex(t);let i=-1;return e.some(function(o,l,n){const r=t.call(this,o,l,n);if(r)return i=l,r}),i}function qe(e,t){for(let i in t)!e[i]||typeof e[i]!="object"?e[i]=t[i]:qe(e[i],t[i])}function Ti(e){return function(...i){typeof i[0]=="string"&&(i[0]={[i[0]]:i[1]}),qe(e,i[0])}}function ve(e){const t=Object.prototype.toString;return function(o){return t.call(o)===`[object ${e}]`}}const Q={_set(e,t,i){e[t]=i},string(e,t){Q._set(e,t,"")},number(e,t){Q._set(e,t,0)},boolean(e,t){Q._set(e,t,!1)},object(e,t,i){Array.isArray(i)?Q._set(e,t,[]):Q._set(e,t,{})}};function xi(e,t,i){if(i!==void 0)return Q._set(e,t,i);if(t){const o=e[t],l=Q[typeof o];l&&l(e,t,o)}else Object.keys(e).forEach(o=>{xi(e,o)})}function mo(e,t){let i=0,o=[];const l=e.length;if(!l)return t(o);e.forEach((n,r)=>{n(a=>{i+=1,o[r]=a,i===l&&t(o)})})}function Pt(e){let t;if(typeof window.Promise<"u"){const i=e;t=new window.Promise(o=>{e=l=>{i&&i(l),o(l)}}),t.resolve=e}return t}function po(e,t,i,o){let l,n=o;const r=function(c,h){l=null,h&&(n=e.apply(c,h))},a=function(...c){if(l&&clearTimeout(l),i){const h=!l;l=setTimeout(r,t),h&&(n=e.apply(this,c))}else l=setTimeout(()=>{r(this,c)},t);return n};return a.cancel=function(){clearTimeout(l),l=null},a}function fo(e,{prefix:t="",firstUpperCase:i=!1}={}){const l=e.name.replace(/^cube-/i,"");let n=`${Ei(`${t}${l}`)}`;return i&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}function go(e,t=""){const i=t.split(".");let o=e;for(let l=0;l<i.length;l++){const n=i[l];if(Ve(o[n])){o="";break}else o=o[n]}return o}function _o(e){const i=/os (\d\d?_\d(_\d)?)/.exec(e);if(!i)return null;const o=i[1].split("_").map(function(l){return parseInt(l,10)});return{major:o[0],minor:o[1],patch:o[2]||0}}const ce=ve("Function"),Ve=ve("Undefined"),bo=ve("Array"),yo=ve("String"),Eo=ve("Number"),Dt=60*60*24*1e3,To=60*60*1e3,he=60*1e3;function ki(e,t,i,o){const l={year:"(Y+)",month:"(M+)",date:"(D+)",hour:"(h+)",minute:"(m+)",second:"(s+)",quarter:"(q+)",millisecond:"(S)"};if(new RegExp(l[e],o).test(t)){const n=e==="year"?i.toString().substr(4-RegExp.$1.length):RegExp.$1.length===1?i:wi(i);t=t.replace(RegExp.$1,n)}return t}function wi(e){return("00"+e).substr((""+e).length)}function It(e,t){const i={year:{value:e.getFullYear(),regExpAttributes:"i"},month:{value:e.getMonth()+1},date:{value:e.getDate(),regExpAttributes:"i"},hour:{value:e.getHours(),regExpAttributes:"i"},minute:{value:e.getMinutes()},second:{value:e.getSeconds()},quarter:{value:Math.floor((e.getMonth()+3)/3),regExpAttributes:"i"},millisecond:{value:e.getMilliseconds()}};for(const o in i)t=ki(o,t,i[o].value,i[o].regExpAttributes);return t}function Ze(e){const t=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return+new Date(t+"/"+i+"/"+o+" 00:00:00")}function Je(e,t){return Math.floor((Ze(e)-Ze(t))/Dt)}function Bt(){return window.performance&&window.performance.now?window.performance.now()+window.performance.timing.navigationStart:+new Date}function xo(e,t){let i=30;return[1,3,5,7,8,10,12].indexOf(e)>-1?i=31:e===2&&(i=!t||!(t%400)||!(t%4)&&t%100?29:28),i}let Me;const Si="zh-CN",Pe={name:"locale",install(e){Pe.installed||(Me=e.config.globalProperties,Me.$cubeLang=Si,Me.$cubeMessages={[Si]:lo,"en-US":ro},Pe.installed=!0)},use(e,t){Me.$cubeLang=e;const i=Me.$cubeMessages;e in i||(i[[e]]=t)},helpers:{toLocaleDateString(e,t){const i=Eo(e)?e:e.replace(/-/g,"/"),o=new Date(i);return Ve(t)?o.toDateString():It(o,t)}},addHelper(e,t){e in Pe.helpers||(Pe.helpers[e]=t)}},S=Pe,ko="Translation is not registered correctly, you can call Locale.use() to install it.",O={computed:{$t(){const e=this.$cubeLang,t=this.$cubeMessages[e];return Ve(t)?(ao(ko),""):i=>go(t,i)}},beforeCreate(){S.install(this._.appContext.app)}};S.localeMixin=O;const Du="",p=(e,t)=>{const i=e.__vccOpts||e;for(const[o,l]of t)i[o]=l;return i},wo={name:"cube-button",emits:["click"],props:{icon:{type:String,default:""},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},primary:{type:Boolean,default:!1},outline:{type:Boolean,default:!1},light:{type:Boolean,default:!1},type:{type:String,default:"button"}},computed:{btnClass(){return{"cube-btn_active":this.active,"cube-btn_disabled":this.disabled,"cube-btn-inline":this.inline,"cube-btn-primary":this.primary,"cube-btn-outline":this.outline,"cube-btn-outline-primary":this.outline&&this.primary,"cube-btn-light":this.light}}},methods:{handleClick(e){if(this.disabled){e.preventDefault(),e.stopPropagation();return}this.$emit("click",e)}}},So=["type"];function Co(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("button",{class:s.normalizeClass(["cube-btn",n.btnClass]),type:i.type,onClick:t[0]||(t[0]=(...r)=>n.handleClick&&n.handleClick(...r))},[i.icon?(s.openBlock(),s.createElementBlock("i",{key:0,class:s.normalizeClass(i.icon)},null,2)):s.createCommentVNode("",!0),s.renderSlot(e.$slots,"default")],10,So)}const Y=p(wo,[["render",Co]]);Y.install=function(e){e.component(Y.name,Y)};const Bu="",No={name:"cube-loading",data(){return{balde:12}},props:{size:{type:Number}},computed:{style(){if(!this.size)return;const e=`${this.size}px`;return{width:e,height:e}}}},$o={class:"cube-loading"},vo={class:"cube-loading-spinner"};function Vo(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",$o,[s.createElementVNode("span",{class:"cube-loading-spinners",style:s.normalizeStyle(n.style)},[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(l.balde,r=>(s.openBlock(),s.createElementBlock("i",vo))),256))],4)])}const H=p(No,[["render",Vo]]);H.install=function(e){e.component(H.name,H)};const Ci="update:visible",V={props:{visible:{type:Boolean,default:!1}},data(){return{isVisible:!1}},emits:[Ci],watch:{isVisible(e){this.$emit(Ci,e)}},mounted(){this.$watch("visible",(e,t)=>{e?this.show():t&&!this._createAPI_reuse&&this.hide()},{immediate:!0})},methods:{show(){this.isVisible=!0},hide(){this.isVisible=!1}}},Hu="",Mo="cube-tip",Ni="click",$i="close",Po={name:Mo,mixins:[V],emits:[Ni,$i],props:{direction:{type:String,default:"top"},offsetLeft:{type:[String,Number],default:0},offsetRight:{type:[String,Number],default:0},offsetTop:{type:[String,Number],default:0},offsetBottom:{type:[String,Number],default:0}},mounted(){this.$nextTick(()=>{let e=this.$refs.angle.style;const t={left:"right",right:"left",top:"bottom",bottom:"top"};[{name:"offsetLeft",target:"left",percentFix:{marginLeft:"-6px"}},{name:"offsetRight",target:"right",percentFix:{marginRight:"-6px"}},{name:"offsetTop",target:"top",percentFix:{marginTop:"-6px"}},{name:"offsetBottom",target:"bottom",percentFix:{marginBottom:"-6px"}}].forEach(o=>{const l=this[o.name];if(l!==0){const n=typeof l=="number";e[o.target]=l+(n?"px":""),o.percentFix&&!n&&Object.keys(o.percentFix).forEach(r=>{e[r]=o.percentFix[r]}),e[t[o.target]]="auto"}})})},methods:{handleClick(){this.hide(),this.$emit(Ni)},close(){this.hide(),this.$emit($i)}}},Do=["data-dir"],Io={class:"cube-tip-angle",ref:"angle"},Bo={class:"cube-tip-content"};function Oo(e,t,i,o,l,n){return s.openBlock(),s.createBlock(s.Transition,{name:"cube-tip-zoom"},{default:s.withCtx(()=>[s.withDirectives(s.createElementVNode("div",{class:"cube-tip","data-dir":i.direction,onClick:t[1]||(t[1]=(...r)=>n.handleClick&&n.handleClick(...r))},[s.createElementVNode("i",Io,null,512),s.createElementVNode("button",{class:"cube-tip-close cubeic-close",onClick:t[0]||(t[0]=s.withModifiers((...r)=>n.close&&n.close(...r),["stop"]))}),s.createElementVNode("div",Bo,[s.renderSlot(e.$slots,"default")])],8,Do),[[s.vShow,e.isVisible]])]),_:3})}const Qe=p(Po,[["render",Oo]]);Qe.install=function(e){e.component(Qe.name,Qe)};const Au="",Ho="cube-checkbox",vi="update:modelValue",Ao="checked",Lo="cancel-checked",Yo={name:Ho,emits:[vi],props:{modelValue:{type:[Boolean,String]},label:{type:[Boolean,String]},disabled:{type:Boolean,default:!1},option:{type:[Boolean,String,Object],default(){return{_def_option:!0}}},position:{type:String,default:"left"},shape:{type:String,default:"circle"},hollowStyle:{type:Boolean,default:!1}},data(){const e=this.$parent,t=!!e&&e.$data._checkboxGroup,i=t&&(e.$props.horizontal||e.$props.colNum>1);return{isInGroup:t,isInHorizontalGroup:i}},computed:{computedOption(){let e=this.option;const t=this.label,i=this.disabled;return e._def_option===!0?e={label:t,value:t,disabled:i}:typeof e=="string"&&(e={label:e,value:e,disabled:!1}),e},checkValue:{get(){return this.isInGroup?this.$parent.modelValue.indexOf(this.computedOption.value)>-1:!!this.modelValue},set(e){const t=this.computedOption.value,i=t&&e?t:e;if(this.$emit(vi,i),this.isInGroup){e=!this.checkValue;const o=e?Ao:Lo;this.$parent.checkEvent(o,t||e)}}},_containerClass(){return{"cube-checkbox-hollow":this.hollowStyle,"cube-checkbox_checked":this.checkValue,"cube-checkbox_disabled":this.computedOption.disabled,"border-right-1px":this.isInHorizontalGroup}},_wrapClass(){if(this.isInGroup&&!this.isInHorizontalGroup)return"border-bottom-1px"},isSquare(){return this.shape==="square"||this.hollowStyle},_borderIconClass(){return this.isSquare?"cubeic-square-border":"cubeic-round-border"},_rightIconClass(){return this.isSquare?"cubeic-square-right":"cubeic-right"}}},zo=["data-pos"],Ro=["disabled"],Xo={class:"cube-checkbox-label"};function Uo(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-checkbox",n._containerClass]),"data-pos":i.position},[s.createElementVNode("label",{class:s.normalizeClass(["cube-checkbox-wrap",n._wrapClass])},[s.withDirectives(s.createElementVNode("input",{class:"cube-checkbox-input",type:"checkbox",disabled:n.computedOption.disabled,"onUpdate:modelValue":t[0]||(t[0]=r=>n.checkValue=r)},null,8,Ro),[[s.vModelCheckbox,n.checkValue]]),s.createElementVNode("span",{class:s.normalizeClass(["cube-checkbox-ui",n._borderIconClass])},[s.createElementVNode("i",{class:s.normalizeClass(n._rightIconClass)},null,2)],2),s.createElementVNode("span",Xo,[s.renderSlot(e.$slots,"default",{},()=>[s.createTextVNode(s.toDisplayString(n.computedOption.label),1)])])],2)],10,zo)}const M=p(Yo,[["render",Uo]]),Lu="",Fo={name:"cube-toolbar-item",components:{CubeButton:Y,CubeCheckbox:M},props:{action:{type:Object,default(){return{}}}}},Wo={class:"cube-toolbar-item border-right-1px"},jo=["innerHTML"],Go=s.createElementVNode("i",{class:"cube-toolbar-down"},null,-1);function Ko(e,t,i,o,l,n){const r=s.resolveComponent("cube-checkbox"),a=s.resolveComponent("cube-button");return s.openBlock(),s.createElementBlock("li",Wo,[s.createVNode(a,{icon:i.action.icon},{default:s.withCtx(()=>[i.action.type=="checkbox"?(s.openBlock(),s.createBlock(r,{key:0,class:"cube-toolbar-chb",modelValue:i.action.checked,"onUpdate:modelValue":t[0]||(t[0]=c=>i.action.checked=c),label:i.action.text},null,8,["modelValue","label"])):(s.openBlock(),s.createElementBlock("span",{key:1,innerHTML:i.action.text},null,8,jo))]),_:1},8,["icon"]),Go])}const qo=p(Fo,[["render",Ko]]),zu="",Zo="cube-toolbar",Vi="click",Mi="more-click",Jo={name:Zo,components:{CubeToolbarItem:qo},emits:[Vi,Mi],props:{actions:{type:Array,default(){return[]}},moreActions:{type:Array}},data(){return{showMore:!1}},computed:{basicActions(){const e=this.actions.slice();return this.moreActions&&e.push({icon:"cubeic-more",$cubeMore:!0}),e}},methods:{itemClick(e){e.$cubeMore?(this.showMore=!this.showMore,this.$emit(Mi,this.showMore)):this.$emit(Vi,e)}}},Qo={class:"cube-toolbar"},el={key:0,class:"cube-toolbar-group cube-toolbar-group-more"},tl={class:"cube-toolbar-group"};function il(e,t,i,o,l,n){const r=s.resolveComponent("cube-toolbar-item");return s.openBlock(),s.createElementBlock("div",Qo,[i.moreActions?s.withDirectives((s.openBlock(),s.createElementBlock("ul",el,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.moreActions,(a,c)=>(s.openBlock(),s.createBlock(r,{key:c,action:a,onClick:h=>n.itemClick(a)},null,8,["action","onClick"]))),128))],512)),[[s.vShow,l.showMore]]):s.createCommentVNode("",!0),s.createElementVNode("ul",tl,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.basicActions,(a,c)=>(s.openBlock(),s.createBlock(r,{key:c,action:a,onClick:h=>n.itemClick(a)},null,8,["action","onClick"]))),128))])])}const de=p(Jo,[["render",il]]);de.install=function(e){e.component(Y.name,Y),e.component(M.name,M),e.component(de.name,de)},de.Button=Y,de.Checkbox=M;const et=typeof window<"u",De=et&&navigator.userAgent.toLowerCase(),Pi=De&&De.indexOf("android")>0,sl=De&&/iphone|ipad|ipod|ios/.test(De);function Ot(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}function Di(e,t){if(Ot(e,t))return;const i=e.className.split(" ");i.push(t),e.className=i.join(" ")}function Ii(e,t){if(!Ot(e,t))return;const i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i," ")}function nl(e,t){const i="data-";return e.getAttribute(i+t)}function U(e){return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}let Ht=(()=>{if(!et)return!1;let e=document.createElement("div").style,t={standard:"transform",webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform"};for(let i in t)if(e[t[i]]!==void 0)return i;return!1})();function D(e){return Ht===!1?!1:Ht==="standard"?e==="transitionEnd"?"transitionend":e:Ht+e.charAt(0).toUpperCase()+e.substr(1)}function ol(e,t){let i=e.target;for(;i&&!Ot(i,t);){if(i===e.currentTarget)return null;i=i.parentNode}return i}function Bi(e,t,{type:i="Event",bubbles:o=!0,cancelable:l=!0}={}){const n=document.createEvent(i);n.initEvent(t,o,l),e.dispatchEvent(n)}const Ru="",ll={name:"cube-tab",props:{label:{type:[String,Number],required:!0},modelValue:{type:[String,Number],default(e){return e.label}},icon:{type:String,default:""}},mounted(){this.$parent.addTab(this)},destroyed(){this.$parent.removeTab(this)},computed:{isActive(){return this.$parent.modelValue===this.modelValue}},methods:{handleClick(e){this.$parent.trigger(this.modelValue)}}},rl=["innerHTML"];function al(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-tab",{"cube-tab_active":n.isActive}]),onClick:t[0]||(t[0]=(...r)=>n.handleClick&&n.handleClick(...r))},[s.renderSlot(e.$slots,"icon",{},()=>[s.createElementVNode("i",{class:s.normalizeClass(i.icon)},null,2)]),s.renderSlot(e.$slots,"default",{},()=>[s.createElementVNode("div",{innerHTML:i.label},null,8,rl)])],2)}const tt=p(ll,[["render",al]]),Uu="",cl="cube-tab-bar",Oi="update:modelValue",Hi="change",Ai="click",Li=D("transform"),hl=D("transition"),dl={name:cl,components:{CubeTab:tt},emits:[Oi,Hi,Ai],props:{modelValue:{type:[String,Number],required:!0},data:{type:Array,default(){return[]}},inline:{type:Boolean,default:!1},showSlider:{type:Boolean,default:!1},useTransition:{type:Boolean,default:!0}},watch:{modelValue(){this._updateSliderStyle()}},created(){this.tabs=[]},mounted(){this._updateSliderStyle(),window.addEventListener("resize",this._resizeHandler)},activated(){window.addEventListener("resize",this._resizeHandler)},deactivated(){this._cleanUp()},beforeUnmount(){this._cleanUp()},methods:{addTab(e){this.tabs.push(e)},removeTab(e){const t=this.tabs.indexOf(e);t>-1&&this.tabs.splice(t,1)},trigger(e){this.$emit(Ai,e),e!==this.modelValue&&[Oi,Hi].forEach(i=>{this.$emit(i,e)})},_updateSliderStyle(){if(!this.showSlider)return;const e=this.$refs.slider;this.$nextTick(()=>{const{width:t,index:i}=this._getSliderWidthAndIndex();e.style.width=`${t}px`,this.setSliderTransform(this._getOffsetLeft(i))})},setSliderTransform(e){const t=this.$refs.slider;typeof e=="number"&&(e=`${e}px`),t&&(this.useTransition&&(t.style[hl]=`${Li} 0.2s linear`),t.style[Li]=`translateX(${e}) translateZ(0)`)},_getSliderWidthAndIndex(){let e=0,t=0;return this.tabs.length>0&&(t=Ke(this.tabs,i=>i.modelValue===this.modelValue),e=this.tabs[t].$el.clientWidth),{width:e,index:t}},_getOffsetLeft(e){return this.tabs[e].$el.offsetLeft||0},_resizeHandler(){clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(()=>{this._updateSliderStyle()},60)},_cleanUp(){clearTimeout(this._resizeTimer),window.removeEventListener("resize",this._resizeHandler)}}},ul={key:0,ref:"slider",class:"cube-tab-bar-slider"};function ml(e,t,i,o,l,n){const r=s.resolveComponent("cube-tab");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-tab-bar",{"cube-tab-bar_inline":i.inline}])},[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(a,c)=>(s.openBlock(),s.createBlock(r,{label:a.label,"model-value":a.value,icon:a.icon,key:a.value||a.label},null,8,["label","model-value","icon"]))),128))]),i.showSlider?(s.openBlock(),s.createElementBlock("div",ul,null,512)):s.createCommentVNode("",!0)],2)}const ue=p(dl,[["render",ml]]);ue.install=function(e){e.component(ue.name,ue),e.component(tt.name,tt)},ue.Tab=tt;const Fu="",pl={name:"cube-tab-panel",props:{label:{type:[String,Number],required:!0},value:{type:[String,Number],default(e){return e.label}}},mounted(){this.$parent.addPanel(this)},destroyed(){this.$parent.removePanel(this)}},fl={class:"cube-tab-panel"};function gl(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",fl,[s.renderSlot(e.$slots,"default")])}const it=p(pl,[["render",gl]]),ju="",_l=D("transform"),bl="cube-tab-panels",yl=-1,El={name:bl,props:{value:{type:[String,Number]},data:{type:Array,default(){return[]}}},created(){this.panels=[]},mounted(){this._move(this.value)},methods:{_move(e){const t=Ke(this.panels,l=>l.value===e);if(t===yl)return;const i=this.$refs.panelsGroup,o=-(t*100);i.style[_l]=`translateX(${o}%)`},addPanel(e){this.panels.push(e)},removePanel(e){const t=this.panels.indexOf(e);t>-1&&this.panels.splice(t,1)}},watch:{value(e){this._move(e)}},components:{TabPanel:it}},Tl={class:"cube-tab-panels",ref:"panels"},xl={class:"cube-tab-panels-group",ref:"panelsGroup"};function kl(e,t,i,o,l,n){const r=s.resolveComponent("cube-tab-panel");return s.openBlock(),s.createElementBlock("div",Tl,[s.createElementVNode("div",xl,[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(a,c)=>(s.openBlock(),s.createBlock(r,{label:a.label,value:a.value,key:a.value||a.label},{default:s.withCtx(()=>[s.createTextVNode(s.toDisplayString(a.label),1)]),_:2},1032,["label","value"]))),128))])],512)],512)}const me=p(El,[["render",kl]]);me.install=function(e){e.component(me.name,me),e.component(it.name,it)},me.Panel=it,M.install=function(e){e.component(M.name,M)};const wl=D("flexBasis"),Yi={props:{colNum:{type:Number,default:1}},watch:{colNum:{immediate:!0,handler(e){if(e<=1)return"";this.$nextTick(()=>{let t=100/e+"%";Array.prototype.forEach.call(this.$refs.group.children,i=>{i.style[wl]=t})})}}}},Gu="",Sl="cube-checkbox-group",zi="update:modelValue",Cl="checked",Nl="cancel-checked",$l={name:Sl,mixins:[Yi],emits:[zi],props:{modelValue:{type:Array},horizontal:{type:Boolean,default:!1},shape:{type:String,default:"circle"},position:{type:String,default:"left"},hollowStyle:{type:Boolean,default:!1},options:{type:Array,default(){return[]}},min:{type:Number,default:0},max:{type:Number,default:1/0}},data(){return{_value:[],_checkboxGroup:!0}},computed:{groupClass(){if(!this.horizontal||this.colNum>1)return"border-top-1px border-bottom-1px"}},watch:{modelValue:{immediate:!0,handler(e,t){this._value=this.modelValue.concat()}}},components:{CubeCheckbox:M},methods:{checkEvent(e,t){if(e===Cl&&this._value.length<this.max&&this._value.indexOf(t)===-1&&this._value.push(t),e===Nl){const i=this._value.indexOf(t);this._value.length>this.min&&i>-1&&this._value.splice(i,1)}this.$emit(zi,this._value)}}},vl=["data-horz","data-col"];function Vl(e,t,i,o,l,n){const r=s.resolveComponent("cube-checkbox");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-checkbox-group",n.groupClass]),ref:"group","data-horz":i.horizontal,"data-col":e.colNum>1},[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.options,(a,c)=>(s.openBlock(),s.createBlock(r,{key:c,option:a,shape:i.shape,position:i.position,"hollow-style":i.hollowStyle},null,8,["option","shape","position","hollow-style"]))),128))])],10,vl)}const pe=p($l,[["render",Vl]]);pe.install=function(e){e.component(M.name,M),e.component(pe.name,pe)},pe.Checkbox=M;const Ku="",Ml={name:"cube-checker-item",props:{option:{type:Object,default(){return{}}}},computed:{isActive(){const e=this.$parent.isRadio,t=this.$parent.currentValue,i=this.option.value;return e?t===i:t.indexOf(i)>=0},isDisabled(){return this.option.disabled}},methods:{clickHandler(){this.isDisabled||this.$parent.check(this.option)}}},Pl=["innerHTML"];function Dl(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("li",{class:s.normalizeClass(["cube-checker-item",{"cube-checker-item_active":n.isActive,"cube-checker-item_disabled":n.isDisabled}]),onClick:t[0]||(t[0]=(...r)=>n.clickHandler&&n.clickHandler(...r))},[s.renderSlot(e.$slots,"default",{},()=>[s.createElementVNode("span",{innerHTML:i.option.text},null,8,Pl)])],2)}const st=p(Ml,[["render",Dl]]),Il="cube-checker",Ri="update:modelValue",Bl={name:Il,emits:[Ri],props:{modelValue:[String,Number,Array],options:{type:Array,default(){return[]}},type:{type:String,default:"checkbox"},min:{type:Number,default:0},max:{type:Number,default(e){return e.options.length}}},data(){return{currentValue:this.modelValue}},computed:{isRadio(){return this.type==="radio"}},watch:{modelValue(e){this.currentValue=e},currentValue(e){this.$emit(Ri,e)}},methods:{check(e){this.isRadio?this.checkRadio(e):this.checkCheckbox(e)},checkRadio(e){this.currentValue=e.value},checkCheckbox(e){const t=e.value,i=this.currentValue,o=i.length,l=this.min,n=this.max,r=i.indexOf(t);r>-1?o>l&&i.splice(r,1):o<n&&i.push(t)}},components:{CubeCheckerItem:st}},Ol={class:"cube-checker"};function Hl(e,t,i,o,l,n){const r=s.resolveComponent("cube-checker-item");return s.openBlock(),s.createElementBlock("ul",Ol,[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.options,(a,c)=>(s.openBlock(),s.createBlock(r,{option:a,key:c},null,8,["option"]))),128))])])}const ee=p(Bl,[["render",Hl]]);ee.install=function(e){e.component(ee.name,ee),e.component(st.name,st)},ee.Item=st;const Zu="",Al="cube-radio",Xi="update:modelValue",Ll={name:Al,inject:{radioGroup:{default:null}},emits:[Xi],props:{modelValue:[String,Number],option:{type:[String,Object],required:!0},position:{type:String,default:"left"},hollowStyle:{type:Boolean,default:!1}},data(){return{radioValue:this.modelValue}},created(){const e=this.radioGroup;e&&e.radioValue!==void 0&&(this.radioValue=e.radioValue,this._cancelWatchGroup=this.$watch(()=>e.radioValue,t=>{this.radioValue=t}))},beforeUnmount(){this._cancelWatchGroup&&this._cancelWatchGroup(),this._cancelWatchGroup=null},watch:{modelValue(e){this.radioValue=e},radioValue(e){typeof this.modelValue=="number"&&(e=Number(e)),this.$emit(Xi,e),this.radioGroup&&(this.radioGroup.radioValue=e)}},computed:{computedOption(){const e=this.option;return typeof e=="string"?{value:e,label:e}:e},_containerClass(){const e=this.computedOption;return{"cube-radio-hollow":this.hollowStyle,"cube-radio_selected":this.radioValue===e.value,"cube-radio_disabled":e.disabled,"border-right-1px":this.$parent.horizontal}},_wrapClass(){let e=this.$parent;if(!(e.horizontal||e.$props.colNum>1))return"border-bottom-1px"}}},Yl=["data-pos"],zl=["disabled","value"],Rl=s.createElementVNode("span",{class:"cube-radio-ui cubeic-round-border"},[s.createElementVNode("i")],-1),Xl={class:"cube-radio-label"};function Ul(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-radio",n._containerClass]),"data-pos":i.position},[s.createElementVNode("label",{class:s.normalizeClass(["cube-radio-wrap",n._wrapClass])},[s.withDirectives(s.createElementVNode("input",{class:"cube-radio-input",type:"radio",disabled:i.option.disabled,"onUpdate:modelValue":t[0]||(t[0]=r=>l.radioValue=r),value:n.computedOption.value},null,8,zl),[[s.vModelRadio,l.radioValue]]),Rl,s.renderSlot(e.$slots,"default",{},()=>[s.createElementVNode("span",Xl,s.toDisplayString(n.computedOption.label),1)])],2)],10,Yl)}const Ie=p(Ll,[["render",Ul]]),Ju="",Fl="cube-radio-group",Ui="update:modelValue",Wl={name:Fl,mixins:[Yi],provide(){return{radioGroup:this}},emits:[Ui],props:{modelValue:[String,Number],options:{type:Array,default(){return[]}},position:{type:String,default:"left"},horizontal:{type:Boolean,default:!1},hollowStyle:{type:Boolean,default:!1}},data(){return{radioValue:this.modelValue}},watch:{modelValue(e){this.radioValue=e},radioValue(e){this.$emit(Ui,e)}},computed:{_groupClass(){if(!this.horizontal)return"border-top-1px border-bottom-1px"}},components:{CubeRadio:Ie}},jl=["data-horz","data-col"];function Gl(e,t,i,o,l,n){const r=s.resolveComponent("cube-radio");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-radio-group",n._groupClass]),ref:"group","data-horz":i.horizontal,"data-col":e.colNum>1},[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.options,(a,c)=>(s.openBlock(),s.createBlock(r,{key:c,option:a,position:i.position,"hollow-style":i.hollowStyle,modelValue:l.radioValue,"onUpdate:modelValue":t[0]||(t[0]=h=>l.radioValue=h)},null,8,["option","position","hollow-style","modelValue"]))),128))])],10,jl)}const te=p(Wl,[["render",Gl]]);te.install=function(e){e.component(te.name,te),e.component(Ie.name,Ie)},te.Radio=Ie;const Fi="change",Wi={emits:[Fi],methods:{changeHandler(e){this.$emit(Fi,e)},focus(){this.$refs.input.focus()},blur(){this.$refs.input.blur()}}},Qu="",Kl="cube-input",ji="update:modelValue",Gi="blur",Ki="focus",ql={name:Kl,mixins:[Wi],emits:[ji,Gi,Ki],props:{modelValue:[String,Number],type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},placeholder:String,readonly:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autocomplete:{type:[Boolean,String],default:!1},name:String,id:String,form:String,minlength:Number,maxlength:Number,resize:String,min:Number,max:Number,step:Number,tabindex:String,pattern:String,clearable:{type:[Boolean,Object],default:!1},eye:{type:[Boolean,Object],default:!1}},data(){return{inputValue:this.modelValue,isFocus:!1,formatedClearable:{visible:!1,blurHidden:!0},formatedEye:{open:!1,reverse:!1}}},computed:{_type(){const e=this.type;return e==="password"&&this.eye&&this.pwdVisible?"text":e},_showClear(){let e=this.formatedClearable.visible&&this.inputValue&&!this.readonly&&!this.disabled;return this.formatedClearable.blurHidden&&!this.isFocus&&(e=!1),e},_showPwdEye(){return this.type==="password"&&this.eye&&!this.disabled},pwdVisible(){const e=this.formatedEye;return e.reverse?!e.open:e.open},eyeClass(){return this.formatedEye.open?"cubeic-eye-visible":"cubeic-eye-invisible"}},watch:{modelValue(e){this.inputValue=e},inputValue(e){this.$emit(ji,e)},clearable:{handler(){this.formatClearable()},deep:!0,immediate:!0},eye:{handler(){this.formateEye()},deep:!0,immediate:!0}},methods:{formatClearable(){typeof this.clearable=="boolean"?this.formatedClearable.visible=this.clearable:Object.assign(this.formatedClearable,this.clearable)},formateEye(){typeof this.eye=="boolean"?this.formatedEye.open=this.eye:Object.assign(this.formatedEye,this.eye)},handleFocus(e){this.$emit(Ki,e),this.isFocus=!0},handleBlur(e){this.$emit(Gi,e),this.isFocus=!1},handleClear(e){this.inputValue="",this.$refs.input.focus()},handlePwdEye(){this.formatedEye.open=!this.formatedEye.open}}},Zl={key:0,class:"cube-input-prepend"},Jl=["type","disabled","readonly","autocomplete","autofocus"],Ql={key:1,class:"cube-input-append"},er=[s.createElementVNode("i",{class:"cubeic-wrong"},null,-1)];function tr(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-input",{"cube-input_active":l.isFocus}])},[e.$slots.prepend?(s.openBlock(),s.createElementBlock("div",Zl,[s.renderSlot(e.$slots,"prepend")])):s.createCommentVNode("",!0),s.withDirectives(s.createElementVNode("input",s.mergeProps({class:"cube-input-field",ref:"input","onUpdate:modelValue":t[0]||(t[0]=r=>l.inputValue=r)},e.$props,{type:n._type,disabled:i.disabled,readonly:i.readonly,autocomplete:i.autocomplete,autofocus:i.autofocus,onFocus:t[1]||(t[1]=(...r)=>n.handleFocus&&n.handleFocus(...r)),onBlur:t[2]||(t[2]=(...r)=>n.handleBlur&&n.handleBlur(...r)),onChange:t[3]||(t[3]=(...r)=>e.changeHandler&&e.changeHandler(...r))}),null,16,Jl),[[s.vModelDynamic,l.inputValue]]),e.$slots.append||n._showClear||n._showPwdEye?(s.openBlock(),s.createElementBlock("div",Ql,[n._showClear?(s.openBlock(),s.createElementBlock("div",{key:0,class:"cube-input-clear",onTouchend:t[4]||(t[4]=(...r)=>n.handleClear&&n.handleClear(...r))},er,32)):s.createCommentVNode("",!0),n._showPwdEye?(s.openBlock(),s.createElementBlock("div",{key:1,class:"cube-input-eye",onClick:t[5]||(t[5]=(...r)=>n.handlePwdEye&&n.handlePwdEye(...r))},[s.createElementVNode("i",{class:s.normalizeClass(n.eyeClass)},null,2)])):s.createCommentVNode("",!0),s.renderSlot(e.$slots,"append")])):s.createCommentVNode("",!0)],2)}const z=p(ql,[["render",tr]]);z.install=function(e){e.component(z.name,z)};const tm="",ir="cube-textarea",qi="update:modelValue",sr={negative:!0,remain:!0},nr={name:ir,mixins:[Wi],data(){return{textareaValue:this.modelValue,expanded:this.autoExpand?!!this.modelValue:!1,isFocus:!1}},emits:[qi,"focus","blur","change"],props:{modelValue:{type:String,default:""},cols:Number,rows:Number,readonly:Boolean,wrap:String,required:Boolean,placeholder:{type:String,default:"please type here..."},dirname:String,form:String,name:String,autofocus:Boolean,disabled:{type:Boolean,default:!1},maxlength:{type:Number,default:60},indicator:{type:[Boolean,Object],default:!0},autoExpand:{type:Boolean,default:!1}},computed:{indicatorConf(){let e=this.indicator;return typeof e=="boolean"&&(e={}),Object.assign({},sr,e)},count(){return this.textareaValue.length},remain(){let e=this.maxlength-this.count;return!this.indicatorConf.negative&&e<0&&(e=0),e}},watch:{modelValue(e){this.textareaValue=e},textareaValue(e){this.$emit(qi,e),!this.isFocus&&this.expanded&&(this.expanded=!1)}},methods:{handleFocus(e){this.$emit("focus",e),this.expanded=!0,this.isFocus=!0},handleBlur(e){this.$emit("blur",e),this.textareaValue.length===0&&(this.expanded=!1),this.isFocus=!1}}},or=["placeholder","maxlength","disabled"];function lr(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-textarea-wrapper",{"cube-textarea_expanded":l.expanded,"cube-textarea_active":l.isFocus}])},[s.withDirectives(s.createElementVNode("textarea",s.mergeProps({ref:"input",class:"cube-textarea","onUpdate:modelValue":t[0]||(t[0]=r=>l.textareaValue=r)},e.$props,{placeholder:i.placeholder,maxlength:i.maxlength,disabled:i.disabled,onFocus:t[1]||(t[1]=(...r)=>n.handleFocus&&n.handleFocus(...r)),onBlur:t[2]||(t[2]=(...r)=>n.handleBlur&&n.handleBlur(...r)),onChange:t[3]||(t[3]=(...r)=>e.changeHandler&&e.changeHandler(...r))}),`
    `,16,or),[[s.vModelText,l.textareaValue]]),i.indicator?s.withDirectives((s.openBlock(),s.createElementBlock("span",{key:0,class:"cube-textarea-indicator"},s.toDisplayString(n.indicatorConf.remain?n.remain:n.count),513)),[[s.vShow,l.expanded]]):s.createCommentVNode("",!0)],2)}const Be=p(nr,[["render",lr]]);Be.install=function(e){e.component(Be.name,Be)};/*!
 * better-normal-scroll v1.12.6
 * (c) 2016-2018 ustbhuangyi
 * Released under the MIT License.
 */var rr=function(){function e(t,i){var o=[],l=!0,n=!1,r=void 0;try{for(var a=t[Symbol.iterator](),c;!(l=(c=a.next()).done)&&(o.push(c.value),!(i&&o.length===i));l=!0);}catch(h){n=!0,r=h}finally{try{!l&&a.return&&a.return()}finally{if(n)throw r}}return o}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ar=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}else return Array.from(e)};function cr(e){e.prototype.on=function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this;this._events[t]||(this._events[t]=[]),this._events[t].push([i,o])},e.prototype.once=function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this;function l(){this.off(t,l),i.apply(o,arguments)}l.fn=i,this.on(t,l)},e.prototype.off=function(t,i){var o=this._events[t];if(o)for(var l=o.length;l--;)(o[l][0]===i||o[l][0]&&o[l][0].fn===i)&&(o[l][0]=void 0)},e.prototype.trigger=function(t){var i=this._events[t];if(i)for(var o=i.length,l=[].concat(ar(i)),n=0;n<o;n++){var r=l[n],a=rr(r,2),c=a[0],h=a[1];c&&c.apply(h,[].slice.call(arguments,1))}}}var F=typeof window<"u",nt=F&&navigator.userAgent.toLowerCase(),hr=nt&&/wechatdevtools/.test(nt),dr=nt&&nt.indexOf("android")>0;function W(){return window.performance&&window.performance.now?window.performance.now()+window.performance.timing.navigationStart:+new Date}function Oe(e){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];for(var l=0;l<i.length;l++){var n=i[l];for(var r in n)e[r]=n[r]}return e}function ot(e){return e==null}function Zi(e,t){return Math.sqrt(e*e+t*t)}var At=F&&document.createElement("div").style,Lt=function(){if(!F)return!1;var e={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var t in e)if(At[e[t]]!==void 0)return t;return!1}();function j(e){return Lt===!1?!1:Lt==="standard"?e==="transitionEnd"?"transitionend":e:Lt+e.charAt(0).toUpperCase()+e.substr(1)}function lt(e,t,i,o){e.addEventListener(t,i,{passive:!1,capture:!!o})}function rt(e,t,i,o){e.removeEventListener(t,i,{passive:!1,capture:!!o})}function Ji(e){for(var t=0,i=0;e;)t-=e.offsetLeft,i-=e.offsetTop,e=e.offsetParent;return{left:t,top:i}}function Yt(e){var t=e.getBoundingClientRect();return{left:-(t.left+window.pageXOffset),top:-(t.top+window.pageYOffset)}}var Qi=j("transform"),ur=F&&j("perspective")in At,zt=F&&("ontouchstart"in window||hr),mr=Qi!==!1,pr=F&&j("transition")in At,v={transform:Qi,transitionTimingFunction:j("transitionTimingFunction"),transitionDuration:j("transitionDuration"),transitionDelay:j("transitionDelay"),transformOrigin:j("transformOrigin"),transitionEnd:j("transitionEnd")},at=1,Rt=2,He={touchstart:at,touchmove:at,touchend:at,mousedown:Rt,mousemove:Rt,mouseup:Rt};function fe(e){if(e instanceof window.SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}else return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}function ct(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1}function fr(e,t){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.pageX=e.pageX,i.pageY=e.pageY,e.target.dispatchEvent(i)}function es(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"click",i=void 0;e.type==="mouseup"||e.type==="mousecancel"?i=e:(e.type==="touchend"||e.type==="touchcancel")&&(i=e.changedTouches[0]);var o={};i&&(o.screenX=i.screenX||0,o.screenY=i.screenY||0,o.clientX=i.clientX||0,o.clientY=i.clientY||0);var l=void 0,n=!0,r=!0;if(typeof MouseEvent<"u")try{l=new MouseEvent(t,Oe({bubbles:n,cancelable:r},o))}catch{a()}else a();function a(){l=document.createEvent("Event"),l.initEvent(t,n,r),Oe(l,o)}l.forwardedTouchEvent=!0,l._constructed=!0,e.target.dispatchEvent(l)}function gr(e){es(e,"dblclick")}function _r(e,t){t.firstChild?br(e,t.firstChild):t.appendChild(e)}function br(e,t){t.parentNode.insertBefore(e,t)}function ts(e,t){e.removeChild(t)}var yr={startX:0,startY:0,scrollX:!1,scrollY:!0,freeScroll:!1,directionLockThreshold:5,eventPassthrough:"",click:!1,tap:!1,bounce:!0,bounceTime:800,momentum:!0,momentumLimitTime:300,momentumLimitDistance:15,swipeTime:2500,swipeBounceTime:500,deceleration:.0015,flickLimitTime:200,flickLimitDistance:100,resizePolling:60,probeType:0,preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:!1,disableMouse:zt,disableTouch:!zt,observeDOM:!0,autoBlur:!0,wheel:!1,snap:!1,scrollbar:!1,pullDownRefresh:!1,pullUpLoad:!1,mouseWheel:!1,stopPropagation:!1,zoom:!1,infinity:!1,dblclick:!1};function Er(e){e.prototype._init=function(t,i){this._handleOptions(i),this._events={},this.x=0,this.y=0,this.directionX=0,this.directionY=0,this.setScale(1),this._addDOMEvents(),this._initExtFeatures(),this._watchTransition(),this.options.observeDOM&&this._initDOMObserver(),this.options.autoBlur&&this._handleAutoBlur(),this.refresh(),this.options.snap||this.scrollTo(this.options.startX,this.options.startY),this.enable()},e.prototype.setScale=function(t){this.lastScale=ot(this.scale)?t:this.scale,this.scale=t},e.prototype._handleOptions=function(t){this.options=Oe({},yr,t),this.translateZ=this.options.HWCompositing&&ur?" translateZ(0)":"",this.options.useTransition=this.options.useTransition&&pr,this.options.useTransform=this.options.useTransform&&mr,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollX=this.options.eventPassthrough==="horizontal"?!1:this.options.scrollX,this.options.scrollY=this.options.eventPassthrough==="vertical"?!1:this.options.scrollY,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.tap===!0&&(this.options.tap="tap")},e.prototype._addDOMEvents=function(){var t=lt;this._handleDOMEvents(t)},e.prototype._removeDOMEvents=function(){var t=rt;this._handleDOMEvents(t)},e.prototype._handleDOMEvents=function(t){var i=this.options.bindToWrapper?this.wrapper:window;t(window,"orientationchange",this),t(window,"resize",this),this.options.click&&t(this.wrapper,"click",this,!0),this.options.disableMouse||(t(this.wrapper,"mousedown",this),t(i,"mousemove",this),t(i,"mousecancel",this),t(i,"mouseup",this)),zt&&!this.options.disableTouch&&(t(this.wrapper,"touchstart",this),t(i,"touchmove",this),t(i,"touchcancel",this),t(i,"touchend",this)),t(this.scroller,v.transitionEnd,this)},e.prototype._initExtFeatures=function(){this.options.snap&&this._initSnap(),this.options.scrollbar&&this._initScrollbar(),this.options.pullUpLoad&&this._initPullUp(),this.options.pullDownRefresh&&this._initPullDown(),this.options.wheel&&this._initWheel(),this.options.mouseWheel&&this._initMouseWheel(),this.options.zoom&&this._initZoom(),this.options.infinity&&this._initInfinite()},e.prototype._watchTransition=function(){if(typeof Object.defineProperty=="function"){var t=this,i=!1,o=this.useTransition?"isInTransition":"isAnimating";Object.defineProperty(this,o,{get:function(){return i},set:function(n){i=n;for(var r=t.scroller.children.length?t.scroller.children:[t.scroller],a=i&&!t.pulling?"none":"auto",c=0;c<r.length;c++)r[c].style.pointerEvents=a}})}},e.prototype._handleAutoBlur=function(){this.on("scrollStart",function(){var t=document.activeElement;t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA")&&t.blur()})},e.prototype._initDOMObserver=function(){var t=this;if(typeof MutationObserver<"u"){var i=void 0,o=new MutationObserver(function(n){if(!t._shouldNotRefresh()){for(var r=!1,a=!1,c=0;c<n.length;c++){var h=n[c];if(h.type!=="attributes"){r=!0;break}else if(h.target!==t.scroller){a=!0;break}}r?t.refresh():a&&(clearTimeout(i),i=setTimeout(function(){t._shouldNotRefresh()||t.refresh()},60))}}),l={attributes:!0,childList:!0,subtree:!0};o.observe(this.scroller,l),this.on("destroy",function(){o.disconnect()})}else this._checkDOMUpdate()},e.prototype._shouldNotRefresh=function(){var t=this.x>this.minScrollX||this.x<this.maxScrollX||this.y>this.minScrollY||this.y<this.maxScrollY;return this.isInTransition||this.stopFromTransition||t},e.prototype._checkDOMUpdate=function(){var t=fe(this.scroller),i=t.width,o=t.height;function l(){if(!this.destroyed){t=fe(this.scroller);var r=t.width,a=t.height;(i!==r||o!==a)&&this.refresh(),i=r,o=a,n.call(this)}}function n(){var r=this;setTimeout(function(){l.call(r)},1e3)}n.call(this)},e.prototype.handleEvent=function(t){switch(t.type){case"touchstart":case"mousedown":this._start(t),this.options.zoom&&t.touches&&t.touches.length>1&&this._zoomStart(t);break;case"touchmove":case"mousemove":this.options.zoom&&t.touches&&t.touches.length>1?this._zoom(t):this._move(t);break;case"touchend":case"mouseup":case"touchcancel":case"mousecancel":this.scaled?this._zoomEnd(t):this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"click":this.enabled&&!t._constructed&&(ct(t.target,this.options.preventDefaultException)||(t.preventDefault(),t.stopPropagation()));break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._onMouseWheel(t);break}},e.prototype.refresh=function(){var t=window.getComputedStyle(this.wrapper,null).position==="static",i=fe(this.wrapper);this.wrapperWidth=i.width,this.wrapperHeight=i.height;var o=fe(this.scroller);this.scrollerWidth=Math.round(o.width*this.scale),this.scrollerHeight=Math.round(o.height*this.scale),this.relativeX=o.left,this.relativeY=o.top,t&&(this.relativeX-=i.left,this.relativeY-=i.top),this.minScrollX=0,this.minScrollY=0;var l=this.options.wheel;l?(this.items=this.scroller.children,this.options.itemHeight=this.itemHeight=this.items.length?this.scrollerHeight/this.items.length:0,this.selectedIndex===void 0&&(this.selectedIndex=l.selectedIndex||0),this.options.startY=-this.selectedIndex*this.itemHeight,this.maxScrollX=0,this.maxScrollY=-this.itemHeight*(this.items.length-1)):(this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.options.infinity||(this.maxScrollY=this.wrapperHeight-this.scrollerHeight),this.maxScrollX<0?(this.maxScrollX-=this.relativeX,this.minScrollX=-this.relativeX):this.scale>1&&(this.maxScrollX=this.maxScrollX/2-this.relativeX,this.minScrollX=this.maxScrollX),this.maxScrollY<0?(this.maxScrollY-=this.relativeY,this.minScrollY=-this.relativeY):this.scale>1&&(this.maxScrollY=this.maxScrollY/2-this.relativeY,this.minScrollY=this.maxScrollY)),this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<this.minScrollX,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<this.minScrollY,this.hasHorizontalScroll||(this.maxScrollX=this.minScrollX,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=this.minScrollY,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=Ji(this.wrapper),this.trigger("refresh"),!this.scaled&&this.resetPosition()},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1}}var $={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}}};function is(e,t,i,o,l,n,r){var a=e-t,c=Math.abs(a)/i,h=r.deceleration,d=r.itemHeight,u=r.swipeBounceTime,g=r.wheel,f=r.swipeTime,m=f,b=g?4:15,w=e+c/h*(a<0?-1:1);return g&&d&&(w=Math.round(w/d)*d),w<o?(w=n?Math.max(o-n/4,o-n/b*c):o,m=u):w>l&&(w=n?Math.min(l+n/4,l+n/b*c):l,m=u),{destination:Math.round(w),duration:m}}var Tr=100/60;function ss(){}var Xt=function(){return F?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return window.setTimeout(e,(e.interval||Tr)/2)}:ss}(),ge=function(){return F?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(e){window.clearTimeout(e)}:ss}(),Ae=1,ht=-1,Ut=1,Ft=-1,ns=1,Le=3;function dt(e){console.error("[BScroll warn]: "+e)}function ut(e,t){if(!e)throw new Error("[BScroll] "+t)}function xr(e){e.prototype._start=function(t){var i=He[t.type];if(!(i!==at&&t.button!==0)&&!(!this.enabled||this.destroyed||this.initiated&&this.initiated!==i)){this.initiated=i,this.options.preventDefault&&!ct(t.target,this.options.preventDefaultException)&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation(),this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.movingDirectionX=0,this.movingDirectionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=W(),this.options.wheel&&(this.target=t.target),this.stop();var o=t.touches?t.touches[0]:t;this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=o.pageX,this.pointY=o.pageY,this.trigger("beforeScrollStart")}},e.prototype._move=function(t){if(!(!this.enabled||this.destroyed||He[t.type]!==this.initiated)){this.options.preventDefault&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation();var i=t.touches?t.touches[0]:t,o=i.pageX-this.pointX,l=i.pageY-this.pointY;this.pointX=i.pageX,this.pointY=i.pageY,this.distX+=o,this.distY+=l;var n=Math.abs(this.distX),r=Math.abs(this.distY),a=W();if(!(a-this.endTime>this.options.momentumLimitTime&&r<this.options.momentumLimitDistance&&n<this.options.momentumLimitDistance)){if(!this.directionLocked&&!this.options.freeScroll&&(n>r+this.options.directionLockThreshold?this.directionLocked="h":r>=n+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),this.directionLocked==="h"){if(this.options.eventPassthrough==="vertical")t.preventDefault();else if(this.options.eventPassthrough==="horizontal"){this.initiated=!1;return}l=0}else if(this.directionLocked==="v"){if(this.options.eventPassthrough==="horizontal")t.preventDefault();else if(this.options.eventPassthrough==="vertical"){this.initiated=!1;return}o=0}o=this.hasHorizontalScroll?o:0,l=this.hasVerticalScroll?l:0,this.movingDirectionX=o>0?Ft:o<0?Ut:0,this.movingDirectionY=l>0?ht:l<0?Ae:0;var c=this.x+o,h=this.y+l,d=!1,u=!1,g=!1,f=!1,m=this.options.bounce;m!==!1&&(d=m.top===void 0?!0:m.top,u=m.bottom===void 0?!0:m.bottom,g=m.left===void 0?!0:m.left,f=m.right===void 0?!0:m.right),(c>this.minScrollX||c<this.maxScrollX)&&(c>this.minScrollX&&g||c<this.maxScrollX&&f?c=this.x+o/3:c=c>this.minScrollX?this.minScrollX:this.maxScrollX),(h>this.minScrollY||h<this.maxScrollY)&&(h>this.minScrollY&&d||h<this.maxScrollY&&u?h=this.y+l/3:h=h>this.minScrollY?this.minScrollY:this.maxScrollY),this.moved||(this.moved=!0,this.trigger("scrollStart")),this._translate(c,h),a-this.startTime>this.options.momentumLimitTime&&(this.startTime=a,this.startX=this.x,this.startY=this.y,this.options.probeType===ns&&this.trigger("scroll",{x:this.x,y:this.y})),this.options.probeType>ns&&this.trigger("scroll",{x:this.x,y:this.y});var b=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,w=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,P=this.pointX-b,C=this.pointY-w;(P>document.documentElement.clientWidth-this.options.momentumLimitDistance||P<this.options.momentumLimitDistance||C<this.options.momentumLimitDistance||C>document.documentElement.clientHeight-this.options.momentumLimitDistance)&&this._end(t)}}},e.prototype._end=function(t){if(!(!this.enabled||this.destroyed||He[t.type]!==this.initiated)){this.initiated=!1,this.options.preventDefault&&!ct(t.target,this.options.preventDefaultException)&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation(),this.trigger("touchEnd",{x:this.x,y:this.y}),this.isInTransition=!1;var i=Math.round(this.x),o=Math.round(this.y),l=i-this.absStartX,n=o-this.absStartY;if(this.directionX=l>0?Ft:l<0?Ut:0,this.directionY=n>0?ht:n<0?Ae:0,!(this.options.pullDownRefresh&&this._checkPullDown())){if(this._checkClick(t)){this.trigger("scrollCancel");return}if(!this.resetPosition(this.options.bounceTime,$.bounce)){this._translate(i,o),this.endTime=W();var r=this.endTime-this.startTime,a=Math.abs(i-this.startX),c=Math.abs(o-this.startY);if(this._events.flick&&r<this.options.flickLimitTime&&a<this.options.flickLimitDistance&&c<this.options.flickLimitDistance){this.trigger("flick");return}var h=0;if(this.options.momentum&&r<this.options.momentumLimitTime&&(c>this.options.momentumLimitDistance||a>this.options.momentumLimitDistance)){var d=!1,u=!1,g=!1,f=!1,m=this.options.bounce;m!==!1&&(d=m.top===void 0?!0:m.top,u=m.bottom===void 0?!0:m.bottom,g=m.left===void 0?!0:m.left,f=m.right===void 0?!0:m.right);var b=this.directionX===Ft&&g||this.directionX===Ut&&f?this.wrapperWidth:0,w=this.directionY===ht&&d||this.directionY===Ae&&u?this.wrapperHeight:0,P=this.hasHorizontalScroll?is(this.x,this.startX,r,this.maxScrollX,this.minScrollX,b,this.options):{destination:i,duration:0},C=this.hasVerticalScroll?is(this.y,this.startY,r,this.maxScrollY,this.minScrollY,w,this.options):{destination:o,duration:0};i=P.destination,o=C.destination,h=Math.max(P.duration,C.duration),this.isInTransition=!0}else this.options.wheel&&(o=Math.round(o/this.itemHeight)*this.itemHeight,h=this.options.wheel.adjustTime||400);var ae=$.swipe;if(this.options.snap){var y=this._nearestSnap(i,o);this.currentPage=y,h=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(i-y.x),1e3),Math.min(Math.abs(o-y.y),1e3)),300),i=y.x,o=y.y,this.directionX=0,this.directionY=0,ae=this.options.snap.easing||$.bounce}if(i!==this.x||o!==this.y){(i>this.minScrollX||i<this.maxScrollX||o>this.minScrollY||o<this.maxScrollY)&&(ae=$.swipeBounce),this.scrollTo(i,o,h,ae);return}this.options.wheel&&(this.selectedIndex=Math.round(Math.abs(this.y/this.itemHeight))),this.trigger("scrollEnd",{x:this.x,y:this.y})}}}},e.prototype._checkClick=function(t){var i=this.stopFromTransition&&!this.pulling;if(this.stopFromTransition=!1,!this.moved)if(this.options.wheel){if(this.target&&this.target.classList.contains(this.options.wheel.wheelWrapperClass)){var o=Math.abs(Math.round(this.y/this.itemHeight)),l=Math.round((this.pointY+Yt(this.wrapper).top-this.wrapperHeight/2)/this.itemHeight);this.target=this.items[o+l]}return this.scrollToElement(this.target,this.options.wheel.adjustTime||400,!0,!0,$.swipe),!0}else{if(!i){var n=this.options.dblclick,r=!1;if(n&&this.lastClickTime){var a=n.delay,c=a===void 0?300:a;W()-this.lastClickTime<c&&(r=!0,gr(t))}return this.options.tap&&fr(t,this.options.tap),this.options.click&&!ct(t.target,this.options.preventDefaultException)&&es(t),this.lastClickTime=r?null:W(),!0}return!1}return!1},e.prototype._resize=function(){var t=this;this.enabled&&(dr&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling))},e.prototype._startProbe=function(){ge(this.probeTimer),this.probeTimer=Xt(i);var t=this;function i(){var o=t.getComputedPosition();if(t.trigger("scroll",o),!t.isInTransition){t.trigger("scrollEnd",o);return}t.probeTimer=Xt(i)}},e.prototype._transitionTime=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(this.scrollerStyle[v.transitionDuration]=t+"ms",this.options.wheel)for(var i=0;i<this.items.length;i++)this.items[i].style[v.transitionDuration]=t+"ms";if(this.indicators)for(var o=0;o<this.indicators.length;o++)this.indicators[o].transitionTime(t)},e.prototype._transitionTimingFunction=function(t){if(this.scrollerStyle[v.transitionTimingFunction]=t,this.options.wheel)for(var i=0;i<this.items.length;i++)this.items[i].style[v.transitionTimingFunction]=t;if(this.indicators)for(var o=0;o<this.indicators.length;o++)this.indicators[o].transitionTimingFunction(t)},e.prototype._transitionEnd=function(t){if(!(t.target!==this.scroller||!this.isInTransition)){this._transitionTime();var i=!this.pulling||this.movingDirectionY===Ae;i&&!this.resetPosition(this.options.bounceTime,$.bounce)&&(this.isInTransition=!1,this.options.probeType!==Le&&this.trigger("scrollEnd",{x:this.x,y:this.y}))}},e.prototype._translate=function(t,i,o){if(ut(!ot(t)&&!ot(i),"Translate x or y is null or undefined."),ot(o)&&(o=this.scale),this.options.useTransform?this.scrollerStyle[v.transform]="translate("+t+"px,"+i+"px) scale("+o+")"+this.translateZ:(t=Math.round(t),i=Math.round(i),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=i+"px"),this.options.wheel)for(var l=this.options.wheel.rotate,n=l===void 0?25:l,r=0;r<this.items.length;r++){var a=n*(i/this.itemHeight+r);this.items[r].style[v.transform]="rotateX("+a+"deg)"}if(this.x=t,this.y=i,this.setScale(o),this.indicators)for(var c=0;c<this.indicators.length;c++)this.indicators[c].updatePosition()},e.prototype._animate=function(t,i,o,l){var n=this,r=this.x,a=this.y,c=this.lastScale,h=this.scale,d=W(),u=d+o;function g(){var f=W();if(f>=u){n.isAnimating=!1,n._translate(t,i,h),n.trigger("scroll",{x:n.x,y:n.y}),!n.pulling&&!n.resetPosition(n.options.bounceTime)&&n.trigger("scrollEnd",{x:n.x,y:n.y});return}f=(f-d)/o;var m=l(f),b=(t-r)*m+r,w=(i-a)*m+a,P=(h-c)*m+c;n._translate(b,w,P),n.isAnimating&&(n.animateTimer=Xt(g)),n.options.probeType===Le&&n.trigger("scroll",{x:n.x,y:n.y})}this.isAnimating=!0,ge(this.animateTimer),g()},e.prototype.scrollBy=function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.bounce;t=this.x+t,i=this.y+i,this.scrollTo(t,i,o,l)},e.prototype.scrollTo=function(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.bounce;this.isInTransition=this.options.useTransition&&o>0&&(t!==this.x||i!==this.y),!o||this.options.useTransition?(this._transitionTimingFunction(l.style),this._transitionTime(o),this._translate(t,i),o&&this.options.probeType===Le&&this._startProbe(),!o&&(t!==this.x||i!==this.y)&&(this.trigger("scroll",{x:t,y:i}),this._reflow=document.body.offsetHeight,this.resetPosition(this.options.bounceTime,$.bounce)||this.trigger("scrollEnd",{x:t,y:i})),this.options.wheel&&(i>this.minScrollY?this.selectedIndex=0:i<this.maxScrollY?this.selectedIndex=this.items.length-1:this.selectedIndex=Math.round(Math.abs(i/this.itemHeight)))):this._animate(t,i,o,l.fn)},e.prototype.scrollToElement=function(t,i,o,l,n){if(t&&(t=t.nodeType?t:this.scroller.querySelector(t),!(this.options.wheel&&!t.classList.contains(this.options.wheel.wheelItemClass)))){var r=Ji(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,o===!0&&(o=Math.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),l===!0&&(l=Math.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=o||0,r.top-=l||0,r.left=r.left>this.minScrollX?this.minScrollX:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>this.minScrollY?this.minScrollY:r.top<this.maxScrollY?this.maxScrollY:r.top,this.options.wheel&&(r.top=Math.round(r.top/this.itemHeight)*this.itemHeight),this.scrollTo(r.left,r.top,i,n)}},e.prototype.resetPosition=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.bounce,o=this.x,l=Math.round(o);!this.hasHorizontalScroll||l>this.minScrollX?o=this.minScrollX:l<this.maxScrollX&&(o=this.maxScrollX);var n=this.y,r=Math.round(n);return!this.hasVerticalScroll||r>this.minScrollY?n=this.minScrollY:r<this.maxScrollY&&(n=this.maxScrollY),o===this.x&&n===this.y?!1:(this.scrollTo(o,n,t,i),!0)},e.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.scroller,null),i=void 0,o=void 0;return this.options.useTransform?(t=t[v.transform].split(")")[0].split(", "),i=+(t[12]||t[4]),o=+(t[13]||t[5])):(i=+t.left.replace(/[^-\d.]/g,""),o=+t.top.replace(/[^-\d.]/g,"")),{x:i,y:o}},e.prototype.stop=function(){if(this.options.useTransition&&this.isInTransition){this.isInTransition=!1,ge(this.probeTimer);var t=this.getComputedPosition();this._translate(t.x,t.y),this.options.wheel?this.target=this.items[Math.round(-t.y/this.itemHeight)]:this.trigger("scrollEnd",{x:this.x,y:this.y}),this.stopFromTransition=!0}else!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,ge(this.animateTimer),this.trigger("scrollEnd",{x:this.x,y:this.y}),this.stopFromTransition=!0)},e.prototype.destroy=function(){this.destroyed=!0,this.trigger("destroy"),this.options.useTransition?ge(this.probeTimer):ge(this.animateTimer),this._removeDOMEvents(),this._events={}}}function kr(e){e.prototype._initSnap=function(){var t=this;this.currentPage={};var i=this.options.snap;if(i.loop){var o=this.scroller.children;o.length>1?(_r(o[o.length-1].cloneNode(!0),this.scroller),this.scroller.appendChild(o[1].cloneNode(!0))):i.loop=!1}var l=i.el;typeof l=="string"&&(l=this.scroller.querySelectorAll(l)),this.on("refresh",function(){if(t.pages=[],!(!t.wrapperWidth||!t.wrapperHeight||!t.scrollerWidth||!t.scrollerHeight)){var n=i.stepX||t.wrapperWidth,r=i.stepY||t.wrapperHeight,a=0,c=void 0,h=void 0,d=void 0,u=0,g=void 0,f=0,m=void 0,b=void 0;if(l)for(g=l.length,m=-1;u<g;u++)b=fe(l[u]),(u===0||b.left<=fe(l[u-1]).left)&&(f=0,m++),t.pages[f]||(t.pages[f]=[]),a=Math.max(-b.left,t.maxScrollX),c=Math.max(-b.top,t.maxScrollY),h=a-Math.round(b.width/2),d=c-Math.round(b.height/2),t.pages[f][m]={x:a,y:c,width:b.width,height:b.height,cx:h,cy:d},a>t.maxScrollX&&f++;else for(h=Math.round(n/2),d=Math.round(r/2);a>-t.scrollerWidth;){for(t.pages[u]=[],g=0,c=0;c>-t.scrollerHeight;)t.pages[u][g]={x:Math.max(a,t.maxScrollX),y:Math.max(c,t.maxScrollY),width:n,height:r,cx:a-h,cy:c-d},c-=r,g++;a-=n,u++}t._checkSnapLoop();var w=i._loopX?1:0,P=i._loopY?1:0;t._goToPage(t.currentPage.pageX||w,t.currentPage.pageY||P,0);var C=i.threshold;C%1===0?(t.snapThresholdX=C,t.snapThresholdY=C):(t.snapThresholdX=Math.round(t.pages[t.currentPage.pageX][t.currentPage.pageY].width*C),t.snapThresholdY=Math.round(t.pages[t.currentPage.pageX][t.currentPage.pageY].height*C))}}),this.on("scrollEnd",function(){i.loop&&(i._loopX?(t.currentPage.pageX===0&&t._goToPage(t.pages.length-2,t.currentPage.pageY,0),t.currentPage.pageX===t.pages.length-1&&t._goToPage(1,t.currentPage.pageY,0)):(t.currentPage.pageY===0&&t._goToPage(t.currentPage.pageX,t.pages[0].length-2,0),t.currentPage.pageY===t.pages[0].length-1&&t._goToPage(t.currentPage.pageX,1,0)))}),i.listenFlick!==!1&&this.on("flick",function(){var n=i.speed||Math.max(Math.max(Math.min(Math.abs(t.x-t.startX),1e3),Math.min(Math.abs(t.y-t.startY),1e3)),300);t._goToPage(t.currentPage.pageX+t.directionX,t.currentPage.pageY+t.directionY,n)}),this.on("destroy",function(){if(i.loop){var n=t.scroller.children;n.length>2&&(ts(t.scroller,n[n.length-1]),ts(t.scroller,n[0]))}})},e.prototype._checkSnapLoop=function(){var t=this.options.snap;!t.loop||!this.pages||!this.pages.length||(this.pages.length>1&&(t._loopX=!0),this.pages[0]&&this.pages[0].length>1&&(t._loopY=!0),t._loopX&&t._loopY&&dt("Loop does not support two direction at the same time."))},e.prototype._nearestSnap=function(t,i){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var o=0;if(Math.abs(t-this.absStartX)<=this.snapThresholdX&&Math.abs(i-this.absStartY)<=this.snapThresholdY)return this.currentPage;t>this.minScrollX?t=this.minScrollX:t<this.maxScrollX&&(t=this.maxScrollX),i>this.minScrollY?i=this.minScrollY:i<this.maxScrollY&&(i=this.maxScrollY);for(var l=this.pages.length;o<l;o++)if(t>=this.pages[o][0].cx){t=this.pages[o][0].x;break}l=this.pages[o].length;for(var n=0;n<l;n++)if(i>=this.pages[0][n].cy){i=this.pages[0][n].y;break}return o===this.currentPage.pageX&&(o+=this.directionX,o<0?o=0:o>=this.pages.length&&(o=this.pages.length-1),t=this.pages[o][0].x),n===this.currentPage.pageY&&(n+=this.directionY,n<0?n=0:n>=this.pages[0].length&&(n=this.pages[0].length-1),i=this.pages[0][n].y),{x:t,y:i,pageX:o,pageY:n}},e.prototype._goToPage=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments[2],l=arguments[3],n=this.options.snap;if(!(!n||!this.pages||!this.pages.length)&&(l=l||n.easing||$.bounce,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),!!this.pages[t])){i>=this.pages[t].length?i=this.pages[t].length-1:i<0&&(i=0);var r=this.pages[t][i].x,a=this.pages[t][i].y;o=o===void 0?n.speed||Math.max(Math.max(Math.min(Math.abs(r-this.x),1e3),Math.min(Math.abs(a-this.y),1e3)),300):o,this.currentPage={x:r,y:a,pageX:t,pageY:i},this.scrollTo(r,a,o,l)}},e.prototype.goToPage=function(t,i,o,l){var n=this.options.snap;if(!(!n||!this.pages||!this.pages.length)){if(n.loop){var r=void 0;n._loopX?(r=this.pages.length-2,t>=r?t=r-1:t<0&&(t=0),t+=1):(r=this.pages[0].length-2,i>=r?i=r-1:i<0&&(i=0),i+=1)}this._goToPage(t,i,o,l)}},e.prototype.next=function(t,i){var o=this.options.snap;if(o){var l=this.currentPage.pageX,n=this.currentPage.pageY;l++,l>=this.pages.length&&this.hasVerticalScroll&&(l=0,n++),this._goToPage(l,n,t,i)}},e.prototype.prev=function(t,i){var o=this.options.snap;if(o){var l=this.currentPage.pageX,n=this.currentPage.pageY;l--,l<0&&this.hasVerticalScroll&&(l=0,n--),this._goToPage(l,n,t,i)}},e.prototype.getCurrentPage=function(){var t=this.options.snap;if(!t)return null;if(t.loop){var i=void 0;return t._loopX?i=Oe({},this.currentPage,{pageX:this.currentPage.pageX-1}):i=Oe({},this.currentPage,{pageY:this.currentPage.pageY-1}),i}return this.currentPage}}function wr(e){e.prototype.wheelTo=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.options.wheel&&(this.y=-t*this.itemHeight,this.scrollTo(0,this.y))},e.prototype.getSelectedIndex=function(){return this.options.wheel&&this.selectedIndex},e.prototype._initWheel=function(){var t=this.options.wheel;t.wheelWrapperClass||(t.wheelWrapperClass="wheel-scroll"),t.wheelItemClass||(t.wheelItemClass="wheel-item"),t.selectedIndex===void 0&&(t.selectedIndex=0,dt("wheel option selectedIndex is required!"))}}var _e=8;function Sr(e){e.prototype._initScrollbar=function(){var t=this,i=this.options.scrollbar,o=i.fade,l=o===void 0?!0:o,n=i.interactive,r=n===void 0?!1:n;this.indicators=[];var a=void 0;this.options.scrollX&&(a={el:os("horizontal"),direction:"horizontal",fade:l,interactive:r},this._insertScrollBar(a.el),this.indicators.push(new E(this,a))),this.options.scrollY&&(a={el:os("vertical"),direction:"vertical",fade:l,interactive:r},this._insertScrollBar(a.el),this.indicators.push(new E(this,a))),this.on("refresh",function(){for(var c=0;c<t.indicators.length;c++)t.indicators[c].refresh()}),l&&(this.on("scrollEnd",function(){for(var c=0;c<t.indicators.length;c++)t.indicators[c].fade()}),this.on("scrollCancel",function(){for(var c=0;c<t.indicators.length;c++)t.indicators[c].fade()}),this.on("scrollStart",function(){for(var c=0;c<t.indicators.length;c++)t.indicators[c].fade(!0)}),this.on("beforeScrollStart",function(){for(var c=0;c<t.indicators.length;c++)t.indicators[c].fade(!0,!0)})),this.on("destroy",function(){t._removeScrollBars()})},e.prototype._insertScrollBar=function(t){this.wrapper.appendChild(t)},e.prototype._removeScrollBars=function(){for(var t=0;t<this.indicators.length;t++)this.indicators[t].destroy()}}function os(e){var t=document.createElement("div"),i=document.createElement("div");return t.style.cssText="position:absolute;z-index:9999;pointerEvents:none",i.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",i.className="bscroll-indicator",e==="horizontal"?(t.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",i.style.height="100%",t.className="bscroll-horizontal-scrollbar"):(t.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",i.style.width="100%",t.className="bscroll-vertical-scrollbar"),t.style.cssText+=";overflow:hidden",t.appendChild(i),t}function E(e,t){this.wrapper=t.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.direction=t.direction,t.fade?(this.visible=0,this.wrapperStyle.opacity="0"):this.visible=1,this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.x=0,this.y=0,t.interactive&&this._addDOMEvents()}E.prototype.handleEvent=function(e){switch(e.type){case"touchstart":case"mousedown":this._start(e);break;case"touchmove":case"mousemove":this._move(e);break;case"touchend":case"mouseup":case"touchcancel":case"mousecancel":this._end(e);break}},E.prototype.refresh=function(){this._shouldShow()&&(this.transitionTime(),this._calculate(),this.updatePosition())},E.prototype.fade=function(e,t){var i=this;if(!(t&&!this.visible)){var o=e?250:500;e=e?"1":"0",this.wrapperStyle[v.transitionDuration]=o+"ms",clearTimeout(this.fadeTimeout),this.fadeTimeout=setTimeout(function(){i.wrapperStyle.opacity=e,i.visible=+e},0)}},E.prototype.updatePosition=function(){if(this.direction==="vertical"){var e=Math.round(this.sizeRatioY*this.scroller.y);if(e<0){this.transitionTime(500);var t=Math.max(this.indicatorHeight+e*3,_e);this.indicatorStyle.height=t+"px",e=0}else if(e>this.maxPosY){this.transitionTime(500);var i=Math.max(this.indicatorHeight-(e-this.maxPosY)*3,_e);this.indicatorStyle.height=i+"px",e=this.maxPosY+this.indicatorHeight-i}else this.indicatorStyle.height=this.indicatorHeight+"px";this.y=e,this.scroller.options.useTransform?this.indicatorStyle[v.transform]="translateY("+e+"px)"+this.scroller.translateZ:this.indicatorStyle.top=e+"px"}else{var o=Math.round(this.sizeRatioX*this.scroller.x);if(o<0){this.transitionTime(500);var l=Math.max(this.indicatorWidth+o*3,_e);this.indicatorStyle.width=l+"px",o=0}else if(o>this.maxPosX){this.transitionTime(500);var n=Math.max(this.indicatorWidth-(o-this.maxPosX)*3,_e);this.indicatorStyle.width=n+"px",o=this.maxPosX+this.indicatorWidth-n}else this.indicatorStyle.width=this.indicatorWidth+"px";this.x=o,this.scroller.options.useTransform?this.indicatorStyle[v.transform]="translateX("+o+"px)"+this.scroller.translateZ:this.indicatorStyle.left=o+"px"}},E.prototype.transitionTime=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.indicatorStyle[v.transitionDuration]=e+"ms"},E.prototype.transitionTimingFunction=function(e){this.indicatorStyle[v.transitionTimingFunction]=e},E.prototype.destroy=function(){this._removeDOMEvents(),this.wrapper.parentNode.removeChild(this.wrapper)},E.prototype._start=function(e){var t=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=t.pageX,this.lastPointY=t.pageY,this.startTime=W(),this._handleMoveEvents(lt),this.scroller.trigger("beforeScrollStart")},E.prototype._move=function(e){var t=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.moved||this.scroller.trigger("scrollStart"),this.moved=!0;var i=t.pageX-this.lastPointX;this.lastPointX=t.pageX;var o=t.pageY-this.lastPointY;this.lastPointY=t.pageY;var l=this.x+i,n=this.y+o;this._pos(l,n)},E.prototype._end=function(e){if(this.initiated){this.initiated=!1,e.preventDefault(),e.stopPropagation(),this._handleMoveEvents(rt);var t=this.scroller.options.snap;if(t){var i=t.speed,o=t.easing,l=o===void 0?$.bounce:o,n=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),r=i||Math.max(Math.max(Math.min(Math.abs(this.scroller.x-n.x),1e3),Math.min(Math.abs(this.scroller.y-n.y),1e3)),300);(this.scroller.x!==n.x||this.scroller.y!==n.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=n,this.scroller.scrollTo(n.x,n.y,r,l))}this.moved&&this.scroller.trigger("scrollEnd",{x:this.scroller.x,y:this.scroller.y})}},E.prototype._pos=function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=Math.round(e/this.sizeRatioX),t=Math.round(t/this.sizeRatioY),this.scroller.scrollTo(e,t),this.scroller.trigger("scroll",{x:this.scroller.x,y:this.scroller.y})},E.prototype._shouldShow=function(){return this.direction==="vertical"&&this.scroller.hasVerticalScroll||this.direction==="horizontal"&&this.scroller.hasHorizontalScroll?(this.wrapper.style.display="",!0):(this.wrapper.style.display="none",!1)},E.prototype._calculate=function(){if(this.direction==="vertical"){var e=this.wrapper.clientHeight;this.indicatorHeight=Math.max(Math.round(e*e/(this.scroller.scrollerHeight||e||1)),_e),this.indicatorStyle.height=this.indicatorHeight+"px",this.maxPosY=e-this.indicatorHeight,this.sizeRatioY=this.maxPosY/this.scroller.maxScrollY}else{var t=this.wrapper.clientWidth;this.indicatorWidth=Math.max(Math.round(t*t/(this.scroller.scrollerWidth||t||1)),_e),this.indicatorStyle.width=this.indicatorWidth+"px",this.maxPosX=t-this.indicatorWidth,this.sizeRatioX=this.maxPosX/this.scroller.maxScrollX}},E.prototype._addDOMEvents=function(){var e=lt;this._handleDOMEvents(e)},E.prototype._removeDOMEvents=function(){var e=rt;this._handleDOMEvents(e),this._handleMoveEvents(e)},E.prototype._handleMoveEvents=function(e){this.scroller.options.disableTouch||e(window,"touchmove",this),this.scroller.options.disableMouse||e(window,"mousemove",this)},E.prototype._handleDOMEvents=function(e){this.scroller.options.disableTouch||(e(this.indicator,"touchstart",this),e(window,"touchend",this)),this.scroller.options.disableMouse||(e(this.indicator,"mousedown",this),e(window,"mouseup",this))};function Cr(e){e.prototype._initPullDown=function(){this.options.probeType=Le},e.prototype._checkPullDown=function(){var t=this.options.pullDownRefresh,i=t.threshold,o=i===void 0?90:i,l=t.stop,n=l===void 0?40:l;return this.directionY!==ht||this.y<o?!1:(this.pulling||(this.pulling=!0,this.trigger("pullingDown")),this.scrollTo(this.x,n,this.options.bounceTime,$.bounce),this.pulling)},e.prototype.finishPullDown=function(){this.pulling=!1,this.resetPosition(this.options.bounceTime,$.bounce)},e.prototype.openPullDown=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.options.pullDownRefresh=t,this._initPullDown()},e.prototype.closePullDown=function(){this.options.pullDownRefresh=!1}}function Nr(e){e.prototype._initPullUp=function(){this.options.probeType=Le,this.pullupWatching=!1,this._watchPullUp()},e.prototype._watchPullUp=function(){this.pullupWatching||(this.pullupWatching=!0,this.on("scroll",this._checkToEnd))},e.prototype._checkToEnd=function(t){var i=this,o=this.options.pullUpLoad.threshold,l=o===void 0?0:o;this.movingDirectionY===Ae&&t.y<=this.maxScrollY+l&&(this.once("scrollEnd",function(){i.pullupWatching=!1}),this.trigger("pullingUp"),this.off("scroll",this._checkToEnd))},e.prototype.finishPullUp=function(){var t=this;this.pullupWatching?this.once("scrollEnd",function(){t._watchPullUp()}):this._watchPullUp()},e.prototype.openPullUp=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.options.pullUpLoad=t,this._initPullUp()},e.prototype.closePullUp=function(){this.options.pullUpLoad=!1,this.pullupWatching&&(this.pullupWatching=!1,this.off("scroll",this._checkToEnd))}}function $r(e){e.prototype._initMouseWheel=function(){var t=this;this._handleMouseWheelEvent(lt),this.on("destroy",function(){clearTimeout(t.mouseWheelTimer),clearTimeout(t.mouseWheelEndTimer),t._handleMouseWheelEvent(rt)}),this.firstWheelOpreation=!0},e.prototype._handleMouseWheelEvent=function(t){t(this.wrapper,"wheel",this),t(this.wrapper,"mousewheel",this),t(this.wrapper,"DOMMouseScroll",this)},e.prototype._onMouseWheel=function(t){var i=this;if(this.enabled){t.preventDefault(),this.options.stopPropagation&&t.stopPropagation(),this.firstWheelOpreation&&this.trigger("scrollStart"),this.firstWheelOpreation=!1;var o=this.options.mouseWheel,l=o.speed,n=l===void 0?20:l,r=o.invert,a=r===void 0?!1:r,c=o.easeTime,h=c===void 0?300:c;clearTimeout(this.mouseWheelTimer),this.mouseWheelTimer=setTimeout(function(){!i.options.snap&&!h&&i.trigger("scrollEnd",{x:i.x,y:i.y}),i.firstWheelOpreation=!0},400);var d=void 0,u=void 0;switch(!0){case"deltaX"in t:t.deltaMode===1?(d=-t.deltaX*n,u=-t.deltaY*n):(d=-t.deltaX,u=-t.deltaY);break;case"wheelDeltaX"in t:d=t.wheelDeltaX/120*n,u=t.wheelDeltaY/120*n;break;case"wheelDelta"in t:d=u=t.wheelDelta/120*n;break;case"detail"in t:d=u=-t.detail/3*n;break;default:return}var g=a?-1:1;d*=g,u*=g,this.hasVerticalScroll||(d=u,u=0);var f=void 0,m=void 0;if(this.options.snap){f=this.currentPage.pageX,m=this.currentPage.pageY,d>0?f--:d<0&&f++,u>0?m--:u<0&&m++,this._goToPage(f,m);return}f=this.x+Math.round(this.hasHorizontalScroll?d:0),m=this.y+Math.round(this.hasVerticalScroll?u:0),this.movingDirectionX=this.directionX=d>0?-1:d<0?1:0,this.movingDirectionY=this.directionY=u>0?-1:u<0?1:0,f>this.minScrollX?f=this.minScrollX:f<this.maxScrollX&&(f=this.maxScrollX),m>this.minScrollY?m=this.minScrollY:m<this.maxScrollY&&(m=this.maxScrollY);var b=this.y===m;this.scrollTo(f,m,h,$.swipe),this.trigger("scroll",{x:this.x,y:this.y}),clearTimeout(this.mouseWheelEndTimer),b&&(this.mouseWheelEndTimer=setTimeout(function(){i.trigger("scrollEnd",{x:i.x,y:i.y})},h))}}}function vr(e){e.prototype._initZoom=function(){var t=this.options.zoom,i=t.start,o=i===void 0?1:i,l=t.min,n=l===void 0?1:l,r=t.max,a=r===void 0?4:r;this.scale=Math.min(Math.max(o,n),a),this.setScale(this.scale),this.scrollerStyle[v.transformOrigin]="0 0"},e.prototype._zoomTo=function(t,i,o,l){this.scaled=!0;var n=t/(l||this.scale);this.setScale(t),this.refresh();var r=Math.round(this.startX-(i-this.relativeX)*(n-1)),a=Math.round(this.startY-(o-this.relativeY)*(n-1));r>this.minScrollX?r=this.minScrollX:r<this.maxScrollX&&(r=this.maxScrollX),a>this.minScrollY?a=this.minScrollY:a<this.maxScrollY&&(a=this.maxScrollY),(this.x!==r||this.y!==a)&&this.scrollTo(r,a,this.options.bounceTime),this.scaled=!1},e.prototype.zoomTo=function(t,i,o){var l=Yt(this.wrapper),n=l.left,r=l.top,a=i+n-this.x,c=o+r-this.y;this._zoomTo(t,a,c)},e.prototype._zoomStart=function(t){var i=t.touches[0],o=t.touches[1],l=Math.abs(i.pageX-o.pageX),n=Math.abs(i.pageY-o.pageY);this.startDistance=Zi(l,n),this.startScale=this.scale;var r=Yt(this.wrapper),a=r.left,c=r.top;this.originX=Math.abs(i.pageX+o.pageX)/2+a-this.x,this.originY=Math.abs(i.pageY+o.pageY)/2+c-this.y,this.trigger("zoomStart")},e.prototype._zoom=function(t){if(!(!this.enabled||this.destroyed||He[t.type]!==this.initiated)){this.options.preventDefault&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation();var i=t.touches[0],o=t.touches[1],l=Math.abs(i.pageX-o.pageX),n=Math.abs(i.pageY-o.pageY),r=Zi(l,n),a=r/this.startDistance*this.startScale;this.scaled=!0;var c=this.options.zoom,h=c.min,d=h===void 0?1:h,u=c.max,g=u===void 0?4:u;a<d?a=.5*d*Math.pow(2,a/d):a>g&&(a=2*g*Math.pow(.5,g/a));var f=a/this.startScale,m=this.startX-(this.originX-this.relativeX)*(f-1),b=this.startY-(this.originY-this.relativeY)*(f-1);this.setScale(a),this.scrollTo(m,b,0)}},e.prototype._zoomEnd=function(t){if(!(!this.enabled||this.destroyed||He[t.type]!==this.initiated)){this.options.preventDefault&&t.preventDefault(),this.options.stopPropagation&&t.stopPropagation(),this.isInTransition=!1,this.isAnimating=!1,this.initiated=0;var i=this.options.zoom,o=i.min,l=o===void 0?1:o,n=i.max,r=n===void 0?4:n,a=this.scale>r?r:this.scale<l?l:this.scale;this._zoomTo(a,this.originX,this.originY,this.startScale),this.trigger("zoomEnd")}}}var ls=30,rs=10,mt=200,as=2e3;function Vr(e){e.prototype._initInfinite=function(){this.options.probeType=3,this.maxScrollY=-as,this.infiniteScroller=new T(this,this.options.infinity)}}function Wt(e){if(e&&e.classList)return e.classList.contains("tombstone")}function T(e,t){var i=this;this.options=t,ut(typeof this.options.createTombstone=="function","Infinite scroll need createTombstone Function to create tombstone"),ut(typeof this.options.fetch=="function","Infinite scroll need fetch Function to fetch new data."),ut(typeof this.options.render=="function","Infinite scroll need render Function to render each item."),this.firstAttachedItem=0,this.lastAttachedItem=0,this.anchorScrollTop=0,this.anchorItem={index:0,offset:0},this.tombstoneHeight=0,this.tombstoneWidth=0,this.tombstones=[],this.items=[],this.loadedItems=0,this.requestInProgress=!1,this.hasMore=!0,this.scroller=e,this.wrapperEl=this.scroller.wrapper,this.scrollerEl=this.scroller.scroller,this.scroller.on("scroll",function(){i.onScroll()}),this.scroller.on("resize",function(){i.onResize()}),this.onResize()}T.prototype.onScroll=function(){var e=-this.scroller.y,t=e-this.anchorScrollTop;e===0?this.anchorItem={index:0,offset:0}:this.anchorItem=this._calculateAnchoredItem(this.anchorItem,t),this.anchorScrollTop=e;var i=this._calculateAnchoredItem(this.anchorItem,this.wrapperEl.offsetHeight),o=this.anchorItem.index,l=i.index;t<0?(o-=ls,l+=rs):(o-=rs,l+=ls),this.fill(o,l),this.maybeRequestContent()},T.prototype.onResize=function(){var e=this.options.createTombstone();e.style.position="absolute",this.scrollerEl.appendChild(e),e.style.display="",this.tombstoneHeight=e.offsetHeight,this.tombstoneWidth=e.offsetWidth,this.scrollerEl.removeChild(e);for(var t=0;t<this.items.length;t++)this.items[t].height=this.items[t].width=0;this.onScroll()},T.prototype.fill=function(e,t){this.firstAttachedItem=Math.max(0,e),this.hasMore||(t=Math.min(t,this.items.length)),this.lastAttachedItem=t,this.attachContent()},T.prototype.maybeRequestContent=function(){var e=this;if(!(this.requestInProgress||!this.hasMore)){var t=this.lastAttachedItem-this.loadedItems;t<=0||(this.requestInProgress=!0,this.options.fetch(t).then(function(i){if(e.requestInProgress=!1,i)e.addContent(i);else{e.hasMore=!1;var o=e._removeTombstones(),l=0;e.anchorItem.index<=e.items.length?(l=e._fixScrollPosition(),e._setupAnimations({},l),e.scroller.resetPosition(e.scroller.options.bounceTime)):(e.anchorItem.index-=o,l=e._fixScrollPosition(),e._setupAnimations({},l),e.scroller.stop(),e.scroller.resetPosition(),e.onScroll())}}))}},T.prototype.addContent=function(e){for(var t=0;t<e.length;t++)this.items.length<=this.loadedItems&&this._addItem(),this.items[this.loadedItems++].data=e[t];this.attachContent(),this.maybeRequestContent()},T.prototype.attachContent=function(){var e=this._collectUnusedNodes(),t=this._createDOMNodes(e);this._cleanupUnusedNodes(e),this._cacheNodeSize();var i=this._fixScrollPosition();this._setupAnimations(t,i)},T.prototype.resetMore=function(){this.hasMore=!0},T.prototype._removeTombstones=function(){for(var e=void 0,t=0,i=this.items.length,o=0;o<i;o++){var l=this.items[o].node,n=this.items[o].data;(!l||Wt(l))&&!n&&(e||(e=o),l&&this.scrollerEl.removeChild(l))}return t=i-e,this.items.splice(e),this.lastAttachedItem=Math.min(this.lastAttachedItem,this.items.length),t},T.prototype._collectUnusedNodes=function(){for(var e=[],t=0;t<this.items.length;t++){if(t===this.firstAttachedItem){t=this.lastAttachedItem-1;continue}var i=this.items[t].node;i&&(Wt(i)?(this.tombstones.push(i),this.tombstones[this.tombstones.length-1].style.display="none"):e.push(i)),this.items[t].node=null}return e},T.prototype._createDOMNodes=function(e){for(var t={},i=this.firstAttachedItem;i<this.lastAttachedItem;i++){for(;this.items.length<=i;)this._addItem();var o=this.items[i].node,l=this.items[i].data;if(o)if(Wt(o)&&l)o.style.zIndex=1,t[i]=[o,this.items[i].top-this.anchorScrollTop],this.items[i].node=null;else continue;var n=l?this.options.render(l,e.pop()):this._getTombStone();n.style.position="absolute",this.items[i].top=-1,this.scrollerEl.appendChild(n),this.items[i].node=n}return t},T.prototype._cleanupUnusedNodes=function(e){for(;e.length;)this.scrollerEl.removeChild(e.pop())},T.prototype._cacheNodeSize=function(){for(var e=this.firstAttachedItem;e<this.lastAttachedItem;e++)this.items[e].data&&!this.items[e].height&&(this.items[e].height=this.items[e].node.offsetHeight,this.items[e].width=this.items[e].node.offsetWidth)},T.prototype._fixScrollPosition=function(){this.anchorScrollTop=0;for(var e=0;e<this.anchorItem.index;e++)this.anchorScrollTop+=this.items[e].height||this.tombstoneHeight;this.anchorScrollTop+=this.anchorItem.offset;for(var t=this.anchorScrollTop-this.anchorItem.offset,i=this.anchorItem.index;i>this.firstAttachedItem;)t-=this.items[i-1].height||this.tombstoneHeight,i--;return t},T.prototype._setupAnimations=function(e,t){var i=this;for(var o in e){var l=e[o];this.items[o].node.style.transform="translateY("+(this.anchorScrollTop+l[1])+"px) scale("+this.tombstoneWidth/this.items[o].width+", "+this.tombstoneHeight/this.items[o].height+")",this.items[o].node.offsetTop,l[0].offsetTop,this.items[o].node.style.transition="transform "+mt+"ms"}for(var n=this.firstAttachedItem;n<this.lastAttachedItem;n++){var r=e[n];if(r){var a=r[0];a.style.transition="transform "+mt+"ms, opacity "+mt+"ms",a.style.transform="translateY("+t+"px) scale("+this.items[n].width/this.tombstoneWidth+", "+this.items[n].height/this.tombstoneHeight+")",a.style.opacity=0}t!==this.items[n].top&&(r||(this.items[n].node.style.transition=""),this.items[n].node.style.transform="translateY("+t+"px)"),this.items[n].top=t,t+=this.items[n].height||this.tombstoneHeight}this.scroller.maxScrollY=-(t-this.wrapperEl.offsetHeight+(this.hasMore?as:0)),setTimeout(function(){for(var c in e){var h=e[c];h[0].style.display="none",i.tombstones.push(h[0])}},mt)},T.prototype._getTombStone=function(){var e=this.tombstones.pop();return e?(e.style.display="",e.style.opacity=1,e.style.transform="",e.style.transition="",e):this.options.createTombstone()},T.prototype._addItem=function(){this.items.push({data:null,node:null,height:0,width:0,top:0})},T.prototype._calculateAnchoredItem=function(e,t){if(t===0)return e;var i=e.index,o=0;if(t+=e.offset,t<0){for(;t<0&&i>0&&this.items[i-1].height;)t+=this.items[i-1].height,i--;o=Math.max(-i,Math.ceil(Math.min(t,0)/this.tombstoneHeight))}else{for(;t>0&&i<this.items.length&&this.items[i].height&&this.items[i].height<t;)t-=this.items[i].height,i++;(i>=this.items.length||!this.items[i].height)&&(o=Math.floor(Math.max(t,0)/this.tombstoneHeight))}return i+=o,t-=o*this.tombstoneHeight,{index:i,offset:t}};function N(e,t){this.wrapper=typeof e=="string"?document.querySelector(e):e,this.wrapper||dt("Can not resolve the wrapper DOM."),this.scroller=this.wrapper.children[0],this.scroller||dt("The wrapper need at least one child element to be scroller."),this.scrollerStyle=this.scroller.style,this._init(e,t)}Er(N),xr(N),cr(N),kr(N),wr(N),Sr(N),Cr(N),Nr(N),$r(N),vr(N),Vr(N),N.Version="1.12.6";const I={props:{zIndex:{type:Number,default:100},maskClosable:{type:Boolean,default:!1}}},im="",Mr="cube-popup",cs="mask-click",Pr={name:Mr,mixins:[V,I],emits:[cs],props:{type:{type:String,default:""},mask:{type:Boolean,default:!0},content:{type:String,default:""},center:{type:Boolean,default:!0},position:{type:String,default:""}},computed:{rootClass(){const e={"cube-popup_mask":this.mask};return this.type&&(e[`cube-${this.type}`]=!0),e},containerClass(){const e=this.center,t=this.position;if(t)return{[`cube-popup-${t}`]:!0};if(e)return{"cube-popup-center":!0}}},methods:{maskClick(e){this.$emit(cs,e),this.maskClosable&&this.hide()}}},Dr={key:0,class:"cube-popup-content"},Ir=["innerHTML"];function Br(e,t,i,o,l,n){return s.withDirectives((s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-popup",n.rootClass]),style:s.normalizeStyle({"z-index":e.zIndex})},[s.createElementVNode("div",{class:"cube-popup-mask",onTouchmove:t[0]||(t[0]=s.withModifiers(()=>{},["prevent"])),onClick:t[1]||(t[1]=(...r)=>n.maskClick&&n.maskClick(...r))},[s.renderSlot(e.$slots,"mask")],32),s.createElementVNode("div",{class:s.normalizeClass(["cube-popup-container",n.containerClass]),onTouchmove:t[2]||(t[2]=s.withModifiers(()=>{},["prevent"]))},[e.$slots.default?(s.openBlock(),s.createElementBlock("div",Dr,[s.renderSlot(e.$slots,"default")])):(s.openBlock(),s.createElementBlock("div",{key:1,class:"cube-popup-content",innerHTML:i.content},null,8,Ir))],34)],6)),[[s.vShow,e.isVisible]])}const A=p(Pr,[["render",Br]]),jt={value:"value",text:"text",order:"order"},hs={props:{data:{type:Array,default(){return[]}},selectedIndex:{type:Array,default(){return[]}},alias:{type:Object,default(){return{}}}},computed:{valueKey(){return this.alias.value||jt.value},textKey(){return this.alias.text||jt.text},orderKey(){return jt.order},merge(){return[this.data,this.selectedIndex]}},watch:{merge(e){this.setData(e[0],e[1])}}},Ye={props:{title:{type:String},subtitle:{type:String},cancelTxt:{type:String,default:""},confirmTxt:{type:String,default:""},swipeTime:{type:Number,default:2500},maskClosable:{type:Boolean,default:!0}},computed:{_cancelTxt(){return this.cancelTxt||this.$t("cancel")},_confirmTxt(){return this.confirmTxt||this.$t("ok")}}};function Or(){let e=!0;if(sl){const t=_o(De);if(!t)return e;t.major>=13&&t.minor>=3&&(e=!1)}return e}const ze=Or(),sm="",Hr="cube-picker",ds="select",us="value-change",ms="cancel",ps="change",Ar={name:Hr,mixins:[V,I,hs,Ye,O],emits:[ds,us,ms,ps],props:{pending:{type:Boolean,default:!1}},data(){return{finalData:this.data.slice(),_values:[],_indexes:[]}},created(){this._values=[],this._indexes=this.selectedIndex},methods:{confirm(){if(!this._canConfirm())return;this.hide();let e=!1,t=[];const i=this.finalData.length,o=this._values.length;o!==i&&(e=!0,o>i&&(this._values.length=this._indexes.length=i));for(let l=0;l<i;l++){let n=this._getSelectIndex(this.wheels[l]);this._indexes[l]=n;let r=null,a="";this.finalData[l].length&&(r=this.finalData[l][n][this.valueKey],a=this.finalData[l][n][this.textKey]),this._values[l]!==r&&(e=!0),this._values[l]=r,t[l]=a}this.$emit(ds,this._values,this._indexes,t),e&&this.$emit(us,this._values,this._indexes,t)},maskClick(){this.maskClosable&&this.cancel()},cancel(){this.hide(),this.$emit(ms)},show(){if(!this.isVisible)if(this.isVisible=!0,!this.wheels||this.dirty)this.$nextTick(()=>{this.wheels=this.wheels||[];let e=this.$refs.wheelWrapper;for(let t=0;t<this.finalData.length;t++)this._createWheel(e,t).enable(),this.wheels[t].wheelTo(this._indexes[t]);this.dirty&&this._destroyExtraWheels(),this.dirty=!1});else for(let e=0;e<this.finalData.length;e++)this.wheels[e].enable(),this.wheels[e].wheelTo(this._indexes[e])},hide(){if(this.isVisible){this.isVisible=!1;for(let e=0;e<this.finalData.length;e++)this.wheels[e].disable()}},setData(e,t){this._indexes=t?[...t]:[],this.finalData=e.slice(),this.isVisible?this.$nextTick(()=>{const i=this.$refs.wheelWrapper;this.finalData.forEach((o,l)=>{this._createWheel(i,l),this.wheels[l].wheelTo(this._indexes[l])}),this._destroyExtraWheels()}):this.dirty=!0},refill(e){let t=[];return e.length&&e.forEach((i,o)=>{t[o]=this.refillColumn(o,i)}),t},refillColumn(e,t){const i=this.$refs.wheelWrapper;let o=i.children[e].querySelector(".cube-picker-wheel-scroll"),l=this.wheels?this.wheels[e]:!1,n=0;if(o&&l){let r=this.finalData[e];this.finalData[e]=t;let a=l.getSelectedIndex();if(r.length){let c=r[a][this.valueKey];for(let h=0;h<t.length;h++)if(t[h][this.valueKey]===c){n=h;break}}this._indexes[e]=n,this.$nextTick(()=>{l=this._createWheel(i,e),l.wheelTo(n)})}return n},scrollTo(e,t){const i=this.wheels[e];this._indexes[e]=t,i.wheelTo(t)},refresh(){this.$nextTick(()=>{this.wheels.forEach(e=>{e.refresh()})})},_createWheel(e,t){if(this.wheels[t])this.wheels[t].refresh();else{const i=this.wheels[t]=new N(e.children[t],{wheel:{selectedIndex:this._indexes[t]||0,wheelWrapperClass:"cube-picker-wheel-scroll",wheelItemClass:"cube-picker-wheel-item"},swipeTime:this.swipeTime,observeDOM:!1,useTransition:ze});i.on("scrollEnd",()=>{this.$emit(ps,t,this._getSelectIndex(i))})}return this.wheels[t]},_destroyExtraWheels(){const e=this.finalData.length;this.wheels.length>e&&this.wheels.splice(e).forEach(i=>{i.destroy()})},_canConfirm(){return!this.pending&&this.wheels.every(e=>!e.isInTransition)},_getFlexOrder(e){return e[0]?e[0][this.orderKey]:0},_getSelectIndex(e){const t=e.y;let i;return ze?i=e.getSelectedIndex():t>e.minScrollY?i=0:t<e.maxScrollY?i=e.items.length-1:i=Math.round(Math.abs(t/e.itemHeight)),i}},beforeUnmount(){this.wheels&&this.wheels.forEach(e=>{e.destroy()}),this.wheels=null},components:{CubePopup:A}},Lr={class:"cube-picker-choose border-bottom-1px"},Yr={class:"cube-picker-title-group"},zr=["innerHTML"],Rr=["innerHTML"],Xr={class:"cube-picker-content"},Ur=s.createElementVNode("i",{class:"border-bottom-1px"},null,-1),Fr=s.createElementVNode("i",{class:"border-top-1px"},null,-1),Wr={class:"cube-picker-wheel-wrapper",ref:"wheelWrapper"},jr={class:"cube-picker-wheel-scroll"},Gr=["innerHTML"],Kr=s.createElementVNode("div",{class:"cube-picker-footer"},null,-1);function qr(e,t,i,o,l,n){const r=s.resolveComponent("cube-popup");return s.openBlock(),s.createBlock(s.Transition,{name:"cube-picker-fade"},{default:s.withCtx(()=>[s.withDirectives(s.createVNode(r,{type:"picker",mask:!0,center:!1,"z-index":e.zIndex,onTouchmove:t[3]||(t[3]=s.withModifiers(()=>{},["prevent"])),onMaskClick:n.maskClick},{default:s.withCtx(()=>[s.createVNode(s.Transition,{name:"cube-picker-move"},{default:s.withCtx(()=>[s.withDirectives(s.createElementVNode("div",{class:"cube-picker-panel cube-safe-area-pb",onClick:t[2]||(t[2]=s.withModifiers(()=>{},["stop"]))},[s.createElementVNode("div",Lr,[s.createElementVNode("span",{class:"cube-picker-cancel",onClick:t[0]||(t[0]=(...a)=>n.cancel&&n.cancel(...a))},s.toDisplayString(e._cancelTxt),1),s.createElementVNode("span",{class:"cube-picker-confirm",onClick:t[1]||(t[1]=(...a)=>n.confirm&&n.confirm(...a))},s.toDisplayString(e._confirmTxt),1),s.createElementVNode("div",Yr,[s.createElementVNode("h1",{class:"cube-picker-title",innerHTML:e.title},null,8,zr),e.subtitle?(s.openBlock(),s.createElementBlock("h2",{key:0,class:"cube-picker-subtitle",innerHTML:e.subtitle},null,8,Rr)):s.createCommentVNode("",!0)])]),s.createElementVNode("div",Xr,[Ur,Fr,s.createElementVNode("div",Wr,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(l.finalData,(a,c)=>(s.openBlock(),s.createElementBlock("div",{key:c,style:s.normalizeStyle({order:n._getFlexOrder(a)})},[s.createElementVNode("ul",jr,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(a,(h,d)=>(s.openBlock(),s.createElementBlock("li",{class:"cube-picker-wheel-item",key:d,innerHTML:h[e.textKey]},null,8,Gr))),128))])],4))),128))],512)]),Kr],512),[[s.vShow,e.isVisible]])]),_:1})]),_:1},8,["z-index","onMaskClick"]),[[s.vShow,e.isVisible]])]),_:1})}const _=p(Ar,[["render",qr]]),nm="",Zr="cube-select",fs="change",gs="update:modelValue",_s="picker-show",bs="picker-hide",Jr={name:Zr,mixins:[O],emits:[fs,gs,_s,bs],props:{options:{type:Array,default(){return[]}},modelValue:null,placeholder:{type:String,default:""},autoPop:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},title:{type:String,default:""},cancelTxt:{type:String,default:""},confirmTxt:{type:String,default:""}},data(){return{active:!1,picker:null}},computed:{adaptOptions(){return[this.options.map(e=>(typeof e!="object"&&(e={value:e,text:e}),e))]},valueIndex(){const e=this.modelValue,t=Ke(this.adaptOptions[0],i=>i.value===e);return this.picker&&this.picker.setData(this.adaptOptions,t!==-1?[t]:[0]),t},selectedIndex(){return this.valueIndex!==-1?[this.valueIndex]:[0]},selectedText(){return this.valueIndex!==-1?this.adaptOptions[0][this.valueIndex].text:""},_placeholder(){return this.placeholder||this.$t("selectText")},_title(){return this.title||this.$t("selectText")},_cancelTxt(){return this.cancelTxt||this.$t("cancel")},_confirmTxt(){return this.confirmTxt||this.$t("ok")}},created(){this.picker=this.$createPicker({title:this._title,data:this.adaptOptions,selectedIndex:this.selectedIndex,cancelTxt:this._cancelTxt,confirmTxt:this._confirmTxt,onSelect:this.selectHandler,onCancel:this.hided}),this.autoPop&&this.showPicker()},methods:{showPicker(){this.disabled||(this.picker.show(),this.active=!0,this.$emit(_s))},hided(){this.active=!1,this.$emit(bs)},selectHandler(e,t,i){this.hided(),e[0]!==this.modelValue&&(this.$emit(gs,e[0]),this.$emit(fs,e[0],t[0],i[0]))}}},Qr={key:0,class:"cube-select-text"},ea={key:1,class:"cube-select-placeholder"},ta=s.createElementVNode("i",{class:"cube-select-icon"},null,-1);function ia(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-select",{"cube-select_active":l.active,"cube-select_disabled":i.disabled}]),onClick:t[0]||(t[0]=(...r)=>n.showPicker&&n.showPicker(...r))},[n.selectedText?(s.openBlock(),s.createElementBlock("span",Qr,s.toDisplayString(n.selectedText),1)):(s.openBlock(),s.createElementBlock("span",ea,s.toDisplayString(n._placeholder),1)),ta],2)}const be=p(Jr,[["render",ia]]);let sa=0;const Gt=[],na=(e,t,i=null,o=null)=>{let l=t,n=i?i(s.h):null;const r=document?document.createElement("div"):null,a="cube_create_component_"+sa++,c=s.createVNode({render(){return s.createVNode(e,{...l},n)}},{id:a});o&&(c.appContext=o),Gt.push(c);let h;return r&&(s.render(c,r),h=c.component.subTree.component.proxy,h.$remove=function(d){s.render(null,r),e._instance=null,d&&d(),r&&document.body.contains(r)&&document.body.removeChild(r);const u=Gt.findIndex(g=>{const{id:f}=g.props;return a===f});~u&&Gt.splice(u,1)},h.$updateProps=function(d,u,g=!0){l={...g?l:{},...d},n=u?{...n||{},...u(s.h)}:null,c.component.proxy.$forceUpdate()},document.body.appendChild(r)),h};function ys(e){if(!!this&&!!this._&&s.isVNode(this._.vnode)){const i=this&&this._&&s.isVNode(this._.vnode)?this._.vnode.props:null;this._.vnode.props=s.mergeProps(i||{},{onVnodeBeforeUnmount(){e.$remove()}})}}function B(e,t,i,o){t.$create=e.config.globalProperties[`$create${s.camelize(t.name.replace("cube-","")).replace(/^\w/,l=>l.toUpperCase())}`]=function(l,n=null){if(o&&t._instance)return l&&t._instance.$updateProps(l,n,!1),ys.call(this,t._instance),t._instance;const r=t._instance=na(t,l,n,this?this._.appContext:null);return ys.call(this,r),r}}function ye(e,t){B(e,t)}be.install=function(e){e.component(_.name,_),e.component(be.name,be),S.install(e),ye(e,_)},be.Picker=_;const om="",oa="cube-switch",Es="update:modelValue",la={name:oa,emits:[Es],props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{checkboxValue:this.modelValue}},watch:{modelValue(e){this.checkboxValue=e},checkboxValue(e){this.$emit(Es,e)}}},ra={class:"cube-switch"},aa=["disabled"],ca=s.createElementVNode("i",{class:"cube-switch-ui"},null,-1),ha={class:"cube-switch-label"};function da(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",ra,[s.withDirectives(s.createElementVNode("input",{class:"cube-switch-input",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=r=>l.checkboxValue=r),disabled:i.disabled},null,8,aa),[[s.vModelCheckbox,l.checkboxValue]]),ca,s.createElementVNode("span",ha,[s.renderSlot(e.$slots,"default")])])}const Re=p(la,[["render",da]]);Re.install=function(e){e.component(Re.name,Re)};const lm="",ua={name:"cube-rate-item",props:{index:{type:Number,default:0}}},ma=s.createElementVNode("div",{class:"cube-rate-item-def"},null,-1);function pa(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("li",{class:s.normalizeClass(["cube-rate-item",{"cube-rate-item_active":i.index<=e.$parent.tempValue}])},[s.renderSlot(e.$slots,"default",{},()=>[ma])],2)}const pt=p(ua,[["render",pa]]),am="",fa="cube-rate",Ts="update:modelValue",Ee="mouse",ga={name:fa,emits:[Ts],props:{modelValue:{type:Number,default:0},max:{type:Number,default:5},disabled:{type:Boolean,default:!1},justify:{type:Boolean,default:!1}},data(){return{tempValue:this.modelValue}},created(){this.mousePressed=!1},computed:{rateClass(){return this.justify&&"cube-rate-justify"}},watch:{modelValue(e){e!==this.tempValue&&(this.tempValue=e)}},methods:{handleStart(e){if(!this.disabled){e.type.indexOf(Ee)>-1&&(this.mousePressed=!0,document.addEventListener("mouseup",this.handleEnd),document.addEventListener("mousemove",this.handleMove));const t=this.$refs.rateContainer.getBoundingClientRect();this.left=t.left,this.containerWidth=t.width}},handleMove(e){!this.disabled&&(e.type.indexOf(Ee)===-1||this.mousePressed)&&this.computeTempValue(e.type.indexOf(Ee)===-1?e.touches[0]:e)},handleEnd(e){!this.disabled&&(e.type.indexOf(Ee)===-1||this.mousePressed)&&(e.type.indexOf(Ee)>-1&&(this.mousePressed=!1,document.removeEventListener("mouseup",this.handleEnd),document.removeEventListener("mousemove",this.handleMove)),this.computeTempValue(e.type.indexOf(Ee)>-1?e:e.changedTouches[0]),this.$emit(Ts,this.tempValue))},computeTempValue(e){let t=Math.ceil((e.clientX-this.left)/this.containerWidth*this.max);t>0&&t<=this.max?this.tempValue=t:t<=0?this.tempValue=0:this.tempValue=this.max}},components:{CubeRateItem:pt}};function _a(e,t,i,o,l,n){const r=s.resolveComponent("cube-rate-item");return s.openBlock(),s.createElementBlock("ul",{ref:"rateContainer",class:s.normalizeClass(["cube-rate",n.rateClass]),onTouchstart:t[0]||(t[0]=s.withModifiers((...a)=>n.handleStart&&n.handleStart(...a),["stop"])),onTouchmove:t[1]||(t[1]=s.withModifiers((...a)=>n.handleMove&&n.handleMove(...a),["stop","prevent"])),onTouchend:t[2]||(t[2]=s.withModifiers((...a)=>n.handleEnd&&n.handleEnd(...a),["stop"])),onMousedown:t[3]||(t[3]=s.withModifiers((...a)=>n.handleStart&&n.handleStart(...a),["stop"])),onMousemove:t[4]||(t[4]=s.withModifiers((...a)=>n.handleMove&&n.handleMove(...a),["stop"])),onMouseup:t[5]||(t[5]=s.withModifiers((...a)=>n.handleEnd&&n.handleEnd(...a),["stop"]))},[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.max,a=>(s.openBlock(),s.createBlock(r,{key:a,index:a},null,8,["index"]))),128))])],34)}const Te=p(ga,[["render",_a]]);Te.install=function(e){e.component(Te.name,Te),e.component(pt.name,pt)},Te.Item=pt;const ba=/^(1|2)\d{3}[.\-/]\d{1,2}[.\-/]\d{1,2}$/,Kt={string:e=>typeof e=="string",number:e=>!isNaN(Number(e)),array:e=>Array.isArray(e),date:e=>!isNaN(Number(e))||ba.test(e),email:e=>typeof e=="string"&&/^[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)+$/i.test(e),tel:e=>typeof e=="string"&&/^(11|13|14|15|17|18|19)[0-9]{9}$/.test(e),url:e=>typeof e=="string"&&/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/.test(e)},xs=Ti(Kt),ft={required:(e,t,i)=>(i=i||(Array.isArray(e)?"array":typeof e),i==="array"&&Array.isArray(e)?e.length>0:e!==""&&e!==void 0&&e!==null),type:(e,t)=>!Kt[t]||Kt[t](e),min:(e,t,i)=>(i=i||typeof e,i==="number"||i==="date"?Number(e)>=t:e.length>=t),max:(e,t,i)=>(i=i||typeof e,i==="number"||i==="date"?Number(e)<=t:e.length<=t),len:(e,t,i)=>{i=i||typeof e;let o=e;return o.length===void 0&&(o=i==="object"?Object.keys(o):String(o)),o.length===t},notWhitespace:(e,t,i)=>!/^\s+$/.test(e),pattern:(e,t,i)=>t.test(e),custom:(e,t,i)=>t(e)},ks=Ti(ft);function ws(...e){const t="validator",i=this._base.config.globalProperties,o=i.$cubeLang,l=i.$cubeMessages[o][t];typeof e[0]=="string"&&(e[0]={[e[0]]:e[1]}),qe(l,e[0])}const ya=/\{\{((?:.|\n)+?)\}\}/g,Ea=/['"]/g,qt=-1;function Ta(e,t=""){return e.replace(ya,(i,o,l)=>{const n=o.split("|").slice(1).map(c=>c.trim()),r=n.length;let a=t;return r&&n.forEach(c=>{let{fnName:h,args:d}=xa(c);d.unshift(a),ce(S.helpers[h])?a=S.helpers[h].apply(null,d):a=""}),a})}function xa(e){const t=e.indexOf("("),i=e.indexOf(")");let o="",l=[];return t===qt?(l=[],o=e):t!==qt&&i!==qt&&(l=e.slice(t+1,i).split(",").map(r=>r.trim().replace(Ea,"")),o=e.slice(0,t)),{fnName:o,args:l}}const cm="",ka="cube-validator",Ss="update:modelValue",Cs="validating",Ns="validated",$s="msg-click",wa={name:ka,mixins:[O],emits:[Ss,Cs,Ns,$s],props:{model:{required:!0},modelKey:{type:String,default:""},rules:{type:Object,default(){return{}}},messages:{type:[Object,String],default(){return{}}},modelValue:{},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!1}},data(){return{valid:this.modelValue,validated:!1,msg:"",dirty:!1,validating:!1,result:{}}},computed:{targetModel(){const e=this.modelKey,t=this.model;return e?t[e]:t},invalid(){const e=this.valid;return Ve(e)?void 0:!e},isDisabled(){const e=this.disabled,t=Object.keys(this.rules).length<=0;return e||t},dirtyOrValidated(){return(this.dirty||this.validated)&&!this.validating},containerClass(){if(!this.isDisabled)return{"cube-validator_invalid":this.invalid,"cube-validator_valid":this.valid,"cube-validator_validating":this.validating}}},watch:{modelValue(e){this.valid=e},targetModel:{handler(){this.isDisabled||(this.dirty||(this.dirty=!0),this.validate())},flush:"sync",deep:!0},rules(){this.validate()},isDisabled(e){!e&&this.trigger&&!this.validated&&this.validate()}},created(){this._validateCount=0,!this.isDisabled&&this.immediate&&this.validate()},methods:{validate(e){const t=Pt(e);if(t&&(e=t.resolve),this.isDisabled)return e&&e(this.valid),t;this._validateCount++;const i=this._validateCount,o=this.targetModel,l=this.rules,n=l.type,r=[];let a=!0;if(l.required||(a=ft.required(o,!0,n)),a)for(const c in l){const h=l[c];let d;ce(h)?d=h(o,l[c],n):d=!ft[c]||ft[c](o,l[c],n),r.push(u=>{const g=m=>{u({key:c,valid:m===!0,ret:m})},f=m=>{u({key:c,valid:!1,ret:m})};typeof d=="object"&&ce(d.then)?d.then(g).catch(f):ce(d)?d(g,f):u({key:c,valid:d===!0,ret:d})})}return this._checkTasks(r,i,e),t},_checkTasks(e,t,i){const o=this.rules;let l=!0;const n={};let r=!0;this.validating=!0;const a=this.targetModel;mo(e,c=>{this._validateCount===t&&(this.validating=!1,c.forEach(({key:h,valid:d,ret:u})=>{const g=this.messages[h]?ce(this.messages[h])?this.messages[h](u,d):this.messages[h]:this.findMessage(h,o[h],o.type,a);l&&!d&&(l=!1,this.msg=g),n[h]={valid:d,invalid:!d,message:g}}),r||this.$emit(Ns,l),this._updateModel(l,n),i&&i(this.valid))}),this.validating&&(r=!1,this.$emit(Cs),this.emitValidChange(void 0))},_updateModel(e,t){this.validated=!0,this.result=t,t.required&&t.required.invalid&&(this.msg=t.required.message),e&&(this.msg=""),this.emitValidChange(e)},reset(){this._validateCount++,this.validating=!1,this.dirty=!1,this.result={},this.msg="",this.validated=!1,this.emitValidChange(void 0)},emitValidChange(e){const t=this.valid;this.valid=e,t!==e&&this.$emit(Ss,e)},msgClickHandler(){this.$emit($s)},findMessage(e,t,i,o){const l=this.$cubeMessages,n=this.$cubeLang,r="validator",a=l[n][r][e];return a?yo(a)?a:ce(a)?a(t):(a[i]||(i=bo(o)?"array":typeof o),typeof a[i]=="function"?a[i](t):Ta(a[i],t)):""}}},Sa={class:"cube-validator-content"},Ca={class:"cube-validator-msg-def"};function Na(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-validator",n.containerClass])},[s.createElementVNode("div",Sa,[s.renderSlot(e.$slots,"default")]),s.createElementVNode("div",{class:"cube-validator-msg",onClick:t[0]||(t[0]=(...r)=>n.msgClickHandler&&n.msgClickHandler(...r))},[s.renderSlot(e.$slots,"message",{message:l.msg,dirty:l.dirty,validated:l.validated,validating:l.validating,result:l.result},()=>[s.createElementVNode("span",Ca,s.toDisplayString(n.dirtyOrValidated?l.msg:""),1)])])],2)}const x=p(wa,[["render",Na]]);x.install=function(e){e.component(x.name,x),S.install(e),x._base=e},x.addRule=ks,x.addMessage=ws,x.addType=xs,x.addHelper=S.addHelper;const vs={props:{multiple:{type:Boolean,default:!0},accept:{type:String,default:"image/*"}}},hm="",$a={name:"cube-upload-btn",mixins:[vs],methods:{changeHandler(e){const t=e.currentTarget,i=t.files;i&&(this.$parent.addFiles(i),t.value=null)}}},va={class:"cube-upload-btn"},Va=s.createElementVNode("div",{class:"cube-upload-btn-def"},[s.createElementVNode("i")],-1),Ma=["multiple","accept"];function Pa(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",va,[s.renderSlot(e.$slots,"default",{},()=>[Va]),s.createElementVNode("input",{class:"cube-upload-input",type:"file",onChange:t[0]||(t[0]=(...r)=>n.changeHandler&&n.changeHandler(...r)),multiple:e.multiple,accept:e.accept},null,40,Ma)])}const gt=p($a,[["render",Pa]]),Zt=et?window.URL||window.webkitURL||window.mozURL:null,Jt="ready",Qt="uploading",G="error",_t="success";function Da(e,t,i,o){const l=[],n=e.length;let r=0;for(let a=0;a<n;a++)Ia(e[a],a,t,function(c,h){if(r++,l[h]=c,i(c,h),r===n)return o(l)})}function Ia(e,t,i,o){i(e,function(l){const n=Ba(l.name,l.size,Jt,0,l);o(n,t)})}function Ba(e="",t=0,i="",o=0,l=null){const n=l&&l.base64||"",r=n?"":Oa(l);return{name:e,size:t,url:r,base64:n,status:i,progress:o,file:l}}function Oa(e){return e&&Zt?Zt.createObjectURL(e):""}function ei(e,...t){return typeof e=="function"?e.apply(this,t):e}const um="",Ha="cube-upload-file",Aa={success:"cubeic-right",error:"cubeic-warn"},Vs="click",La={name:Ha,props:{file:{type:Object,required:!0}},emits:[Vs],computed:{fileCls(){return`cube-upload-file_${this.file.status}`},fileStatusCls(){const e=this.file,t=e.status;if(e.progress>=.01||t===_t||t===G)return"cube-upload-file_stat"},fileStyle(){const e=this.file.url||this.file.base64;if(e)return{"background-image":`url("${e}")`}},statusCls(){const e=this.file.status;return Aa[e]},fileProgress(){return this.statusCls?"100%":`${Math.min(Math.floor(this.file.progress*100),99)}%`}},methods:{clickHandler(){this.$emit(Vs,this.file)},removeFile(){this.$parent.removeFile(this.file)}}},Ya={class:"cube-upload-file-progress"};function za(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-upload-file",n.fileCls]),onClick:t[1]||(t[1]=(...r)=>n.clickHandler&&n.clickHandler(...r))},[s.renderSlot(e.$slots,"default",{imgStyle:n.fileStyle,progress:n.fileProgress},()=>[s.createElementVNode("div",{class:"cube-upload-file-def",style:s.normalizeStyle(n.fileStyle)},[s.createElementVNode("i",{class:"cubeic-wrong",onClick:t[0]||(t[0]=s.withModifiers((...r)=>n.removeFile&&n.removeFile(...r),["stop"]))}),s.createElementVNode("div",{class:s.normalizeClass(["cube-upload-file-state",n.fileStatusCls])},[s.createElementVNode("i",{class:s.normalizeClass(["cube-upload-file-status",n.statusCls])},null,2),s.createElementVNode("span",Ya,s.toDisplayString(n.fileProgress),1)],2)],4)])],2)}const bt=p(La,[["render",za]]);function Ra(e,t,i){const{target:o,headers:l={},data:n={},fileName:r="file",withCredentials:a,timeout:c,prop:h="file",progressInterval:d=100,checkSuccess:u=function(){return!0}}=t,g=ei(o,e);e.progress=0,e.status=Qt;const f=new window.XMLHttpRequest;e._xhr=f;let m=0;if(f.upload){let y=Date.now();f.upload.onprogress=function(J){if(J.total>0)if(m){clearTimeout(m);const no=Date.now()-y;no>=d?yi():m=setTimeout(yi,no)}else yi(),m=1;function yi(){e.progress=J.loaded/J.total,y=Date.now()}}}const b=new window.FormData,w=ei(n,e);Object.keys(w).forEach(y=>{b.append(y,w[y])}),b.append(r,e[h]),f.onload=function(){if(f.status<200||f.status>=300){C(G);return}ae();const y=e.response;if(u.length<=2){const J=u(y,e);C(J?_t:G)}else u(y,e,J=>{C(J?_t:G)})},f.onerror=function(){ae(),C(G)},f.ontimeout=function(){ae(),C(G)},f.open("POST",g,!0),a&&(f.withCredentials=!0);const P=ei(l,e);Object.keys(P).forEach(y=>{f.setRequestHeader(y,P[y])}),c>0&&(f.timeout=c),f.send(b);function C(y){clearTimeout(m),m=0,e.progress=1,e.status=y,i&&i(e)}function ae(){let y=f.responseText||f.response;try{y=JSON.parse(y)}catch{}e.response=y,e.responseHeaders=f.getAllResponseHeaders()}}const mm="",Xa="cube-upload",Ms="update:modelValue",Ps="files-added",Ds="file-submitted",Is="file-removed",Bs="file-success",Os="file-error",Hs="file-click",Ua={name:Xa,mixins:[vs],emits:[Ms,Ps,Ds,Is,Bs,Os,Hs],props:{modelValue:{type:Array,default(){return[]}},action:{type:[String,Object],default:""},max:{type:Number,default:10},auto:{type:Boolean,default:!0},simultaneousUploads:{type:Number,default:1},processFile:{type:Function,default:function(e,t){t(e)}}},data(){return{files:this.modelValue,paused:!this.auto}},computed:{actionOptions(){const e=this.action;return typeof e=="string"?e?{target:e}:null:e},isShowBtn(){return this.files.length<this.max}},watch:{modelValue(e){this.files=e},files(e){this.$emit(Ms,e)}},methods:{addFiles(e){this.$emit(Ps,e);const t=this.files.length,i=[],o=this.max-t;let l=0,n=e[l];for(;i.length<o&&n;)n.ignore||i.push(n),n=e[++l];Da(i,this.processFile,(r,a)=>{this.files.push(r),this.$emit(Ds,r)},()=>{this.$nextTick(()=>{this.upload()})})},removeFile(e){this.$emit(Is,e),e._xhr&&e._xhr.abort(),e.url&&Zt.revokeObjectURL(e.url);const t=this.files.indexOf(e);this.files.splice(t,1),this.upload()},fileClick(e,t){this.$emit(Hs,e,t)},upload(e){const t=this.actionOptions;if(this.paused||!t)return;const i=this.files.length;let o=0,l=0;for(;l<i&&o<this.simultaneousUploads;){const n=this.files[l],r=n.status;r===Jt||e&&r===G&&n._retryId!==this.retryId?(Ra(n,t,a=>{r===G&&(a._retryId=this.retryId),this.$emit(a.status===_t?Bs:Os,a),this.upload(e)}),o++):r===Qt&&o++,l++}},start(){this.paused=!1,this.upload()},pause(){this.paused=!0,this.files.forEach(e=>{e.status===Qt&&(e._xhr.abort(),e.status=Jt)})},retry(){this.retryId=Date.now(),this.paused=!1,this.upload(!0)}},components:{UploadBtn:gt,UploadFile:bt}},Fa={class:"cube-upload"},Wa={class:"cube-upload-def clear-fix"};function ja(e,t,i,o,l,n){const r=s.resolveComponent("upload-file"),a=s.resolveComponent("upload-btn");return s.openBlock(),s.createElementBlock("div",Fa,[s.renderSlot(e.$slots,"default",{},()=>[s.createElementVNode("div",Wa,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(l.files,(c,h)=>(s.openBlock(),s.createBlock(r,{file:c,key:h,onClick:d=>n.fileClick(c,h)},null,8,["file","onClick"]))),128)),s.withDirectives(s.createVNode(a,{multiple:e.multiple,accept:e.accept},null,8,["multiple","accept"]),[[s.vShow,n.isShowBtn]])])])])}const ie=p(Ua,[["render",ja]]);ie.install=function(e){e.component(ie.name,ie),e.component(gt.name,gt),e.component(bt.name,bt)},ie.Btn=gt,ie.File=bt;const Ga=(e,t,i)=>{const o=e.rules&&e.rules[t];t!=="custom"&&o&&typeof o!="function"&&(e.rules[t]=i)},As=(e=>(t,i)=>Ga(t,e,i))("required"),Ls=e=>As(e,t=>t!==!1),Ka=e=>As(e,t=>t>0),Ys=(e,t)=>{e.type="button",e.props||(e.props={}),e.props.type=t},qa={submit(e){Ys(e,"submit")},reset(e){Ys(e,"reset")},checkbox(e){Ls(e)},switch(e){Ls(e)},rate(e){Ka(e)}};function Za(e){const t=qa[e.type];t&&t(e)}function Ja(e){const t={...e};return Za(t),t}const xe={STANDARD:"standard",CLASSIC:"classic",FRESH:"fresh"},Qa={checkbox(){return!1},select(){return null}};function ec(e){const t=Qa[e];return t&&t()}const zs={data(){return{validating:!1,pending:!1,originValid:void 0}},computed:{valid(){const e=this.originValid,t=this.pending,i=this.validating;return t||i?void 0:e},invalid(){const e=this.valid;return e===void 0?e:!e}}},tc=[Y,M,pe,ee,z,Ie,te,Te,be,Re,Be,ie],Rs={};tc.forEach(e=>{Rs[e.name]=e});const ti=Rs,gm="";ti.CubeValidator=x;const ic="cube-form-item",Xs="focusin",Us="focusout",sc={name:ic,mixins:[zs],props:{field:{type:Object,default(){return{}}}},data(){const e="value",t=this.field.modelKey,i=t?this.form.model[t]:null;return{validatorDisabled:!1,validatorModelKey:e,modelValue:i,validatorModel:{[e]:i}}},computed:{fieldValue(){return Ja(this.field)},hasRules(){return Object.keys(this.fieldValue.rules||{}).length>0},isBtnField(){return this.fieldValue.type==="button"},itemClass(){const e=this.fieldValue.rules;return{"cube-form-item_required":e&&e.required,"cube-form-item_btn":this.isBtnField,"cube-form-item_validating":this.validating,"cube-form-item_pending":this.pending,"cube-form-item_valid":this.valid,"cube-form-item_invalid":this.invalid}},modelVal(){return this.form.model[this.fieldValue.modelKey]},componentName(){const e=this.fieldValue,t=e.component;if(t)return t;const i=e.type,o=`cube-${i}`;return ti[o]?o:i}},watch:{modelVal(e){this.modelValue!==e&&(this.modelValue=e)},modelValue:{handler(e){this.form.model[this.fieldValue.modelKey]=e,this.updateValidatorModel()},flush:"sync"},originValid(e){this.lastOriginValid=e}},beforeCreate(){this.form=this.$parent.form},created(){this.form.addField(this),this.getValidatorModel=e=>(this.pending=!1,e)},mounted(){this.initDebounce(),this.initFocusEvents()},methods:{initDebounce(){let e=this.fieldValue.debounce;e===!0&&(e=200),!(!e&&e!==0||e<0||this.fieldValue.trigger==="blur")&&(this.getValidatorModel=po(t=>(this.syncValidatorValue(),this.validate(),t),e,!1,this.validatorModel[this.validatorModelKey]))},focusInHandler(){this.focused=!0},focusOutHandler(){this.focused=!1,this.updateValidatorModel(),this.validate()},initFocusEvents(){if(this.fieldValue.trigger==="blur"){const e=this.$refs.formItem;e.addEventListener(Xs,this.focusInHandler,!1),e.addEventListener(Us,this.focusOutHandler,!1),this.getValidatorModel=t=>this.focused?this.validatorModel[this.validatorModelKey]:(this.pending=!1,this.form.updatePending(),t)}},removeFocusEvents(){const e=this.$refs.formItem;e.removeEventListener(Xs,this.focusInHandler,!1),e.removeEventListener(Us,this.focusOutHandler,!1)},updateValidatorModel(){this.pending=!0,this.validatorModel[this.validatorModelKey]=this.getValidatorModel(this.modelValue),this.pending&&(this.form.setPending(this.pending),this.originValid=void 0)},syncValidatorValue(){this.pending=!1,this.validatorModel[this.validatorModelKey]=this.modelValue,this.form.updatePending()},validatorChangeHandler(){this.validatorDisabled||this.originValid&&this.lastOriginValid||this.updateValidity()},validatingHandler(){this.validating=!0,this.form.setValidating(!0)},validatedHandler(){this.validating=!1,this.form.updateValidating()},updateValidity(){const e=this.$refs.validator;e&&this.form.updateValidity(this.fieldValue.modelKey,e.valid,e.result,e.dirty)},validate(e){const t=Pt(e);t&&(e=t.resolve);const i=this.$refs.validator;return i?i.validate(()=>{this.validatorDisabled=!0,this.updateValidity(),e&&e(),this.$nextTick(()=>{this.validatorDisabled=!1})}):e&&e(),t},reset(){const e=this.fieldValue;if(e.modelKey){const t=ec(e.type);this.validatorDisabled=!0,xi(this,"modelValue",t),this.syncValidatorValue(),this.$refs.validator&&this.$refs.validator.reset(),this.$nextTick(()=>{this.validatorDisabled=!1})}this.validating=!1,this.pending=!1},msgClick(){console.log("error-msg"),this.form.layout===xe.STANDARD&&this.$createToast&&this.$createToast({type:"warn",txt:this.$refs.validator.msg,time:1e3}).show()}},beforeUnmount(){this.removeFocusEvents(),this.form.destroyField(this),this.form=null},components:ti},nc={class:"cube-form-label"},oc={key:1,class:"cube-form-field"};function lc(e,t,i,o,l,n){const r=s.resolveComponent("cube-validator"),a=s.resolveComponent("cube-button");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-form-item border-bottom-1px",n.itemClass]),ref:"formItem"},[n.isBtnField?(s.openBlock(),s.createBlock(a,s.mergeProps({key:1},n.fieldValue.props,s.toHandlers(n.fieldValue.events||{})),{default:s.withCtx(()=>[s.createTextVNode(s.toDisplayString(n.fieldValue.label),1)]),_:1},16)):(s.openBlock(),s.createElementBlock(s.Fragment,{key:0},[s.renderSlot(e.$slots,"label",{},()=>[s.withDirectives(s.createElementVNode("div",nc,[s.createElementVNode("span",null,s.toDisplayString(n.fieldValue.label),1)],512),[[s.vShow,n.fieldValue.label]])]),n.hasRules?(s.openBlock(),s.createBlock(r,{key:0,class:"cube-form-field",ref:"validator",modelValue:e.originValid,"onUpdate:modelValue":[t[1]||(t[1]=c=>e.originValid=c),n.validatorChangeHandler],disabled:l.validatorDisabled,model:l.validatorModel,"model-key":l.validatorModelKey,rules:n.fieldValue.rules,messages:n.fieldValue.messages,onValidating:n.validatingHandler,onValidated:n.validatedHandler,onMsgClick:n.msgClick},{default:s.withCtx(()=>[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(n.componentName),s.mergeProps({modelValue:l.modelValue,"onUpdate:modelValue":t[0]||(t[0]=c=>l.modelValue=c)},n.fieldValue.props,s.toHandlers(n.fieldValue.events||{})),null,16,["modelValue"]))])]),_:3},8,["modelValue","disabled","model","model-key","rules","messages","onUpdate:modelValue","onValidating","onValidated","onMsgClick"])):(s.openBlock(),s.createElementBlock("div",oc,[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(n.componentName),s.mergeProps({modelValue:l.modelValue,"onUpdate:modelValue":t[2]||(t[2]=c=>l.modelValue=c)},n.fieldValue.props,s.toHandlers(n.fieldValue.events||{})),null,16,["modelValue"]))])]))],64))],2)}const yt=p(sc,[["render",lc]]),_m="",rc={name:"cube-form-group",props:{legend:{type:String,default:""},fields:{type:Array,default(){return[]}}},beforeCreate(){this.form=this.$parent.form},beforeUnmount(){this.form=null},components:{CubeFormItem:yt}},ac={class:"cube-form-group"},cc={class:"cube-form-group-legend"},hc={class:"cube-form-group-content"};function dc(e,t,i,o,l,n){const r=s.resolveComponent("cube-form-item");return s.openBlock(),s.createElementBlock("div",ac,[s.createElementVNode("p",cc,s.toDisplayString(i.legend),1),s.createElementVNode("div",hc,[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.fields,(a,c)=>(s.openBlock(),s.createBlock(r,{key:a.key||c,field:a},null,8,["field"]))),128))])])])}const Et=p(rc,[["render",dc]]),ym="",uc="cube-form",ii="submit",Fs="reset",Ws="validate",js="valid",Gs="invalid",mc={name:uc,mixins:[zs],emits:[ii,Fs,Ws,js,Gs],props:{action:String,model:{type:Object,default(){return{}}},schema:{type:Object,default(){return{}}},options:{type:Object,default(){return{scrollToInvalidField:!1,layout:xe.STANDARD}}},immediateValidate:{type:Boolean,default:!1},submitAlwaysValidate:{type:Boolean,default:!1}},data(){return{validatedCount:0,dirty:!1,firstInvalidField:null,firstInvalidFieldIndex:-1}},computed:{fieldsModel(){const e={};return this.fields.forEach(t=>{t.isBtnField||(e[t.fieldValue.modelKey]=t.modelValue)}),e},groups(){const e=this.schema,t=e.groups||[];return e.fields&&t.unshift({fields:e.fields}),t},fieldsData(){return this.groups.reduce((e,t)=>(t.fields.reduce((i,o)=>(i.push(o),i),e),e),[])},layout(){const e=this.options;return e&&e.layout||xe.STANDARD},formClass(){const e=this.invalid,t=this.valid,i=this.layout;return{"cube-form_standard":i===xe.STANDARD,"cube-form_groups":this.groups.length>1,"cube-form_validating":this.validating,"cube-form_pending":this.pending,"cube-form_valid":t,"cube-form_invalid":e,"cube-form_classic":i===xe.CLASSIC,"cube-form_fresh":i===xe.FRESH}}},watch:{validatedCount(){this.$emit(Ws,{validity:this.validity,valid:this.valid,invalid:this.invalid,dirty:this.dirty,firstInvalidFieldIndex:this.firstInvalidFieldIndex})}},beforeCreate(){this.form=this,this.fields=[],this.validity={},this.isMounted=!1},mounted(){this.isMounted=!0,this.immediateValidate&&this.validate()},methods:{submit(e=!1){this.skipValidate=e,Bi(this.$refs.form,"submit"),this.skipValidate=!1},reset(){Bi(this.$refs.form,"reset")},submitHandler(e){if(this.syncValidatorValues(),this.skipValidate){this.$emit(ii,e,this.model,this.fieldsModel);return}const t=i=>{i?(this.$emit(js,this.validity),this.$emit(ii,e,this.model,this.fieldsModel)):(this.options.scrollToInvalidField&&this.firstInvalidField&&this.firstInvalidField.$el.scrollIntoView(),e.preventDefault(),this.$emit(Gs,this.validity))};this.submitAlwaysValidate||this.valid===void 0?(this._submit(t),(this.validating||this.pending)&&e.preventDefault()):t(this.valid)},resetHandler(e){this._reset(),this.$emit(Fs,e)},_submit(e){this.validate(()=>{e&&e(this.valid)})},_reset(){this.fields.forEach(e=>{e.reset()}),this.setValidity(),this.setValidating(),this.setPending()},syncValidatorValues(){this.fields.forEach(e=>{e.syncValidatorValue()})},validate(e){const t=Pt(e);t&&(e=t.resolve);let i=0;const o=this.fields.length;return this.originValid=void 0,this.fields.forEach(l=>{l.validate(()=>{i++,i===o&&e&&e(this.valid)})}),t},updateValidating(){const e=this.fields.some(t=>t.validating);this.setValidating(e)},updatePending(){const e=this.fields.some(t=>t.pending);this.setPending(e)},setValidating(e=!1){this.validating=e},setPending(e=!1){this.pending=e},updateValidity(e,t,i,o){const l=this.validity[e];l&&l.valid===t&&l.result===i&&l.dirty===o||this.setValidity(e,{valid:t,result:i,dirty:o})},setValidity(e,t){let i={};e&&(Object.assign(i,this.validity),t===void 0?delete i[e]:i[e]=t);let o=!1,l=!1,n=!0,r="";this.fields.forEach(a=>{const c=a.fieldValue.modelKey;if(c){const h=i[c];h?(h.dirty&&(o=!0),h.valid===!1?n=!1:n&&!h.valid&&(n=h.valid),!l&&h.valid===!1&&(l=!0,r=c)):a.hasRules&&(n&&(n=void 0),i[c]={valid:void 0,result:{},dirty:!1})}}),this.validity=i,this.dirty=o,this.originValid=n,this.setFirstInvalid(r),this.isMounted&&this.validatedCount++},setFirstInvalid(e){if(!e){this.firstInvalidField=null,this.firstInvalidFieldIndex=-1;return}this.fields.some((t,i)=>{if(t.fieldValue.modelKey===e)return this.firstInvalidField=t,this.firstInvalidFieldIndex=i,!0})},addField(e){const t=this.fieldsData.indexOf(e.field);this.fields.splice(t,0,e);const i=e.fieldValue.modelKey;i&&this.setValidity(i)},destroyField(e){const t=this.fields.indexOf(e);this.fields.splice(t,1);const i=e.fieldValue.modelKey;i&&this.setValidity(i)}},beforeUnmount(){this.form=null,this.firstInvalidField=null},components:{CubeFormGroup:Et}},pc=["action"];function fc(e,t,i,o,l,n){const r=s.resolveComponent("cube-form-group");return s.openBlock(),s.createElementBlock("form",{ref:"form",class:s.normalizeClass(["cube-form",n.formClass]),action:i.action,onSubmit:t[0]||(t[0]=(...a)=>n.submitHandler&&n.submitHandler(...a)),onReset:t[1]||(t[1]=(...a)=>n.resetHandler&&n.resetHandler(...a))},[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.groups,(a,c)=>(s.openBlock(),s.createBlock(r,{fields:a.fields,legend:a.legend,key:a.key||c},null,8,["fields","legend"]))),128))])],42,pc)}const R=p(mc,[["render",fc]]);R.install=function(e){e.component(R.name,R),e.component(Et.name,Et),e.component(yt.name,yt),e.component(x.name,x),S.install(e),x._base=e},R.Group=Et,R.Item=yt,R.Validator=x,x.addRule=ks,x.addMessage=ws,x.addType=xs,x.addHelper=S.addHelper;function gc(e,t){B(e,t,["mask-click"],!0)}A.install=function(e){e.component(A.name,A),gc(e,A)};const Em="",_c="cube-toast",Ks="timeout",bc={name:_c,mixins:[V,I],emits:[Ks],props:{type:{type:String,default:"loading"},icon:{type:String,default:""},mask:{type:Boolean,default:!1},txt:{type:String,default:""},time:{type:Number,default:3e3},zIndex:{type:Number,default:900}},computed:{iconClass(){const e=[];this.icon&&e.push(this.icon);const i={correct:"cubeic-right",error:"cubeic-wrong",warn:"cubeic-warn"}[this.type];return i&&e.push(i),e},isLoading(){return this.type==="loading"}},methods:{maskClick(){this.maskClosable&&this.hide()},show(){this.isVisible=!0,this.clearTimer(),this.$nextTick(()=>{this.time!==0&&(this.timer=setTimeout(()=>{this.hide(),this.$emit(Ks)},this.time))})},hide(){this.isVisible=!1,this.clearTimer()},clearTimer(){clearTimeout(this.timer),this.timer=null}},components:{CubePopup:A,CubeLoading:H}},yc=["innerHTML"];function Ec(e,t,i,o,l,n){const r=s.resolveComponent("cube-loading"),a=s.resolveComponent("cube-popup");return s.openBlock(),s.createBlock(s.Transition,{name:"cube-toast-fade"},{default:s.withCtx(()=>[s.withDirectives(s.createVNode(a,{type:"toast","z-index":i.zIndex,mask:i.mask,onMaskClick:n.maskClick},{default:s.withCtx(()=>[!n.isLoading&&n.iconClass.length?(s.openBlock(),s.createElementBlock("i",{key:0,class:s.normalizeClass(["cube-toast-icon",n.iconClass])},null,2)):s.createCommentVNode("",!0),n.isLoading?(s.openBlock(),s.createBlock(r,{key:1})):s.createCommentVNode("",!0),s.withDirectives(s.createElementVNode("div",{class:"cube-toast-tip",innerHTML:i.txt},null,8,yc),[[s.vShow,i.txt]])]),_:1},8,["z-index","mask","onMaskClick"]),[[s.vShow,e.isVisible]])]),_:1})}const ke=p(bc,[["render",Ec]]);function Tc(e,t){B(e,t,["timeout"],!0)}ke.install=function(e){e.component(H.name,H),e.component(ke.name,ke),Tc(e,ke)},ke.Loading=H,_.install=function(e){e.component(_.name,_),S.install(e),ye(e,_)};const xc="cube-cascade-picker",qs="select",Zs="cancel",Js="change",kc={name:xc,mixins:[V,I,hs,Ye,O],emits:[qs,Zs,Js],props:{async:{type:Boolean,default:!1}},data(){return{cascadeData:this.data.slice(),pickerSelectedIndex:this.selectedIndex.slice(),pickerData:[],pending:!1}},created(){this._updatePickerData()},methods:{setData(e,t=[]){this.pending=!1,this.cascadeData=e.slice(),this.pickerSelectedIndex=t.slice(),this._updatePickerData()},_pickerSelect(e,t,i){this.$emit(qs,e,t,i)},_pickerCancel(){this.$emit(Zs)},_pickerChange(e,t){t!==this.pickerSelectedIndex[e]&&(this.pickerSelectedIndex.splice(e,1,t),this.async?this.pending=e!==this.pickerData.length-1:this._updatePickerData(e+1)),this.$emit(Js,e,t)},_updatePickerData(e=0){let t=this.cascadeData,i=0;for(;t;){if(i>=e){let o=[];t.forEach(l=>{o.push({value:l[this.valueKey],text:l[this.textKey],order:l[this.orderKey]})}),this.pickerData[i]=o,this.pickerSelectedIndex[i]=e===0?this.pickerSelectedIndex[i]<t.length&&this.pickerSelectedIndex[i]||0:this.$refs.picker.refillColumn(i,o)}t=t.length?t[this.pickerSelectedIndex[i]].children:null,i++}i<this.pickerData.length&&this.pickerData.splice(i,this.pickerData.length-i),this.pickerData=this.pickerData.slice()}},components:{CubePicker:_}};function wc(e,t,i,o,l,n){const r=s.resolveComponent("cube-picker");return s.openBlock(),s.createBlock(r,{ref:"picker",visible:e.isVisible,"onUpdate:visible":t[0]||(t[0]=a=>e.isVisible=a),data:l.pickerData,"selected-index":l.pickerSelectedIndex,pending:l.pending,title:e.title,subtitle:e.subtitle,"z-index":e.zIndex,"cancel-txt":e._cancelTxt,"confirm-txt":e._confirmTxt,"swipe-time":e.swipeTime,"mask-closable":e.maskClosable,onSelect:n._pickerSelect,onCancel:n._pickerCancel,onChange:n._pickerChange},null,8,["visible","data","selected-index","pending","title","subtitle","z-index","cancel-txt","confirm-txt","swipe-time","mask-closable","onSelect","onCancel","onChange"])}const k=p(kc,[["render",wc]]);function si(e,t){B(e,t)}k.install=function(e){e.component(_.name,_),e.component(k.name,k),S.install(e),ye(e,_),si(e,k)},k.Picker=_;const Sc="cube-date-picker",Qs="select",en="cancel",tn="change",L=["year","month","date","hour","minute","second"],K={month:{natureMin:1,natureMax:12},date:{natureMin:1,natureMax:31},hour:{natureMin:0,natureMax:23},minute:{natureMin:0,natureMax:59},second:{natureMin:0,natureMax:59}},Cc={year:"YYYY",month:"M",date:"D",hour:"hh",minute:"mm",second:"ss"},Nc={name:Sc,mixins:[V,I,Ye,O],emits:[Qs,en,tn],props:{min:{type:[Date,Array],default(){return new Date(2010,0,1)}},max:{type:[Date,Array],default(){return[new Date().getFullYear()+1,12,31,23,59,59]}},startColumn:{type:String,default(){return"year"}},columnCount:{type:Number,default:3},format:{type:Object,default(){return{}}},value:{type:[Date,Array],default(e){return e.min}},columnOrder:{type:Array,default(){return["year","month","date","hour","minute","second"]}}},computed:{formatConfig(){const e=Object.assign({},Cc);return qe(e,this.format),e},natureRangeCache(){const e={hour:[],minute:[],second:[]};return Object.keys(e).forEach(t=>{e[t]=this._range(t,K[t].natureMin,K[t].natureMax)}),e},startIndex(){const e=L.indexOf(this.startColumn);return e<0?0:e},minArray(){return this.min instanceof Date?Tt(this.min).slice(this.startIndex,this.startIndex+this.columnCount):this.min},maxArray(){return this.max instanceof Date?Tt(this.max).slice(this.startIndex,this.startIndex+this.columnCount):this.max},valueArray(){return this.value instanceof Date?Tt(this.value).slice(this.startIndex,this.startIndex+this.columnCount):this.value},data(){const e=[];return this._generateData(this.startIndex,0,e),e},selectedIndex(){const e=[];let t=this.data,i;for(let o=0;o<this.columnCount&&o<6-this.startIndex;o++)i=Ke(t,l=>this.valueArray[o]&&l.value===this.valueArray[o]),e[o]=i!==-1?i:0,t=t[e[o]]&&t[e[o]].children;return e}},methods:{_select(e,t,i){this.$emit(Qs,this._arrayToDate(e),e,i)},_cancel(){this.$emit(en)},_change(e,t){this.$emit(tn,e,t)},_generateData(e,t,i){if(t===0){const o=e===0?this.minArray[0]:Math.max(this.minArray[0],K[L[e]].natureMin),l=e===0?this.maxArray[0]:Math.min(this.maxArray[0],K[L[e]].natureMax);i.push.apply(i,this._range(L[e],o,l,!0,!0))}else if(e<3||i.isMin||i.isMax){const o=e===2?xo(i.value,i.year):K[L[e]].natureMax,l=i.isMin?Math.max(this.minArray[t],K[L[e]].natureMin):K[L[e]].natureMin,n=i.isMax?Math.min(this.maxArray[t],o):o,r=e===1&&this.startIndex===0&&this.columnCount>=3&&i.value;i.children=this._range(L[e],l,n,i.isMin,i.isMax,r)}else i.children=this.natureRangeCache[L[e]];t<this.columnCount-1&&e<5&&(i.children||i).forEach(o=>{(!o.children||o.isMin||o.isMax)&&this._generateData(e+1,t+1,o)})},_arrayToDate(e){const t=[],i=Tt(new Date(0));for(let o=0;o<6;o++)o<this.startIndex?t[o]=i[o]:o>=this.startIndex+this.columnCount?t[o]=K[L[o]].natureMin:t[o]=e[o-this.startIndex];return t[1]--,new Date(...t)},_range(e,t,i,o,l,n=0){this._rangeCache||(this._rangeCache={});const r=e+n+t+i+o+l;if(this._rangeCache[r])return this._rangeCache[r];const a=[],c=this.formatConfig[e];for(let h=t;h<=i;h++){const d={text:ki(e,c,h,"i"),value:h,order:this.columnOrder.indexOf(e)};o&&h===t&&(d.isMin=!0),l&&h===i&&(d.isMax=!0),n&&(d.year=n),a.push(d)}return this._rangeCache[r]=a,a}},components:{CubeCascadePicker:k}};function Tt(e){return[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}function $c(e,t,i,o,l,n){const r=s.resolveComponent("cube-cascade-picker");return s.openBlock(),s.createBlock(r,{visible:e.isVisible,"onUpdate:visible":t[0]||(t[0]=a=>e.isVisible=a),data:n.data,"selected-index":n.selectedIndex,title:e.title,subtitle:e.subtitle,"cancel-txt":e._cancelTxt,"confirm-txt":e._confirmTxt,"swipe-time":e.swipeTime,"z-index":e.zIndex,"mask-closable":e.maskClosable,onSelect:n._select,onCancel:n._cancel,onChange:n._change},null,8,["visible","data","selected-index","title","subtitle","cancel-txt","confirm-txt","swipe-time","z-index","mask-closable","onSelect","onCancel","onChange"])}const se=p(Nc,[["render",$c]]);function vc(e,t){B(e,t)}se.install=function(e){e.component(_.name,_),e.component(k.name,k),e.component(se.name,se),S.install(e),ye(e,_),si(e,k),vc(e,se)},se.Picker=_,k.Picker=_,se.CascadePicker=k;const Vc="cube-time-picker",sn="select",nn="cancel",on="change",ln={value:"now"},rn={floor:"floor",ceil:"ceil",round:"round"},an=10,Mc={name:Vc,mixins:[V,I,Ye,O],components:{CubeCascadePicker:k},emits:[sn,nn,on],props:{title:{type:String,default:""},delay:{type:Number,default:15},day:{type:Object,default(){return{len:3}}},showNow:{type:[Boolean,Object],default:!0},minuteStep:{type:[Number,Object],default:an},format:{type:String,default:"YYYY/M/D hh:mm"},min:{type:[Date,Number],default:null},max:{type:[Date,Number],default:null}},data(){return{now:new Date,selectedIndex:[0,0,0],value:0}},computed:{_title(){return this.title||this.$t("selectTime")},_day(){const e={filter:[this.$t("today")],format:this.$t("formatDate")};return Object.assign({},e,this.day)},nowText(){const e=this.$t("now");return this.showNow&&this.showNow.text||e},minuteStepRule(){const e=this.minuteStep;return typeof e=="object"&&Math[rn[e.rule]]||Math[rn.floor]},minuteStepNumber(){const e=this.minuteStep;return typeof e=="number"?e:e.step||an},minTime(){let e=+this.min||+this.now+this.delay*he;const t=new Date(e).getMinutes(),i=Math.min(this.minuteStepRule(t/this.minuteStepNumber)*this.minuteStepNumber,60);return e+=(i-t)*he,new Date(e)},maxTime(){let e=+this.max||Ze(new Date(+this.minTime+this._day.len*Dt))-1;const t=new Date(e).getMinutes(),i=Math.floor(t/this.minuteStepNumber)*this.minuteStepNumber;return e-=(t-i)*he,new Date(e)},days(){const e=[],t=Je(this.minTime,this.now),i=this.max?Je(this.maxTime,this.minTime)+1:this._day.len;for(let o=0;o<i;o++){const l=+this.minTime+o*Dt;e.push({value:l,text:this._day.filter&&this._day.filter[t+o]||It(new Date(l),this._day.format)})}return e},hours(){const e=[];for(let t=0;t<24;t++)e.push({value:t,text:`${t}${this.$t("hours")}`,children:this.minutes});return e},minutes(){const e=[];for(let t=0;t<60;t+=this.minuteStepNumber)e.push({value:t,text:`${wi(t)}${this.$t("minutes")}`});return e},cascadeData(){const e=this.days.slice();if(this.maxTime-this.minTime<=-6e4)return[];e.forEach((i,o)=>{const l=o===0,n=o===e.length-1;if(!l&&!n){i.children=this.hours;return}const r=[],a=l?this.minTime.getHours():0,c=n?this.maxTime.getHours():23;for(let h=a;h<=c;h++){const d=l&&h===a,u=n&&h===c;if(!d&&!u){r.push({value:h,text:`${h}${this.$t("hours")}`,children:this.minutes});continue}const g=d?Math.round(this.minTime.getMinutes()/this.minuteStepNumber):0,f=u?Math.round(this.maxTime.getMinutes()/this.minuteStepNumber):Math.floor(59/this.minuteStepNumber),m=this.minutes.slice(g,f+1);r.push({value:h,text:`${h}${this.$t("hours")}`,children:m})}i.children=r});const t=Je(this.minTime,this.now);if(this.showNow&&t<=0){const i=Math.abs(t),o=e[i];o&&(o.children=[...o.children],o.children.unshift({value:ln.value,text:this.nowText,children:[]}))}return e}},methods:{show(){this.isVisible||(this.isVisible=!0,this._updateNow(),this._updateSelectedIndex())},setTime(e){this.value=e,this.isVisible&&this._updateSelectedIndex()},_updateSelectedIndex(){const e=this.value,t=this.minTime,i=this.min||this.min===0?+t:Math.floor(t/he)*he;if(e<i)this.selectedIndex=[0,0,0];else{const o=new Date(e),l=Je(o,t);if(l>=this.days.length)return;const n=o.getHours(),r=l===0?this.showNow?this.minTime.getHours()-1:this.minTime.getHours():0,a=n-r,c=this.minuteStepRule(o.getMinutes()/this.minuteStepNumber),h=!l&&(this.showNow?a===1:!a)?this.minuteStepRule(this.minTime.getMinutes()/this.minuteStepNumber):0,d=c-h;this.selectedIndex=[l,a,d]}},_updateNow(){this.now=new Date},_pickerChange(e,t){this.$emit(on,e,t)},_pickerSelect(e,t,i){let o,l;e[1]===ln.value?(o=+new Date,l=this.nowText):(o=Ze(new Date(e[0]))+e[1]*To+e[2]*he,l=i[0]+" "+i[1]+":"+i[2]),this.value=o;const n=It(new Date(o),this.format);this.$emit(sn,o,l,n)},_pickerCancel(){this.$emit(nn)}}};function Pc(e,t,i,o,l,n){const r=s.resolveComponent("cube-cascade-picker");return s.openBlock(),s.createBlock(r,{ref:"picker",visible:e.isVisible,"onUpdate:visible":t[0]||(t[0]=a=>e.isVisible=a),data:n.cascadeData,"selected-index":l.selectedIndex,title:n._title,subtitle:e.subtitle,"cancel-txt":e._cancelTxt,"confirm-txt":e._confirmTxt,"swipe-time":e.swipeTime,"z-index":e.zIndex,"mask-closable":e.maskClosable,onSelect:n._pickerSelect,onCancel:n._pickerCancel,onChange:n._pickerChange},null,8,["visible","data","selected-index","title","subtitle","cancel-txt","confirm-txt","swipe-time","z-index","mask-closable","onSelect","onCancel","onChange"])}const we=p(Mc,[["render",Pc]]);function Dc(e,t){B(e,t)}we.install=function(e){e.component(_.name,_),e.component(we.name,we),S.install(e),ye(e,_),Dc(e,we)},we.Picker=_;const Ic="cube-segment-picker",cn="next",hn="prev",dn="select",un="cancel",mn="change",Bc={name:Ic,mixins:[V,I,Ye,O],emits:[cn,hn,dn,un,mn],props:{data:{type:Array,default(){return[]}},nextTxt:{type:String,default:""},prevTxt:{type:String,default:""}},data(){return{current:0,selectedVal:[],selectedIndex:[],selectedText:[]}},computed:{currentPicker(){for(let e=0;e<this.data.length;e++){let t=this.$refs.pickers[e];if(t.$attrs.index===this.current)return t}},_nextTxt(){return this.nextTxt||this.$t("next")},_prevTxt(){return this.prevTxt||this.$t("prev")}},watch:{data(){this.current=0,this.selectedVal=[],this.selectedIndex=[],this.selectedText=[]}},methods:{show(){this.isVisible||!this.data.length||(this.isVisible=!0,this.currentPicker.show())},hide(){!this.isVisible||!this.data.length||(this.isVisible=!1,this.currentPicker.hide())},_select(...e){this.selectedVal[this.current]=e[0],this.selectedIndex[this.current]=e[1],this.selectedText[this.current]=e[2],this.current<this.data.length-1?(this.$emit(cn,this.current,...e),this.current++,this.currentPicker.show()):(this.isVisible=!1,this.$emit(dn,this.selectedVal,this.selectedIndex,this.selectedText),this.current=0)},_cancel(...e){this.current>0?(this.$emit(hn,this.current,...e),this.current--,this.currentPicker.show()):(this.isVisible=!1,this.$emit(un))},_change(...e){this.$emit(mn,this.current,...e)}}},Oc={class:"cube-segment-picker"};function Hc(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",Oc,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(r,a)=>(s.openBlock(),s.createBlock(s.resolveDynamicComponent(r.is||"cube-picker"),s.mergeProps({key:a,index:a,ref_for:!0,ref:"pickers",title:r.title||e.title,subtitle:r.subtitle||e.subtitle,"confirm-txt":r.confirmTxt||(a===i.data.length-1?e._confirmTxt:n._nextTxt),"cancel-txt":r.cancelTxt||(a===0?e._cancelTxt:n._prevTxt),"swipe-time":r.swipeTime||e.swipeTime,"z-index":r.zIndex||e.zIndex,"mask-closable":e.maskClosable},r,{onSelect:n._select,onCancel:n._cancel,onChange:n._change}),null,16,["index","title","subtitle","confirm-txt","cancel-txt","swipe-time","z-index","mask-closable","onSelect","onCancel","onChange"]))),128))])}const ne=p(Bc,[["render",Hc]]);function Ac(e,t){B(e,t)}ne.install=function(e){e.component(_.name,_),e.component(k.name,k),e.component(ne.name,ne),S.install(e),ye(e,_),si(e,k),Ac(e,ne)},ne.Picker=_,k.Picker=_,ne.CascadePicker=k;const Tm="",Lc="cube-dialog",pn="confirm",fn="cancel",gn="close",ni="javascript:;",_n={textType:"ok",active:!0,disabled:!1,href:ni},bn={textType:"cancel",active:!1,disabled:!1,href:ni},yn=function(e,t){typeof e=="string"&&(e={text:e});const i=t&&this.$t(t.textType);return Object.assign({},t,{text:i},e)},Yc={name:Lc,mixins:[V,I,O],emits:[pn,fn,gn],props:{type:{type:String,default:"alert"},prompt:{type:Object,default(){return{value:"",placeholder:""}}},icon:{type:String,default:""},title:{type:String,default:""},content:{type:String,default:""},showClose:{type:Boolean,default:!1},confirmBtn:{type:[Object,String],default(){return{..._n}}},cancelBtn:{type:[Object,String],default(){return{...bn}}}},data(){return{defHref:ni,promptValue:this.prompt.value}},computed:{_confirmBtn(){return yn.call(this,this.confirmBtn,_n)},_cancelBtn(){return yn.call(this,this.cancelBtn,bn)},isConfirm(){return this.type==="confirm"},isPrompt(){return this.type==="prompt"},containerClass(){return`cube-dialog-${this.type}`}},watch:{"prompt.value":{handler:function(e){this.promptValue=e}}},methods:{maskClick(e){this.maskClosable&&this.cancel(e)},confirm(e){this._confirmBtn.disabled||(this.hide(),this.$emit(pn,e,this.promptValue))},cancel(e){this._cancelBtn.disabled||(this.hide(),this.$emit(fn,e))},close(e){this.hide(),this.$emit(gn,e)}},components:{CubePopup:A,CubeInput:z}},zc={class:"cube-dialog-main"},Rc=[s.createElementVNode("i",{class:"cubeic-close"},null,-1)],Xc={key:0,class:"cube-dialog-icon"},Uc={key:1,class:"cube-dialog-title"},Fc={class:"cube-dialog-title-def"},Wc={class:"cube-dialog-content"},jc={class:"cube-dialog-content-def"},Gc=["innerHTML"],Kc=["href"],qc=["href"];function Zc(e,t,i,o,l,n){const r=s.resolveComponent("cube-input"),a=s.resolveComponent("cube-popup");return s.openBlock(),s.createBlock(s.Transition,{name:"cube-dialog-fade"},{default:s.withCtx(()=>[s.withDirectives(s.createVNode(a,{type:"dialog","z-index":e.zIndex,mask:!0,center:!0,onMaskClick:n.maskClick},{default:s.withCtx(()=>[s.createElementVNode("div",zc,[s.withDirectives(s.createElementVNode("span",{class:"cube-dialog-close",onClick:t[0]||(t[0]=(...c)=>n.close&&n.close(...c))},Rc,512),[[s.vShow,i.showClose]]),s.createElementVNode("div",{class:s.normalizeClass(n.containerClass)},[i.icon?(s.openBlock(),s.createElementBlock("p",Xc,[s.createElementVNode("i",{class:s.normalizeClass(i.icon)},null,2)])):s.createCommentVNode("",!0),i.title||e.$slots.title?(s.openBlock(),s.createElementBlock("h2",Uc,[s.renderSlot(e.$slots,"title",{},()=>[s.createElementVNode("p",Fc,s.toDisplayString(i.title),1)])])):s.createCommentVNode("",!0),s.createElementVNode("div",Wc,[s.renderSlot(e.$slots,"content",{},()=>[s.createElementVNode("div",jc,[i.content?(s.openBlock(),s.createElementBlock("p",{key:0,innerHTML:i.content},null,8,Gc)):s.createCommentVNode("",!0),n.isPrompt?(s.openBlock(),s.createBlock(r,s.mergeProps({key:1},i.prompt,{modelValue:l.promptValue,"onUpdate:modelValue":t[1]||(t[1]=c=>l.promptValue=c)}),null,16,["modelValue"])):s.createCommentVNode("",!0)])])]),s.createElementVNode("div",{class:s.normalizeClass(["cube-dialog-btns",{"border-right-1px":n.isConfirm||n.isPrompt}])},[s.renderSlot(e.$slots,"btns",{},()=>[n.isConfirm||n.isPrompt?(s.openBlock(),s.createElementBlock("a",{key:0,href:n._cancelBtn.href,class:s.normalizeClass(["cube-dialog-btn border-top-1px",{"cube-dialog-btn_highlight":n._cancelBtn.active,"cube-dialog-btn_disabled":n._cancelBtn.disabled}]),onClick:t[2]||(t[2]=(...c)=>n.cancel&&n.cancel(...c))},s.toDisplayString(n._cancelBtn.text),11,Kc)):s.createCommentVNode("",!0),s.createElementVNode("a",{href:n._confirmBtn.href,class:s.normalizeClass(["cube-dialog-btn border-top-1px",{"cube-dialog-btn_highlight":n._confirmBtn.active,"cube-dialog-btn_disabled":n._confirmBtn.disabled}]),onClick:t[3]||(t[3]=(...c)=>n.confirm&&n.confirm(...c))},s.toDisplayString(n._confirmBtn.text),11,qc)])],2)],2)])]),_:3},8,["z-index","onMaskClick"]),[[s.vShow,e.isVisible]])]),_:3})}const Se=p(Yc,[["render",Zc]]);function Jc(e,t){B(e,t,["confirm","cancel","close","btn-click","link-click"],!0)}Se.install=function(e){e.component(z.name,z),e.component(Se.name,Se),S.install(e),Jc(e,Se)},Se.Input=z;const km="",Qc="cube-action-sheet",En="select",Tn="cancel",eh={name:Qc,mixins:[V,I,O],emits:[En,Tn],props:{data:{type:Array,default(){return[]}},active:{type:Number,default:-1},title:{type:String,default:""},pickerStyle:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},cancelTxt:{type:String,default:""}},computed:{_cancelTxt(){return this.cancelTxt||this.$t("cancel")}},methods:{maskClick(){this.maskClosable&&this.cancel()},cancel(){this.hide(),this.$emit(Tn)},itemClick(e,t){this.hide(),this.$emit(En,e,t)}},components:{CubePopup:A}},th={class:"cube-action-sheet-content"},ih={class:"cube-action-sheet-list"},sh=["data-align","innerHTML","onClick"],nh=s.createElementVNode("div",{class:"cube-action-sheet-space"},null,-1);function oh(e,t,i,o,l,n){const r=s.resolveComponent("cube-popup");return s.openBlock(),s.createBlock(s.Transition,{name:"cube-action-sheet-fade"},{default:s.withCtx(()=>[s.withDirectives(s.createVNode(r,{type:"action-sheet",class:s.normalizeClass({"cube-action-sheet_picker":i.pickerStyle}),center:!1,mask:!0,"z-index":e.zIndex,onMaskClick:n.maskClick},{default:s.withCtx(()=>[s.createVNode(s.Transition,{name:"cube-action-sheet-move"},{default:s.withCtx(()=>[s.withDirectives(s.createElementVNode("div",{class:"cube-action-sheet-panel cube-safe-area-pb",onClick:t[1]||(t[1]=s.withModifiers(()=>{},["stop"]))},[s.withDirectives(s.createElementVNode("h1",{class:"cube-action-sheet-title border-bottom-1px"},s.toDisplayString(i.title),513),[[s.vShow,i.pickerStyle||i.title]]),s.createElementVNode("div",th,[s.createElementVNode("ul",ih,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(a,c)=>(s.openBlock(),s.createElementBlock("li",{class:s.normalizeClass(["cube-action-sheet-item border-bottom-1px",[a.class||"",c===i.active?"cube-action-sheet-item_active":""]]),"data-align":a.align,innerHTML:a.content,onClick:h=>n.itemClick(a,c)},null,10,sh))),256))])]),nh,s.createElementVNode("div",{class:"cube-action-sheet-cancel",onClick:t[0]||(t[0]=(...a)=>n.cancel&&n.cancel(...a))},[s.createElementVNode("span",null,s.toDisplayString(n._cancelTxt),1)])],512),[[s.vShow,e.isVisible]])]),_:1})]),_:1},8,["class","z-index","onMaskClick"]),[[s.vShow,e.isVisible]])]),_:1})}const Xe=p(eh,[["render",oh]]);function lh(e,t){B(e,t,["select","cancel"],!0)}Xe.install=function(e){e.component(Xe.name,Xe),S.install(e),lh(e,Xe)};const rh={props:{y:{type:Number,default:0}},data(){return{width:50,height:80,ratio:2}},computed:{distance(){return Math.max(0,Math.min(this.y*this.ratio,this.maxDistance))},style(){return`width:${this.width/this.ratio}px;height:${this.height/this.ratio}px`}},mounted(){this.ratio=window.devicePixelRatio,this.width*=this.ratio,this.height*=this.ratio,this.initRadius=18*this.ratio,this.minHeadRadius=12*this.ratio,this.minTailRadius=5*this.ratio,this.initArrowRadius=10*this.ratio,this.minArrowRadius=6*this.ratio,this.arrowWidth=3*this.ratio,this.maxDistance=40*this.ratio,this.initCenterX=25*this.ratio,this.initCenterY=25*this.ratio,this.headCenter={x:this.initCenterX,y:this.initCenterY},this._draw()},methods:{_draw(){const e=this.$refs.bubble;let t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),this._drawBubble(t),this._drawArrow(t)},_drawBubble(e){e.save(),e.beginPath();const t=this.distance/this.maxDistance,i=this.initRadius-(this.initRadius-this.minHeadRadius)*t;this.headCenter.y=this.initCenterY-(this.initRadius-this.minHeadRadius)*t,e.arc(this.headCenter.x,this.headCenter.y,i,0,Math.PI,!0);const o=this.initRadius-(this.initRadius-this.minTailRadius)*t,l={x:this.headCenter.x,y:this.headCenter.y+this.distance},n={x:l.x-o,y:l.y},r={x:n.x,y:n.y-this.distance/2};e.quadraticCurveTo(r.x,r.y,n.x,n.y),e.arc(l.x,l.y,o,Math.PI,0,!0);const a={x:this.headCenter.x+i,y:this.headCenter.y},c={x:l.x+o,y:a.y+this.distance/2};e.quadraticCurveTo(c.x,c.y,a.x,a.y),e.fillStyle="rgb(170,170,170)",e.fill(),e.strokeStyle="rgb(153,153,153)",e.stroke(),e.restore()},_drawArrow(e){e.save(),e.beginPath();const t=this.distance/this.maxDistance,i=this.initArrowRadius-(this.initArrowRadius-this.minArrowRadius)*t;e.arc(this.headCenter.x,this.headCenter.y,i-(this.arrowWidth-t),-Math.PI/2,0,!0),e.arc(this.headCenter.x,this.headCenter.y,i,0,Math.PI*3/2,!1),e.lineTo(this.headCenter.x,this.headCenter.y-i-this.arrowWidth/2+t),e.lineTo(this.headCenter.x+this.arrowWidth*2-t*2,this.headCenter.y-i+this.arrowWidth/2),e.lineTo(this.headCenter.x,this.headCenter.y-i+this.arrowWidth*3/2-t),e.fillStyle="rgb(255,255,255)",e.fill(),e.strokeStyle="rgb(170,170,170)",e.stroke(),e.restore()}},watch:{y(){this._draw()}}},ah=["width","height"];function ch(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("canvas",{ref:"bubble",width:l.width,height:l.height,style:s.normalizeStyle(n.style)},null,12,ah)}const hh=p(rh,[["render",ch]]),Ue={props:{options:{type:Object,default(){return{}}}}},oi={methods:{_checkDeprecated(){const e=this.$options.props,t=this.$options.name;Object.entries(e).forEach(([i,o])=>{const l=o.deprecated;l&&this[i]!==void 0&&co(`The property "${uo(i)}" is deprecated, please use the recommended property "${l.replacedBy}" to replace it. Details could be found in https://didi.github.io/cube-ui/#/en-US/docs/${t.substr(5)}#cube-Propsconfiguration-anchor`)})}},mounted(){this._checkDeprecated()}},wm="",dh="cube-scroll",uh="horizontal",xn="vertical",mh="Refresh success",ph=600,kn="click",wn="pulling-down",Sn="pulling-up",xt="scroll",li="before-scroll-start",Cn="scroll-end",Nn="none",fh="native",gh=[xt,li,Cn],_h={observeDOM:!0,click:!0,probeType:1,scrollbar:!1,pullDownRefresh:!1,pullUpLoad:!1},bh={name:dh,mixins:[Ue,oi],provide(){return{parentScroll:this}},inject:{parentScroll:{default:null}},emits:[kn,wn,Sn,xt,li,Cn],props:{data:{type:Array,default(){return[]}},scrollEvents:{type:Array,default(){return[]},validator(e){return e.every(t=>gh.indexOf(t)!==-1)}},listenScroll:{type:Boolean,default:void 0,deprecated:{replacedBy:"scroll-events"}},listenBeforeScroll:{type:Boolean,default:void 0,deprecated:{replacedBy:"scroll-events"}},direction:{type:String,default:xn},refreshDelay:{type:Number,default:20},nestMode:{type:String,default:Nn}},data(){return{beforePullDown:!0,isPullingDown:!1,isPullUpLoad:!1,pullUpNoMore:!1,bubbleY:0,pullDownStyle:"",pullDownStop:40,pullDownHeight:60,pullUpHeight:0}},computed:{pullDownRefresh(){let e=this.options.pullDownRefresh;return e&&(e===!0&&(e={}),Object.assign({stop:this.pullDownStop},e))},pullUpLoad(){return this.options.pullUpLoad},pullUpTxt(){const e=this.pullUpLoad,t=e&&e.txt,i=t&&t.more||"",o=t&&t.noMore||"";return this.pullUpNoMore?o:i},refreshTxt(){const e=this.pullDownRefresh;return e&&e.txt||mh},finalScrollEvents(){const e=this.scrollEvents.slice();return e.length||(this.listenScroll&&e.push(xt),this.listenBeforeScroll&&e.push(li)),e},needListenScroll(){return this.finalScrollEvents.indexOf(xt)!==-1||this.parentScroll}},watch:{data:{handler(){setTimeout(()=>{this.forceUpdate(!0)},this.refreshDelay)},deep:!0},pullDownRefresh:{handler(e,t){e&&(this.scroll.openPullDown(e),t||(this._onPullDownRefresh(),this._pullDownRefreshChangeHandler())),!e&&t&&(this.scroll.closePullDown(),this._offPullDownRefresh(),this._pullDownRefreshChangeHandler())},deep:!0},pullUpLoad:{handler(e,t){e&&(this.scroll.openPullUp(e),t||(this._onPullUpLoad(),this._pullUpLoadChangeHandler())),!e&&t&&(this.scroll.closePullUp(),this._offPullUpLoad(),this._pullUpLoadChangeHandler())},deep:!0}},activated(){this.enable()},deactivated(){this.disable()},mounted(){this.$nextTick(()=>{this.initScroll()})},beforeUnmount(){this.destroy()},methods:{initScroll(){if(!this.$refs.wrapper)return;this._calculateMinHeight();let e={scrollY:this.direction===xn,scrollX:this.direction===uh,probeType:this.needListenScroll?3:1,useTransition:ze},t=Object.assign({},_h,e,this.options);this.scroll=new N(this.$refs.wrapper,t),this.parentScroll&&this.nestMode!==Nn&&this._handleNestScroll(),this._listenScrollEvents(),this.pullDownRefresh&&(this._onPullDownRefresh(),this._pullDownRefreshChangeHandler()),this.pullUpLoad&&(this._onPullUpLoad(),this._pullUpLoadChangeHandler())},disable(){this.scroll&&this.scroll.disable()},enable(){this.scroll&&this.scroll.enable()},refresh(){this._calculateMinHeight(),this.scroll&&this.scroll.refresh()},destroy(){this.scroll&&this.scroll.destroy(),this.scroll=null},scrollTo(){this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},scrollToElement(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)},clickItem(e){this.$emit(kn,e)},async forceUpdate(e=!1,t=!1){this.isPullDownUpdating||(this.pullDownRefresh&&this.isPullingDown?(this.isPullingDown=!1,this.isPullDownUpdating=!0,await this._waitFinishPullDown(),this.isPullDownUpdating=!1,await this._waitResetPullDown(e)):this.pullUpLoad&&this.isPullUpLoad&&(this.isPullUpLoad=!1,this.scroll.finishPullUp(),this.pullUpNoMore=!e||t),e&&this.refresh())},resetPullUpTxt(){this.pullUpNoMore=!1},_listenScrollEvents(){this.finalScrollEvents.forEach(e=>{this.scroll.on(Ei(e),(...t)=>{this.$emit(e,...t)})})},_handleNestScroll(){this.$nextTick(()=>{const e=this.scroll,t=this.parentScroll.scroll;[e,t].forEach((o,l,n)=>{o.on("touchEnd",()=>{t.enable(),e.enable(),e.initiated=!1}),o.on("beforeScrollStart",()=>{this.touchStartMoment=!0;const r=n[(l+1)%2];r.stop(),r.resetPosition()})}),e.on("scroll",o=>{if(!e.initiated||e.isInTransition||this.nestMode===fh&&!this.touchStartMoment)return;this._checkReachBoundary(o)?(e.resetPosition(),e.disable(),t.pointX=e.pointX,t.pointY=e.pointY,t.enable()):t.disable(),this.touchStartMoment=!1})})},_checkReachBoundary(e){const t=this.scroll.distX,i=this.scroll.distY,o=t>0?e.x>=this.scroll.minScrollX:t<0?e.x<=this.scroll.maxScrollX:!1,l=i>0?e.y>=this.scroll.minScrollY:i<0?e.y<=this.scroll.maxScrollY:!1,n=this.scroll.freeScroll,r=this.scroll.hasHorizontalScroll,a=this.scroll.hasVerticalScroll;if(!r&&!a)return!0;if(n)return o||l;let c;return this.scroll.movingDirectionX?c=o:this.scroll.movingDirectionY&&(c=l),c},_calculateMinHeight(){const{wrapper:e,listWrapper:t}=this.$refs,i=this.pullUpLoad,o=this.pullDownRefresh;let l=0;(o||i)&&(l=U(e).height+1,i&&i.visible&&(l-=this.pullUpHeight)),t.style.minHeight=`${l}px`},_onPullDownRefresh(){this.scroll.on("pullingDown",this._pullDownHandle),this.scroll.on("scroll",this._pullDownScrollHandle)},_offPullDownRefresh(){this.scroll.off("pullingDown",this._pullDownHandle),this.scroll.off("scroll",this._pullDownScrollHandle)},_pullDownRefreshChangeHandler(){this.$nextTick(()=>{this._getPullDownEleHeight(),this._calculateMinHeight()})},_pullDownHandle(){this.resetPullDownTimer&&clearTimeout(this.resetPullDownTimer),this.beforePullDown=!1,this.isPullingDown=!0,this.$emit(wn)},_pullDownScrollHandle(e){this.beforePullDown?(this.bubbleY=Math.max(0,e.y-this.pullDownHeight),this.pullDownStyle=`top:${Math.min(e.y-this.pullDownHeight,0)}px`):(this.bubbleY=0,this.pullDownStyle=`top:${Math.min(e.y-this.pullDownStop,0)}px`)},_pullUpLoadChangeHandler(){this.$nextTick(()=>{this._getPullUpEleHeight(),this._calculateMinHeight()})},_onPullUpLoad(){this.scroll.on("pullingUp",this._pullUpHandle)},_offPullUpLoad(){this.scroll.off("pullingUp",this._pullUpHandle)},_pullUpHandle(){this.isPullUpLoad=!0,this.$emit(Sn)},_waitFinishPullDown(e){const{stopTime:t=ph}=this.pullDownRefresh;return new Promise(i=>{setTimeout(()=>{this.scroll.finishPullDown(),i()},t)})},_waitResetPullDown(e){return new Promise(t=>{this.resetPullDownTimer=setTimeout(()=>{this.pullDownStyle=`top: -${this.pullDownHeight}px`,this.beforePullDown=!0,t()},this.scroll.options.bounceTime)})},_getPullDownEleHeight(){let e=this.$refs.pulldown;e&&(e=e.children[0],this.pullDownHeight=U(e).height,this.beforePullDown=!1,this.isPullingDown=!0,this.$nextTick(()=>{this.pullDownStop=U(e).height,this.beforePullDown=!0,this.isPullingDown=!1}))},_getPullUpEleHeight(){const t=this.$refs.listWrapper.nextElementSibling;if(!t){this.pullUpHeight=0;return}this.pullUpHeight=U(t).height}},components:{Loading:H,Bubble:hh}},yh={ref:"wrapper",class:"cube-scroll-wrapper"},Eh={class:"cube-scroll-content"},Th={ref:"listWrapper",class:"cube-scroll-list-wrapper"},xh={class:"cube-scroll-list"},kh=["onClick"],wh={key:0,class:"cube-pullup-wrapper"},Sh={key:0,class:"before-trigger"},Ch={key:1,class:"after-trigger"},Nh={key:0,class:"cube-pulldown",ref:"pulldown"},$h={class:"before-trigger"},vh={class:"after-trigger"},Vh={class:"loading"},Mh={class:"cube-pulldown-loaded"};function Ph(e,t,i,o,l,n){const r=s.resolveComponent("loading"),a=s.resolveComponent("bubble");return s.openBlock(),s.createElementBlock("div",yh,[s.createElementVNode("div",Eh,[s.createElementVNode("div",Th,[s.renderSlot(e.$slots,"default",{},()=>[s.createElementVNode("ul",xh,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(c,h)=>(s.openBlock(),s.createElementBlock("li",{class:"cube-scroll-item border-bottom-1px",key:h,onClick:d=>n.clickItem(c)},s.toDisplayString(c),9,kh))),128))])])],512),s.renderSlot(e.$slots,"pullup",{pullUpLoad:n.pullUpLoad,isPullUpLoad:l.isPullUpLoad},()=>[n.pullUpLoad?(s.openBlock(),s.createElementBlock("div",wh,[l.isPullUpLoad?(s.openBlock(),s.createElementBlock("div",Ch,[s.createVNode(r)])):(s.openBlock(),s.createElementBlock("div",Sh,[s.createElementVNode("span",null,s.toDisplayString(n.pullUpTxt),1)]))])):s.createCommentVNode("",!0)])]),n.pullDownRefresh?(s.openBlock(),s.createElementBlock("div",Nh,[s.renderSlot(e.$slots,"pulldown",{pullDownRefresh:n.pullDownRefresh,pullDownStyle:l.pullDownStyle,beforePullDown:l.beforePullDown,isPullingDown:l.isPullingDown,bubbleY:l.bubbleY},()=>[s.createElementVNode("div",{class:"cube-pulldown-wrapper",style:s.normalizeStyle(l.pullDownStyle)},[s.withDirectives(s.createElementVNode("div",$h,[s.createVNode(a,{y:l.bubbleY,class:"bubble"},null,8,["y"])],512),[[s.vShow,l.beforePullDown]]),s.withDirectives(s.createElementVNode("div",vh,[s.withDirectives(s.createElementVNode("div",Vh,[s.createVNode(r)],512),[[s.vShow,l.isPullingDown]]),s.withDirectives(s.createElementVNode("div",Mh,[s.createElementVNode("span",null,s.toDisplayString(n.refreshTxt),1)],512),[[s.vShow,!l.isPullingDown]])],512),[[s.vShow,!l.beforePullDown]])],4)])],512)):s.createCommentVNode("",!0)],512)}const X=p(bh,[["render",Ph]]),Sm="",Dh={name:"cube-drawer-item",props:{item:{type:[String,Object],default:""},index:{type:Number,default:-1}},computed:{itemClass(){return this.$parent.$parent.$parent.selectedIndex===this.index?"cube-drawer-item_active":""}},methods:{clickItem(e){this.$parent.$parent.$parent.itemClickHandler(e,this.index)}}};function Ih(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("li",{class:s.normalizeClass(["cube-drawer-item border-bottom-1px",n.itemClass]),onClick:t[0]||(t[0]=r=>n.clickItem(i.item))},[s.renderSlot(e.$slots,"default",{},()=>[s.createTextVNode(s.toDisplayString(i.item.text||i.item),1)])],2)}const kt=p(Dh,[["render",Ih]]),Nm="",Bh={name:"cube-drawer-panel",mixins:[V],props:{data:{type:Array,default(){return[]}},index:{type:Number,default:-1}},computed:{selectedIndex(){const e=this.$parent.selected[this.index];return e===void 0?-1:e}},watch:{data(){this.scrollToTop()},isVisible(){this.$nextTick(()=>{this.refresh()})}},mounted(){this.$parent.addPanel(this)},beforeUnmount(){this.$parent.removePanel(this)},methods:{refresh(){this.$refs.scroll.refresh()},scrollToTop(){this.$refs.scroll.scroll&&this.$refs.scroll.scroll.scrollTo(0,0,0)},itemClickHandler(e,t){this.selectedIndex!==t&&this.$parent.changeHandler(this.index,e,t)}},components:{CubeScroll:X,CubeDrawerItem:kt}},Oh={class:"cube-drawer-panel"},Hh={class:"cube-drawer-scroll-wrapper"},Ah={class:"cube-drawer-list"};function Lh(e,t,i,o,l,n){const r=s.resolveComponent("cube-drawer-item"),a=s.resolveComponent("cube-scroll");return s.openBlock(),s.createBlock(s.Transition,{name:"cube-drawer-move"},{default:s.withCtx(()=>[s.withDirectives(s.createElementVNode("div",Oh,[s.createElementVNode("div",Hh,[s.createVNode(a,{ref:"scroll",data:i.data},{default:s.withCtx(()=>[s.createElementVNode("ul",Ah,[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(c,h)=>(s.openBlock(),s.createBlock(r,{item:c,key:h,index:h},null,8,["item","index"]))),128))])])]),_:3},8,["data"])])],512),[[s.vShow,e.isVisible]])]),_:3})}const wt=p(Bh,[["render",Lh]]),vm="",Yh="cube-drawer",$n="change",vn="select",Vn="cancel",ri=D("transform"),zh={name:Yh,mixins:[V,I],emits:[$n,vn,Vn],props:{title:{type:String,default:""},data:{type:Array,default(){return[]}},selectedIndex:{type:Array,default(){return[]}}},data(){return{index:-1,selectedVal:[],selectedText:[],selected:[...this.selectedIndex],slideStyle:{[ri]:"translate3d(0, 0, 0)"}}},watch:{selectedIndex(e){this.selected=[...e]},index(e,t){this.showPanel(),e<t&&this.hidePanel()}},created(){this.panels=[]},methods:{show(){if(this.isVisible)return;this.isVisible=!0;let e=this.data.length;for(let t=0;t<e;t++)if(this.index=t,this.selected[t]<0||this.selected[t]===void 0){if(t>0){const i=t-1,o=this.selected[i];this.changeHandler(i,this.data[i][o],o)}break}this.computedStyle()},hide(){this.slideStyle[ri]="translate3d(0, 0, 0)",this.shouldHide=!0},addPanel(e){this.panels.push(e)},removePanel(e){const t=this.panels.indexOf(e);this.panels.splice(t,1)},transitionend(){this.shouldHide&&(this.isVisible=!1,this.shouldHide=!1)},refill(e,t,i){this.data[e]=t,this.index=e,this.selected=this.selected.slice(0,e),this.selectedVal=this.selectedVal.slice(0,e),this.selectedText=this.selectedText.slice(0,e),i>=0&&(this.selected[e]=i,this.changeHandler(e,this.data[e][i],i))},showPanel(){const e=this.index;let t=0;for(;t<=e;)this.panels[t].show(),t++;this.computedStyle()},hidePanel(){const e=this.data.length;let t=this.index+1;for(;t<e;)this.panels[t].hide(),t++},computedStyle(){this.$nextTick(()=>{let e=0,t=0;const i=this.index;for(;t<=i;){const o=this.panels[t].$el;e+=o.offsetWidth;const l=window.getComputedStyle(o);e+=parseInt(l.marginLeft),e+=parseInt(l.marginRight),t++}this.slideStyle[ri]=`translate3d(-${e}px, 0, 0)`})},changeHandler(e,t,i){typeof t=="string"?(this.selectedVal[e]=t,this.selectedText[e]=t):(this.selectedVal[e]=t.value,this.selectedText[e]=t.text),this.selected[e]=i,e===this.data.length-1?(this.$emit(vn,this.selectedVal,this.selected,this.selectedText),this.hide()):this.$emit($n,e,t,this.selectedVal,this.selected,this.selectedText)},drawerClick(){this.hide(),this.$emit(Vn)}},components:{CubeDrawerPanel:wt}},Rh={class:"cube-drawer-title"};function Xh(e,t,i,o,l,n){const r=s.resolveComponent("cube-drawer-panel");return s.withDirectives((s.openBlock(),s.createElementBlock("div",{class:"cube-drawer",onClick:t[3]||(t[3]=(...a)=>n.drawerClick&&n.drawerClick(...a))},[s.createElementVNode("div",{class:"cube-drawer-main",style:s.normalizeStyle(l.slideStyle),onClick:t[1]||(t[1]=s.withModifiers(()=>{},["stop"])),onTransitionend:t[2]||(t[2]=(...a)=>n.transitionend&&n.transitionend(...a))},[s.withDirectives(s.createElementVNode("div",Rh,[s.renderSlot(e.$slots,"title",{},()=>[s.createTextVNode(s.toDisplayString(i.title),1)])],512),[[s.vShow,e.$slots.title||i.title]]),s.createElementVNode("div",{class:"cube-drawer-panels",onTransitionend:t[0]||(t[0]=s.withModifiers(()=>{},["stop"]))},[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(a,c)=>(s.openBlock(),s.createBlock(r,{key:c,index:c,data:a},null,8,["index","data"]))),128))])],32)],36)],512)),[[s.vShow,e.isVisible]])}const q=p(zh,[["render",Xh]]);q.install=function(e){e.component(q.name,q),e.component(wt.name,wt),e.component(kt.name,kt)},q.Panel=wt,q.Item=kt;const Vm="",Uh={name:"cube-slide-item",props:{item:{type:Object,default(){return{}}}}},Fh={class:"cube-slide-item"},Wh=["href"],jh=["src"];function Gh(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",Fh,[s.renderSlot(e.$slots,"default",{},()=>[s.createElementVNode("a",{href:i.item.url},[s.createElementVNode("img",{src:i.item.image},null,8,jh)],8,Wh)])])}const Fe=p(Uh,[["render",Gh]]),Pm="",Kh="cube-slide",Mn="change",Pn="click",Dn="scroll-end",In="scroll",Ce="horizontal",ai="vertical",qh={momentum:!1,click:!0,observeDOM:!1,bounce:!1},Zh={name:Kh,mixins:[Ue,oi],emits:[Mn,Pn,Dn,In],props:{data:{type:Array,default(){return[]}},initialIndex:{type:Number,default:0},loop:{type:Boolean,default:!0},threshold:{type:Number,default:.3},speed:{type:Number,default:400},autoPlay:{type:Boolean,default:!0},interval:{type:Number,default:4e3},showDots:{type:Boolean,default:!0},direction:{type:String,default:Ce},allowVertical:{type:Boolean,default:void 0,deprecated:{replacedBy:"options"}},stopPropagation:{type:Boolean,default:void 0,deprecated:{replacedBy:"options"}},refreshResetCurrent:{type:Boolean,default:!0}},data(){return{dots:0,currentPageIndex:this.initialIndex||0}},created(){this._dataWatchers=[],["data","loop","autoPlay","options.eventPassthrough","threshold","speed","allowVertical"].forEach(t=>{this._dataWatchers.push(this.$watch(t,()=>{console.log(t),t==="data"&&this._destroy(),this.$nextTick(()=>{this.refresh()})},{deep:!0}))})},watch:{initialIndex(e){e!==this.currentPageIndex&&this._goToPage(e)}},methods:{clickItem(e,t){this.$emit(Pn,e,t)},refresh(){this.slide!==null&&(this._destroy(),clearTimeout(this._timer),this.slide&&this.refreshResetCurrent&&(this.currentPageIndex=0),this._updateSlideDom(),this.showDots&&this._initDots(),this.currentPageIndex>=this.dots.length&&(this.currentPageIndex=this.dots.length-1),this._initSlide(),this.autoPlay&&this._play())},_destroy(){this.slide&&this.slide.destroy()},_refresh(){this._updateSlideDom(!0),this.slide.refresh()},_updateSlideDom(e){this._setSlideStyle(e)},_setSlideStyle(e){this.children=this.$refs.slideGroup.children;const t=this.direction===Ce?"width":"height";let i=0;const o=this.$refs.slide[`client${t[0].toUpperCase()+t.slice(1)}`],l=this.children.length;for(let n=0;n<l;n++){const r=this.children[n];r.style[t]=o+"px",i+=o}this.loop&&!e&&l>1&&(i+=2*o),this.$refs.slideGroup.style[t]=i+"px"},_initSlide(){const e=this.direction===Ce&&this.allowVertical?ai:"",t=Object.assign({},qh,{scrollX:this.direction===Ce,scrollY:this.direction===ai,eventPassthrough:e,snap:{loop:this.loop,threshold:this.threshold,speed:this.speed},stopPropagation:this.stopPropagation},this.options);this.slide=new N(this.$refs.slide,t),this.slide.on("scrollEnd",this._onScrollEnd),this._goToPage(this.currentPageIndex,0),this.options.listenScroll&&this.options.probeType===3&&this.slide.on("scroll",this._onScroll);const i=this.$refs.slide;i.removeEventListener("touchend",this._touchEndEvent,!1),this._touchEndEvent=()=>{this.autoPlay&&this._play()},i.addEventListener("touchend",this._touchEndEvent,!1),this.slide.on("beforeScrollStart",()=>{this.autoPlay&&clearTimeout(this._timer)})},_onScrollEnd(){const{pageX:e,pageY:t}=this.slide.getCurrentPage();let i=this.direction===Ce?e:t;this.currentPageIndex!==i&&(this.currentPageIndex=i,this.$emit(Mn,i)),this.$emit(Dn,i),this.autoPlay&&this._play()},_onScroll(e){this.$emit(In,e)},_initDots(){this.dots=new Array(this.children.length)},_play(){clearTimeout(this._timer),this._timer=setTimeout(()=>{this.slide.next()},this.interval)},_deactivated(){clearTimeout(this._timer),clearTimeout(this._resizeTimer),window.removeEventListener("resize",this._resizeHandler);const e=this.$refs.slide;e&&e.removeEventListener("touchend",this._touchEndEvent,!1)},_resizeHandler(){this.slide&&(clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(()=>{this.slide.isInTransition?this._onScrollEnd():this.autoPlay&&this._play(),this._refresh()},60))},_goToPage(e,t){this.direction===Ce?this.slide&&this.slide.goToPage(e,0,t):this.direction===ai&&this.slide&&this.slide.goToPage(0,e,t)}},mounted(){this.$nextTick(()=>{this.refresh()}),window.addEventListener("resize",this._resizeHandler)},activated(){this.autoPlay&&this._play(),window.addEventListener("resize",this._resizeHandler)},deactivated(){this._deactivated()},destroyed(){this._deactivated(),this._destroy(),this.slide=null,this._dataWatchers.forEach(e=>{e()}),this._dataWatchers=null},components:{CubeSlideItem:Fe}},Jh={class:"cube-slide",ref:"slide"},Qh={class:"cube-slide-group",ref:"slideGroup"},ed={key:0,class:"cube-slide-dots"};function td(e,t,i,o,l,n){const r=s.resolveComponent("cube-slide-item");return s.openBlock(),s.createElementBlock("div",Jh,[s.createElementVNode("div",Qh,[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(a,c)=>(s.openBlock(),s.createBlock(r,{key:c,onClick:h=>n.clickItem(a,c),item:a},null,8,["onClick","item"]))),128))])],512),i.showDots?(s.openBlock(),s.createElementBlock("div",ed,[s.renderSlot(e.$slots,"dots",{current:l.currentPageIndex,dots:l.dots},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(l.dots,(a,c)=>(s.openBlock(),s.createElementBlock("span",{class:s.normalizeClass({active:l.currentPageIndex===c}),key:c},null,2))),128))])])):s.createCommentVNode("",!0)],512)}const oe=p(Zh,[["render",td]]),Dm="",id="cube-image-preview",Bn="change",On="hide",sd={name:id,mixins:[V,I],emits:[Bn,On],props:{initialIndex:{type:Number,default:0},imgs:{type:Array,default(){return[]}},loop:{type:Boolean,default:!0},speed:{type:Number,default:400},preventDefault:{type:Boolean,default:!0}},data(){return{currentPageIndex:this.initialIndex,options:{observeDOM:!1,bounce:{left:!0,right:!0},useTransition:Pi?!1:ze,probeType:3,preventDefault:this.preventDefault},scrollOptions:{useTransition:ze,HWCompositing:Pi,observeDOM:!1,zoom:!0,bindToWrapper:!0,freeScroll:!0,scrollX:!0,scrollY:!0,probeType:3,bounce:!1,click:!1,dblclick:!0,bounceTime:300,preventDefault:this.preventDefault}}},watch:{initialIndex(e){this.setPageIndex(e)}},methods:{show(){this.isVisible=!0,this.$nextTick(()=>{this._listenSlide(),this._listenScroll()})},_listenSlide(){this.$nextTick(()=>{const e=this.$refs.slide.slide;e.on("scrollStart",this.slideScrollStartHandler),e.on("scrollEnd",this.slideScrollEndHandler)})},_listenScroll(){this.$nextTick(()=>{this.$refs.items.forEach(e=>{const t=e.scroll;t.on("zoomStart",this.zoomStartHandler.bind(this,t)),t.on("beforeScrollStart",this.beforeScrollHandler),t.on("scroll",this.checkBoundary.bind(this,t)),t.on("scrollEnd",this.scrollEndHandler.bind(this,t))})})},hide(){this.isVisible=!1,this.$emit(On)},prev(){const e=this.$refs.slide.slide;e&&e.prev()},next(){const e=this.$refs.slide.slide;e&&e.next()},goTo(e){const t=this.$refs.slide.slide;t&&t.goToPage(e,0)},imgLoad(e){this.isVisible&&this.$refs.items&&this.$refs.items[e].scroll.refresh()},setPageIndex(e){if(this.currentPageIndex>=0&&this.currentPageIndex!==e){const t=this.$refs.items[this.currentPageIndex];if(t){const i=t.scroll;i.scale!==1&&(i.scale=1,i.lastcale=1,i.refresh())}}this.currentPageIndex=e},slideChangeHandler(e){this.setPageIndex(e),this.slideScrollEndHandler(),this.$emit(Bn,e)},slideScrollStartHandler(){const e=this.$refs.slide.slide;this._scrolling&&!this._hasEnableSlide?e.disable():e.enable()},slideScrollEndHandler(){this.$refs.items.forEach(e=>{this.scrollEndHandler(e.scroll)})},_scroll(e){const t=this.$refs.slide.slide;t.disable(),t.refresh(),e.enable()},_slide(e){this.$refs.slide.slide.enable(),e.disable()},beforeScrollHandler(){clearTimeout(this.enableSlideTid)},scrollEndHandler(e){clearTimeout(this.enableSlideTid),this.dblZooming&&(this.dblZooming=!1,clearTimeout(this.clickTid)),this._hasEnableSlide=!1,this._scrolling=!1,e.enable(),this.enableSlideTid=setTimeout(()=>{this.$refs.slide.slide.enable()})},checkBoundary(e,t){e.distX&&Math.abs(e.distX)>Math.abs(e.distY)?(this._scrolling=!0,(e.distX>0?t.x>=e.minScrollX:t.x<=e.maxScrollX)?(this._hasEnableSlide=!0,this._slide(e)):this._hasEnableSlide||this._scroll(e)):e.distY&&(this._scrolling=!0,this._scroll(e))},zoomStartHandler(e){this._scroll(e)},dblclickHandler(e,t){const i=this.$refs.items[e].scroll;this.dblZooming=!0,this.zoomTo(i,i.scale>1?1:2,t),i.disable()},itemClickHandler(){clearTimeout(this.clickTid),this.clickTid=setTimeout(()=>{!this.dblZooming&&this.hide()},this.scrollOptions.bounceTime)},zoomTo(e,t,i){e.zoomTo(t,i.pageX,i.pageY)}},components:{CubePopup:A,CubeSlide:oe,CubeSlideItem:Fe,CubeScroll:X}},nd={class:"cube-image-preview-container"},od={class:"cube-image-preview-header"},ld=["src","onLoad"],rd=s.createElementVNode("i",null,null,-1),ad={class:"cube-image-preview-footer"},cd={class:"cube-image-preview-counter"};function hd(e,t,i,o,l,n){const r=s.resolveComponent("cube-scroll"),a=s.resolveComponent("cube-slide-item"),c=s.resolveComponent("cube-slide"),h=s.resolveComponent("cube-popup");return s.openBlock(),s.createBlock(s.Transition,{name:"cube-image-preview-fade"},{default:s.withCtx(()=>[s.withDirectives(s.createVNode(h,{type:"image-preview","z-index":e.zIndex,center:!1},{default:s.withCtx(()=>[s.createElementVNode("div",nd,[s.createElementVNode("div",od,[s.renderSlot(e.$slots,"header",{current:l.currentPageIndex})]),e.isVisible?(s.openBlock(),s.createBlock(c,{key:0,ref:"slide",data:i.imgs,"initial-index":l.currentPageIndex,"auto-play":!1,loop:i.loop,speed:i.speed,options:l.options,onChange:n.slideChangeHandler},{dots:s.withCtx(()=>[rd]),default:s.withCtx(()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.imgs,(d,u)=>(s.openBlock(),s.createBlock(a,{key:u},{default:s.withCtx(()=>[s.createElementVNode("div",{class:"cube-image-preview-item",onClick:t[0]||(t[0]=(...g)=>n.itemClickHandler&&n.itemClickHandler(...g))},[s.createVNode(r,{ref_for:!0,ref:"items",options:l.scrollOptions,onDblclick:g=>n.dblclickHandler(u,g)},{default:s.withCtx(()=>[s.createElementVNode("img",{class:"cube-image-preview-img",src:d,onLoad:g=>n.imgLoad(u)},null,40,ld)]),_:2},1032,["options","onDblclick"])])]),_:2},1024))),128))]),_:1},8,["data","initial-index","loop","speed","options","onChange"])):s.createCommentVNode("",!0),s.createElementVNode("div",ad,[s.renderSlot(e.$slots,"footer",{current:l.currentPageIndex},()=>[s.createElementVNode("span",cd,s.toDisplayString(l.currentPageIndex+1)+"/"+s.toDisplayString(i.imgs.length),1)])])])]),_:3},8,["z-index"]),[[s.vShow,e.isVisible]])]),_:3})}const We=p(sd,[["render",hd]]);function dd(e,t){B(e,t,["change","hide"],!0)}We.install=function(e){e.component(We.name,We),dd(e,We)},X.install=function(e){e.component(X.name,X)},oe.install=function(e){e.component(oe.name,oe),e.component(Fe.name,Fe)},oe.Item=Fe;const Im="",ud="cube-index-list-item",ci="cube-index-list-item_active",Hn="select",md={name:ud,emits:[Hn],props:{item:{type:Object,default(){return{}}}},computed:{itemClass(){return this.item.active?ci:""}},methods:{addActiveCls(e){Di(e.currentTarget,ci)},removeActiveCls(e){Ii(e.currentTarget,ci)},selectItem(){this.$emit(Hn,this.item)}}},pd={class:"cube-index-list-item-def border-bottom-1px"};function fd(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("li",{class:s.normalizeClass(["cube-index-list-item",n.itemClass]),onTouchstart:t[0]||(t[0]=(...r)=>n.addActiveCls&&n.addActiveCls(...r)),onTouchend:t[1]||(t[1]=(...r)=>n.removeActiveCls&&n.removeActiveCls(...r)),onClick:t[2]||(t[2]=r=>n.selectItem())},[s.renderSlot(e.$slots,"default",{},()=>[s.createElementVNode("div",pd,s.toDisplayString(i.item.name),1)])],34)}const St=p(md,[["render",fd]]),gd="cube-index-list-group",An="select",_d={name:gd,emits:[An],props:{group:{type:Object,default(){return{}}}},methods:{selectItem(e){this.$emit(An,e)}},components:{CubeIndexListItem:St}},bd={class:"cube-index-list-group"},yd=["innerHTML"];function Ed(e,t,i,o,l,n){const r=s.resolveComponent("cube-index-list-item");return s.openBlock(),s.createElementBlock("li",bd,[s.createElementVNode("h2",{class:"cube-index-list-anchor",innerHTML:i.group.name},null,8,yd),s.createElementVNode("ul",null,[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.group.items,(a,c)=>(s.openBlock(),s.createBlock(r,{key:c,item:a,onSelect:n.selectItem},null,8,["item","onSelect"]))),128))])])])}const Ct=p(_d,[["render",Ed]]),Bm="",Td="cube-index-list",Ln="select",Yn="title-click",zn="pulling-up",Rn="pulling-down",xd=et&&window.innerHeight<=480?17:18,kd=D("transform"),wd={name:Td,mixins:[Ue,oi],emits:[Ln,Yn,zn,Rn],props:{title:{type:String,default:""},data:{type:Array,default(){return[]}},speed:{type:Number,default:0},navbar:{type:Boolean,default:!0},pullDownRefresh:{type:[Object,Boolean],default:void 0,deprecated:{replacedBy:"options"}},pullUpLoad:{type:[Object,Boolean],default:void 0,deprecated:{replacedBy:"options"}}},data(){return{scrollEvents:["scroll"],currentIndex:0,scrollY:-1,diff:-1,titleHeight:0}},computed:{hasTitle(){return this.title||this.$slots.title},fixedTitle(){return this.hasTitle&&!this.titleHeight&&this._caculateTitleHeight(),this.scrollY<=-this.titleHeight&&this.data[this.currentIndex]?this.data[this.currentIndex].name:""},shortcutList(){return this.data.map(e=>e?e.shortcut||e.name.substr(0,1):"")},scrollOptions(){return Object.assign({},{pullDownRefresh:this.pullDownRefresh,pullUpLoad:this.pullUpLoad},this.options)}},created(){this.groupList=[],this.listHeight=[],this.touch={},this.subTitleHeight=0},mounted(){this.$nextTick(()=>{this.refresh()})},methods:{refresh(){this._caculateTitleHeight(),this._calculateHeight(),this.$refs.scroll&&this.$refs.scroll.refresh()},selectItem(e){this.$emit(Ln,e)},scroll(e){this.scrollY=e.y},titleClick(){this.$emit(Yn,this.title)},forceUpdate(e=!1,t=!1){this.$refs.scroll.forceUpdate(e,t),e&&this.$nextTick(()=>{this._calculateHeight()})},onShortcutTouchStart(e){const t=ol(e,"cube-index-list-nav-item");if(!t)return;let i=nl(t,"index"),o=e.touches[0];this.touch.y1=o.pageY,this.touch.anchorIndex=i,this._scrollTo(i)},onShortcutTouchMove(e){let t=e.touches[0];this.touch.y2=t.pageY;let i=(this.touch.y2-this.touch.y1)/xd|0,o=parseInt(this.touch.anchorIndex)+i;this._scrollTo(o)},onPullingUp(){this.$emit(zn)},onPullingDown(){this.$emit(Rn)},_caculateTitleHeight(){this.titleHeight=this.$refs.title?U(this.$refs.title).height:0},_calculateHeight(){this.groupList=this.$el.getElementsByClassName("cube-index-list-group");const e=this.$el.getElementsByClassName("cube-index-list-anchor")[0];if(this.subTitleHeight=e?U(e).height:0,this.listHeight=[],!this.groupList)return;let t=this.titleHeight;this.listHeight.push(t);for(let i=0;i<this.groupList.length;i++){let o=this.groupList[i];t+=o.clientHeight,this.listHeight.push(t)}},_scrollTo(e){e<0?e=0:e>this.listHeight.length-2&&(e=this.listHeight.length-2),this.$refs.scroll.scrollToElement(this.groupList[e],this.speed),this.scrollY=this.$refs.scroll.scroll.y}},watch:{data(){this.$nextTick(()=>{this._calculateHeight()})},title(e){this.$nextTick(()=>{this.refresh()})},diff(e){let t=e>0&&e<this.subTitleHeight?e-this.subTitleHeight:0;this.fixedTop!==t&&(this.fixedTop=t,this.$refs.fixed.style[kd]=`translate3d(0,${t}px,0)`)},scrollY(e){const t=this.listHeight;if(e>-this.titleHeight){this.currentIndex=0;return}for(let i=0;i<t.length-1;i++){let o=t[i],l=t[i+1];if(-e>=o&&-e<l){this.currentIndex=i,this.diff=l+e;return}}this.currentIndex=t.length-2}},components:{CubeScroll:X,CubeIndexListGroup:Ct}},Sd={class:"cube-index-list"},Cd={class:"cube-index-list-content",ref:"content"},Nd={class:"cube-index-list-nav-list"},$d=["data-index"],vd=["innerHTML"];function Vd(e,t,i,o,l,n){const r=s.resolveComponent("cube-index-list-group"),a=s.resolveComponent("cube-scroll");return s.openBlock(),s.createElementBlock("div",Sd,[s.createVNode(a,{ref:"scroll","scroll-events":l.scrollEvents,options:n.scrollOptions,data:i.data,onScroll:n.scroll,onPullingDown:n.onPullingDown,onPullingUp:n.onPullingUp},s.createSlots({default:s.withCtx(()=>[s.createElementVNode("div",Cd,[n.hasTitle?(s.openBlock(),s.createElementBlock("h1",{key:0,class:"cube-index-list-title",ref:"title",onClick:t[0]||(t[0]=(...c)=>n.titleClick&&n.titleClick(...c))},[s.renderSlot(e.$slots,"title",{},()=>[s.createTextVNode(s.toDisplayString(i.title),1)])],512)):s.createCommentVNode("",!0),s.createElementVNode("ul",null,[s.renderSlot(e.$slots,"default",{},()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(c,h)=>(s.openBlock(),s.createBlock(r,{key:h,group:c,onSelect:n.selectItem},null,8,["group","onSelect"]))),128))])])],512)]),_:2},[e.$slots.pullup?{name:"pullup",fn:s.withCtx(c=>[s.renderSlot(e.$slots,"pullup",{pullUpLoad:c.pullUpLoad,isPullUpLoad:c.isPullUpLoad})]),key:"0"}:void 0,e.$slots.pulldown?{name:"pulldown",fn:s.withCtx(c=>[s.renderSlot(e.$slots,"pulldown",{pullDownRefresh:c.pullDownRefresh,pullDownStyle:c.pullDownStyle,beforePullDown:c.beforePullDown,isPullingDown:c.isPullingDown,bubbleY:c.bubbleY})]),key:"1"}:void 0]),1032,["scroll-events","options","data","onScroll","onPullingDown","onPullingUp"]),i.navbar?(s.openBlock(),s.createElementBlock("div",{key:0,class:"cube-index-list-nav",onTouchstart:t[1]||(t[1]=(...c)=>n.onShortcutTouchStart&&n.onShortcutTouchStart(...c)),onTouchmove:t[2]||(t[2]=s.withModifiers((...c)=>n.onShortcutTouchMove&&n.onShortcutTouchMove(...c),["stop","prevent"]))},[s.createElementVNode("ul",Nd,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.shortcutList,(c,h)=>(s.openBlock(),s.createElementBlock("li",{key:h,"data-index":h,class:s.normalizeClass(["cube-index-list-nav-item",{active:l.currentIndex===h}])},[s.renderSlot(e.$slots,"nav-item",{item:c},()=>[s.createTextVNode(s.toDisplayString(c),1)])],10,$d))),128))])],32)):s.createCommentVNode("",!0),s.withDirectives(s.createElementVNode("div",{ref:"fixed",innerHTML:n.fixedTitle,class:"cube-index-list-fixed cube-index-list-anchor"},null,8,vd),[[s.vShow,n.fixedTitle]])])}const Ne=p(wd,[["render",Vd]]);Ne.install=function(e){e.component(Ne.name,Ne),e.component(Ct.name,Ct),e.component(St.name,St)},Ne.Group=Ct,Ne.Item=St;const Xn="cubic-bezier(0.165, 0.84, 0.44, 1)",Md="cubic-bezier(0.22, 0.61, 0.36, 1)",Om="",Pd="cube-swipe-item",Dd="item-click",Id="btn-click",Un="scroll",Bd="active",Od=1,Fn=-1,hi=0,di=1,Nt=600,ui=300,Wn=15,Hd=5,$t=D("transform"),jn=D("transitionProperty"),mi=D("transitionDuration"),Gn=D("transitionTimingFunction"),Ad={name:Pd,inject:["swipe"],props:{item:{type:Object,default(){return{}}},btns:{type:Array,default(){return[]}},index:{type:Number,index:-1},autoShrink:{type:Boolean,default:!1}},watch:{btns(){this.$nextTick(()=>{this.refresh()})}},created(){this.x=0,this.state=hi,this.swipe.addItem(this)},mounted(){this.scrollerStyle=this.$refs.swipeItem.style,this.$nextTick(()=>{this.refresh()})},methods:{_initCachedBtns(){this.cachedBtns=[];const e=this.$refs.btns.length;for(let t=0;t<e;t++)this.cachedBtns.push({width:U(this.$refs.btns[t]).width})},_handleBtns(e){if(this.btns.length===0)return;const t=this.$refs.btns.length;let i=0,o=-this.maxScrollX;for(let l=0;l<t;l++){const n=this.$refs.btns[l];let r=(o-i)/o,a,c=r*e-e;e<this.maxScrollX?a=this.cachedBtns[l].width+r*(this.maxScrollX-e):a=this.cachedBtns[l].width,i+=this.cachedBtns[l].width,n.style.width=`${a}px`,n.style[$t]=`translate(${c}px)`,n.style[mi]="0ms"}},_isInBtns(e){let t=e,i=!1;for(;t&&t.className.indexOf("cube-swipe-item")<0;){if(t.className.indexOf("cube-swipe-btns")>=0){i=!0;break}t=t.parentNode}return i},_calculateBtnsWidth(){let e=0;const t=this.cachedBtns.length;for(let i=0;i<t;i++)e+=this.cachedBtns[i].width;this.maxScrollX=-e},_translate(e,t){let i=t?" translateZ(0)":"";this.scrollerStyle[$t]=`translate(${e}px,0)${i}`,this.x=e},_transitionProperty(e="transform"){this.scrollerStyle[jn]=e},_transitionTimingFunction(e){this.scrollerStyle[Gn]=e},_transitionTime(e=0){this.scrollerStyle[mi]=`${e}ms`},_getComputedPositionX(){let e=window.getComputedStyle(this.$refs.swipeItem,null);return e=e[$t].split(")")[0].split(", "),+(e[12]||e[4])},_translateBtns(e,t,i){if(this.btns.length===0)return;const o=this.$refs.btns.length;let l=0,n=0;for(let r=0;r<o;r++){const a=this.$refs.btns[r];this.state===di?n=l:n=0,l+=this.cachedBtns[r].width,a.style[$t]=`translate(${n}px,0) translateZ(0)`,a.style[jn]="all",a.style[Gn]=t,a.style[mi]=`${e}ms`,i&&(a.style.width=`${this.cachedBtns[r].width}px`)}},refresh(){this.btns.length>0&&(this._initCachedBtns(),this._calculateBtnsWidth()),this.endTime=0},shrink(){this.stop(),this.state=hi,this.$nextTick(()=>{this.scrollTo(0,Nt,Xn),this._translateBtns(Nt,Xn)})},grow(){this.state=di;const e=this.x<this.maxScrollX;let t=Md;this.scrollTo(this.maxScrollX,Nt,t),this._translateBtns(Nt,t,e)},scrollTo(e,t,i){this._transitionProperty(),this._transitionTimingFunction(i),this._transitionTime(t),this._translate(e,!0),t&&(this.isInTransition=!0)},genBtnStyl(e){return`background: ${e.color}`},clickItem(){this.swipe.onItemClick(this.item,this.index),this.$emit(Dd,this.item,this.index)},clickBtn(e){this.swipe.onBtnClick(e,this.index),this.$emit(Id,e,this.index),this.autoShrink&&this.shrink()},stop(){if(this.isInTransition){this.isInTransition=!1;let e=this.state===hi?0:this._getComputedPositionX();this._translate(e),this.$emit(Un,this.x),this._handleBtns()}},onTouchStart(e){this.swipe.onItemActive(this.index),this.$emit(Bd,this.index),this.stop(),this.moved=!1,this.movingDirectionX=0;const t=e.touches[0];this.pointX=t.pageX,this.pointY=t.pageY,this.distX=0,this.distY=0,this.startX=this.x,this._transitionTime(),this.startTime=Bt(),this.state===di&&!this._isInBtns(e.target)&&(this.shrinkTimer=setTimeout(()=>{this.shrink()},300))},onTouchMove(e){if(this.moved&&(clearTimeout(this.shrinkTimer),e.stopPropagation()),this.isInTransition)return;e.preventDefault();const t=e.touches[0];let i=t.pageX-this.pointX,o=t.pageY-this.pointY;this.pointX=t.pageX,this.pointY=t.pageY,this.distX+=i,this.distY+=o;let l=Math.abs(this.distX),n=Math.abs(this.distY);if(l+Hd<=n)return;let r=Bt();if(r-this.endTime>ui&&l<Wn)return;this.movingDirectionX=i>0?Fn:i<0?Od:0;let a=this.x+i;a>0&&(a=0),a<this.maxScrollX&&(a=this.x+i/3),this.moved||(this.moved=!0),this._translate(a,!0),r-this.startTime>ui&&(this.startTime=r,this.startX=this.x),this.$emit(Un,this.x),this._handleBtns()},onTouchEnd(){if(!this.moved)return;if(this.movingDirectionX===Fn){this.shrink();return}this.endTime=Bt();let e=this.endTime-this.startTime,t=Math.abs(this.x-this.startX);e<ui&&t>Wn||this.x<this.maxScrollX/2?this.grow():this.shrink()},onTransitionEnd(){this.isInTransition=!1,this._transitionTime(),this._translate(this.x)}},beforeUnmount(){this.swipe.removeItem(this)}},Ld={class:"cube-swipe-btns"},Yd=["onClick"],zd={class:"text"};function Rd(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",{ref:"swipeItem",onTransitionend:t[1]||(t[1]=(...r)=>n.onTransitionEnd&&n.onTransitionEnd(...r)),onTouchstart:t[2]||(t[2]=(...r)=>n.onTouchStart&&n.onTouchStart(...r)),onTouchmove:t[3]||(t[3]=(...r)=>n.onTouchMove&&n.onTouchMove(...r)),onTouchend:t[4]||(t[4]=(...r)=>n.onTouchEnd&&n.onTouchEnd(...r)),class:"cube-swipe-item"},[s.renderSlot(e.$slots,"default",{},()=>[s.createElementVNode("div",{onClick:t[0]||(t[0]=(...r)=>n.clickItem&&n.clickItem(...r)),class:"cube-swipe-item-inner border-bottom-1px"},[s.createElementVNode("span",null,s.toDisplayString(i.item.text),1)])]),s.createElementVNode("ul",Ld,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.btns,r=>(s.openBlock(),s.createElementBlock("li",{ref_for:!0,ref:"btns",class:"cube-swipe-btn",style:s.normalizeStyle(n.genBtnStyl(r)),onClick:s.withModifiers(a=>n.clickBtn(r),["prevent"])},[s.createElementVNode("span",zd,s.toDisplayString(r.text),1)],12,Yd))),256))])],544)}const vt=p(Ad,[["render",Rd]]),Hm="",Xd="cube-swipe",Kn="item-click",qn="btn-click",Ud={name:Xd,provide(){return{swipe:this}},emits:[Kn,qn],props:{data:{type:Array,default(){return[]}},autoShrink:{type:Boolean,default:!1}},created(){this.activeIndex=-1,this.items=[]},methods:{addItem(e){this.items.push(e)},removeItem(e){const t=this.items.indexOf(e);this.items.splice(t,1),t<=this.activeIndex&&(this.activeIndex-=1)},onItemClick(e,t){this.$emit(Kn,e,t)},onBtnClick(e,t){const i=this.data[t];this.$emit(qn,e,t,i)},onItemActive(e){e!==this.activeIndex&&(this.activeIndex!==-1&&this.items[this.activeIndex].shrink(),this.activeIndex=e)}},components:{CubeSwipeItem:vt}},Fd={class:"cube-swipe"};function Wd(e,t,i,o,l,n){const r=s.resolveComponent("cube-swipe-item");return s.openBlock(),s.createElementBlock("div",Fd,[s.renderSlot(e.$slots,"default",{},()=>[s.createVNode(s.TransitionGroup,{name:"cube-swipe",tag:"ul"},{default:s.withCtx(()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(i.data,(a,c)=>(s.openBlock(),s.createElementBlock("li",{key:a.item.value},[s.createVNode(r,{btns:a.btns,item:a.item,index:c,"auto-shrink":i.autoShrink},null,8,["btns","item","index","auto-shrink"])]))),128))]),_:1})])])}const $e=p(Ud,[["render",Wd]]);$e.install=function(e){e.component($e.name,$e),e.component(vt.name,vt)},$e.Item=vt;const Am="",jd="cube-sticky",Zn="change",Jn="diff-change",Gd=D("transform"),Kd={name:jd,provide(){return{sticky:this}},emits:[Zn,Jn],props:{pos:{type:Number,required:!0},checkTop:{type:Boolean,default:!0},fixedShowAni:{type:String,default(e){return e.checkTop?"":"cube-sticky-fixed-fade"}},offset:{type:Number,default:0}},data(){return{diff:0,currentDiff:0,currentIndex:-1,currentKey:""}},computed:{fixedShow(){return!!this.eles[this.currentIndex]}},watch:{diff(e){e>=0&&(e=0),e=Math.ceil(e),this._fixedTop!==e&&(this._fixedTop=e,this.$refs.fixedEle.style[Gd]=`translate3d(0, ${e}px, 0)`)},pos:"computeCurrentSticky",currentIndex(e,t){const i=this.eles[t],o=this.eles[e],l=o&&o.eleKey!==void 0?o.eleKey:e===-1?"":e,n=this.$refs.fixedEle,r=this.$slots.fixed;this.$nextTick(()=>{if(r)this.fixedEleHeight=n.offsetHeight;else{const c=n.firstElementChild;i&&(i.$el.appendChild(c),i.refresh()),o?(n.appendChild(o.$el.firstElementChild),this.fixedEleHeight=n.offsetHeight):this.fixedEleHeight=0}const a="cube-sticky-ele-on";i&&Ii(i.$el,a),o&&Di(o.$el,a)}),this.currentKey=l,this.$emit(Zn,l,e)},currentDiff(e){const t=this.heights[this.currentIndex]||0;this.$emit(Jn,e,t)}},created(){this.fixedEleHeight=0,this.eles=[],this.positions=[],this.heights=[]},mounted(){this.refresh()},methods:{addEle(e){this.eles.push(e)},removeEle(e){const t=this.eles.indexOf(e);this.eles.splice(t,1),this.positions.splice(t,1)},refresh(){this.$nextTick(()=>{this.eles.forEach(e=>{e.refresh()}),this._calculateHeight(),this.computeCurrentSticky(this.pos)})},computeCurrentSticky(e){e+=this.offset;const t=this.positions,i=this.heights,o=this.checkTop,l=t.length;for(let n=l-1;n>=0;n--){const r=n===l-1,a=r?e:t[n+1];let c,h;o?(c=t[n],h=c+i[n]):(c=t[n]+i[n],h=c);const d=Math.max(h,a);if(e>=c&&e<=d){this.currentIndex=n,this.currentDiff=e-c;const u=a-e;u>=0&&!r?this.diff=u-(this.fixedEleHeight||i[n]):this.diff=0;return}}this.currentIndex=-1,this.currentDiff=0},_calculateHeight(){this.eles.forEach((t,i)=>{const{top:o,height:l}=U(t.$el);this.positions[i]=o,this.heights[i]=l}),this.fixedEleHeight=this.$refs.fixedEle.offsetHeight}}},qd={class:"cube-sticky"},Zd={ref:"fixedEle",class:"cube-sticky-fixed"};function Jd(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",qd,[s.renderSlot(e.$slots,"default"),s.createVNode(s.Transition,{name:i.fixedShowAni},{default:s.withCtx(()=>[s.withDirectives(s.createElementVNode("div",Zd,[s.renderSlot(e.$slots,"fixed",{current:l.currentKey,index:l.currentIndex})],512),[[s.vShow,n.fixedShow]])]),_:3},8,["name"])])}const le=p(Kd,[["render",Jd]]),Lm="",Qd={name:"cube-sticky-ele",inject:["sticky"],props:{eleKey:{type:[Number,String]}},mounted(){this.sticky.addEle(this)},methods:{refresh(){const e=this.$el;e.firstElementChild&&(e.style.height="",e.style.height=`${e.offsetHeight}px`)}},beforeUnmount(){this.sticky.removeEle(this)}},eu={class:"cube-sticky-ele"},tu={class:"cube-sticky-content"};function iu(e,t,i,o,l,n){return s.openBlock(),s.createElementBlock("div",eu,[s.createElementVNode("div",tu,[s.renderSlot(e.$slots,"default")])])}const je=p(Qd,[["render",iu]]);le.install=function(e){e.component(le.name,le),e.component(je.name,je)},le.Ele=je;const zm="",pi="horizontal",su="vertical",nu="cube-scroll-nav-bar",Qn="change",ou={name:nu,inject:{scrollNav:{default:null}},mixins:[Ue],emits:[Qn],props:{direction:{type:String,default:pi,validator(e){return e===pi||e===su}},labels:{type:Array,default(){return[]}},txts:{type:Array,default(e){return e._defaultTxts=!0,e.labels}},current:{type:[String,Number],default:""}},data(){return{active:this.current,usedTxts:this.txts}},watch:{labels(e){this._defaultTxts&&(this.usedTxts=e)},txts(e){this.usedTxts=e},current(e){this.active=e},active(e){this.$emit(Qn,e),this._adjust()}},mounted(){this.scrollNav&&this.scrollNav.setBar(this),this.active&&this.$nextTick(()=>{this._adjust()})},beforeUnmount(){this.scrollNav&&this.scrollNav.setBar(null)},methods:{clickHandler(e){e!==this.active&&(this.active=e,this.scrollNav&&this.scrollNav.barChange(e))},refresh(){this.$refs.scroll.refresh(),this._adjust()},_adjust(){this.$nextTick(()=>{const e=this.direction===pi,t=e?"clientWidth":"clientHeight",i=this.active,o=this.$refs.scroll.$el[t],l=this.$refs.items,n=l[t],r=Math.min(0,o-n),a=o/2,c=l.children;let h=0;this.labels.every((u,g)=>u===i?(h+=c[g][t]/2,!1):(h+=c[g][t],!0));let d=a-h;d=Math.max(r,Math.min(0,d)),this.$refs.scroll.scrollTo(e?d:0,e?0:d,300)})}},components:{CubeScroll:X}},lu={class:"cube-scroll-nav-bar-items",ref:"items"},ru=["onClick"],au=["innerHTML"];function cu(e,t,i,o,l,n){const r=s.resolveComponent("cube-scroll");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-scroll-nav-bar","cube-scroll-nav-bar_"+i.direction])},[s.createVNode(r,{ref:"scroll",nestMode:"none",options:e.options,direction:i.direction},{default:s.withCtx(()=>[s.createElementVNode("div",lu,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(l.usedTxts,(a,c)=>(s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-scroll-nav-bar-item",{"cube-scroll-nav-bar-item_active":l.active===i.labels[c]}]),key:c,onClick:h=>n.clickHandler(i.labels[c])},[s.renderSlot(e.$slots,"default",{txt:a,index:c,active:l.active,label:i.labels[c]},()=>[s.createElementVNode("span",{innerHTML:a},null,8,au)])],10,ru))),128))],512)]),_:3},8,["options","direction"])],2)}const Z=p(ou,[["render",cu]]),Rm="",hu="horizontal",du="vertical",uu="cube-scroll-nav",eo="change",to="sticky-change",mu={name:uu,provide(){return{scrollNav:this}},mixins:[Ue],emits:[eo,to],props:{data:{type:Array},speed:{type:Number,default:300},side:{type:Boolean,default:!1},current:{type:[String,Number],default:""}},data(){return{scrollEvents:["scroll","scroll-end"],scrollY:0,panels:[],active:this.current,pageStickyOffset:0}},computed:{labels(){return this.panels.map(e=>e.label)},barTxts(){return this.panels.map(e=>e.title)},barDirection(){return this.side?du:hu}},watch:{current(e){this.stickyCurrent=e,this.active=e,this.jumpTo(e)},active(e){this.$emit(eo,e)}},created(){this.navBar=null,this.stickyCurrent=this.current},mounted(){this.$nextTick(()=>{if(this.side){const e=this.$refs.pageSticky.$refs.fixedEle;this.$refs.scroll.$el.appendChild(e)}this.current||(this.active=this.stickyCurrent=this.labels[0]),this.refresh(),this.jumpTo(this.current)})},methods:{scrollTo(){this.$refs.scroll&&this.$refs.scroll.scrollTo.apply(this.$refs.scroll,arguments)},refresh(){this.navBar&&this.navBar.refresh(),this.$refs.sticky.refresh(),this.$refs.pageSticky.refresh(),this.pageStickyOffset=this.side?0:this.$refs.navBarEle.$el.offsetHeight,this.$refs.scroll.refresh()},setBar(e){this.navBar=e},barChange(e){this.active=e,setTimeout(()=>{this.jumpTo(e)})},jumpTo(e){if(!e)return;const t=this.getPanel(e);if(t){this._jumping=!0;const i=this.pageStickyOffset;this.$refs.scroll.scrollToElement(t.$el,this.speed,0,this.side?i:-i)}},getPanel(e){let t=null;return this.panels.some(i=>{if(i.label===e)return t=i,!0}),t},pageStickyChangeHandler(e){e===""&&(e=this.labels[0]),this.stickyCurrent=e,!this._jumping&&(this.active=e)},stickyChangeHandler(e){this.$nextTick(()=>{this.navBar&&this.navBar.refresh()}),this.$emit(to,e)},scrollHandler(e){this.scrollY=-e.y,this._jumping||(this.active=this.stickyCurrent)},scrollEndHandler(){this._jumping=!1},addPanel(e){this.panels.push(e)},removePanel(e){const t=this.panels.indexOf(e);this.panels.splice(t,1)}},components:{CubeSticky:le,CubeStickyEle:je,CubeScroll:X,CubeScrollNavBar:Z}},pu={class:"cube-scroll-nav-main"},fu={class:"cube-scroll-nav-panels"},gu=s.createElementVNode("div",null,null,-1);function _u(e,t,i,o,l,n){const r=s.resolveComponent("cube-scroll-nav-bar"),a=s.resolveComponent("cube-sticky-ele"),c=s.resolveComponent("cube-sticky"),h=s.resolveComponent("cube-scroll");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["cube-scroll-nav",{"cube-scroll-nav_side":i.side}])},[s.createVNode(c,{ref:"sticky",pos:l.scrollY,onChange:n.stickyChangeHandler},{default:s.withCtx(()=>[s.createVNode(h,{ref:"scroll","scroll-events":l.scrollEvents,options:e.options,data:i.data,onScroll:n.scrollHandler,onScrollEnd:n.scrollEndHandler},{default:s.withCtx(()=>[s.renderSlot(e.$slots,"prepend"),s.createElementVNode("div",pu,[s.createVNode(a,{ref:"navBarEle","ele-key":"cube-scroll-nav-bar"},{default:s.withCtx(()=>[s.renderSlot(e.$slots,"bar",{txts:n.barTxts,labels:n.labels,current:l.active},()=>[s.createVNode(r,{direction:n.barDirection,txts:n.barTxts,labels:n.labels,current:l.active},null,8,["direction","txts","labels","current"])])]),_:3},512),s.createVNode(c,{ref:"pageSticky",offset:l.pageStickyOffset,pos:l.scrollY,onChange:n.pageStickyChangeHandler},s.createSlots({default:s.withCtx(()=>[s.createElementVNode("div",fu,[s.renderSlot(e.$slots,"default")])]),_:2},[i.side?void 0:{name:"fixed",fn:s.withCtx(()=>[gu]),key:"0"}]),1032,["offset","pos","onChange"])])]),_:3},8,["scroll-events","options","data","onScroll","onScrollEnd"])]),_:3},8,["pos","onChange"])],2)}const re=p(mu,[["render",_u]]),bu={name:"cube-scroll-nav-panel",inject:["scrollNav"],props:{label:{type:[String,Number],required:!0},title:{type:[String,Number],default(e){return e.label}}},mounted(){this.scrollNav.addPanel(this)},beforeUnmount(){this.scrollNav.removePanel(this)},components:{CubeStickyEle:je}},yu={class:"cube-scroll-nav-panel"},Eu=["innerHTML"];function Tu(e,t,i,o,l,n){const r=s.resolveComponent("cube-sticky-ele");return s.openBlock(),s.createElementBlock("div",yu,[s.createVNode(r,{"ele-key":i.label},{default:s.withCtx(()=>[s.createElementVNode("h2",{class:"cube-scroll-nav-panel-title",innerHTML:i.title},null,8,Eu)]),_:1},8,["ele-key"]),s.renderSlot(e.$slots,"default")])}const fi=p(bu,[["render",Tu]]);re.install=function(e){e.component(re.name,re),e.component(fi.name,fi),e.component(Z.name,Z)},re.Panel=fi,re.Bar=Z,Z.install=function(e){e.component(Z.name,Z)};const Um="",xu="cube-recycle-list",gi="scroll",_i="resize",ku={name:xu,emits:[gi,_i],data(){return{items:[],heights:0,startIndex:0,loadings:[],noMore:!1,preload:!1}},props:{infinite:{type:Boolean,default:!1},size:{type:Number,default:20},offset:{type:Number,default:100},onFetch:{type:Function,required:!0}},computed:{visibleItems(){return this.items.slice(Math.max(0,this.startIndex-this.size),Math.min(this.items.length,this.startIndex+this.size))},tombHeight(){return this.infinite?this.$refs.tomb&&this.$refs.tomb.offsetHeight:0},loading(){return this.loadings.length}},created(){this.list=[],this.promiseStack=[]},mounted(){this.checkPromiseCompatibility(),this.$el.addEventListener(gi,this._onScroll),window.addEventListener(_i,this._onResize),this.load()},beforeUnmount(){this.$el.removeEventListener(gi,this._onScroll),window.removeEventListener(_i,this._onResize)},methods:{checkPromiseCompatibility(){Ve(window.Promise)},load(){if(this.infinite){const e=this.items,t=e.length;e.length+=this.size;const i=e.length;this.loadItems(t,i),this.getItems()}else this.loading||this.getItems()},getItems(){const e=this.promiseStack.length,t=this.onFetch();this.loadings.push("pending"),this.promiseStack.push(t),this.preload=!0,t.then(i=>{this.loadings.pop(),i?(this.setList(e,i),this.loadItemsByIndex(e),i.length<this.size&&this.stopScroll(e)):this.stopScroll(e),setTimeout(()=>{this.preload=!1},0)})},removeUnusedTombs(e,t){let i,o=this.size,l=t*o,n=(t+1)*o;for(i=l;i<n&&!(e[i]&&e[i].isTombstone);i++);this.items=e.slice(0,i)},stopScroll(e){this.noMore=!0,this.removeUnusedTombs(this.items.slice(0),e),this.updateItemTop(),this.updateStartIndex()},setList(e,t){const i=this.list,o=e*this.size;for(let l=0;l<t.length;l++)i[o+l]=t[l]},loadItemsByIndex(e){const t=this.size,i=e*t,o=(e+1)*t;this.loadItems(i,o)},loadItems(e,t){const i=this.items;let o=[],l;for(let n=e;n<t;n++)l=i[n],!(l&&l.loaded)&&(this.setItem(n,this.list[n]),o.push(this.$nextTick().then(()=>{this.updateItemHeight(n)})));window.Promise.all(o).then(()=>{this.updateItemTop(),this.updateStartIndex()})},setItem(e,t){this.items[e]={data:t||{},height:0,top:-1e3,isTombstone:!t,loaded:t?1:0}},updateItemHeight(e){let t=this.items[e],i=this.$refs["preloads"+e];i&&i[0]?t.height=i[0].offsetHeight:t&&(t.height=this.tombHeight)},updateItemTop(){let e=0;const t=this.items;let i,o;for(let l=0;l<t.length;l++)i=t[l-1],o=t[l],t[l]?(o.top=i?i.top+i.height:0,e+=o.height):e+=0;this.heights=e},updateStartIndex(){let e=this.$el.scrollTop,t;const i=this.items;for(let o=0;o<i.length;o++)if(t=i[o],!t||t.top>e){this.startIndex=Math.max(0,o-1);break}},reset(){[{key:"items",value:[]},{key:"heights",value:0},{key:"startIndex",value:0},{key:"loadings",value:[]},{key:"noMore",value:!1},{key:"list",value:[]},{key:"promiseStack",value:[]}].forEach(({key:t,value:i})=>{this[t]=i}),this.$el.scrollTop=0,this.load()},_onScroll(){!this.noMore&&this.$el.scrollTop+this.$el.offsetHeight>this.heights-this.offset&&this.load(),this.updateStartIndex()},_onResize(){const e=this.items;e.forEach(t=>{t.loaded=!1}),this.loadItems(0,e.length)}},components:{CubeLoading:H}},wu={class:"cube-recycle-list"},Su={class:"cube-recycle-list-main"},Cu={class:"cube-recycle-list-pool"},Nu={ref:"tomb",class:"cube-recycle-list-item cube-recycle-list-invisible"},$u={class:"cube-recycle-list-loading-content"},vu={class:"cube-recycle-list-noMore"},Vu=s.createElementVNode("div",{class:"cube-recycle-list-fake"},null,-1);function Mu(e,t,i,o,l,n){const r=s.resolveComponent("cube-loading");return s.openBlock(),s.createElementBlock("div",wu,[s.createElementVNode("div",Su,[s.createElementVNode("div",{class:"cube-recycle-list-items",style:s.normalizeStyle({height:l.heights+"px"})},[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.visibleItems,a=>(s.openBlock(),s.createElementBlock("div",{class:"cube-recycle-list-item",style:s.normalizeStyle({transform:"translate(0,"+a.top+"px)"})},[i.infinite?(s.openBlock(),s.createElementBlock("div",{key:0,class:s.normalizeClass({"cube-recycle-list-transition":i.infinite}),style:s.normalizeStyle({opacity:+!a.loaded})},[s.renderSlot(e.$slots,"tombstone")],6)):s.createCommentVNode("",!0),s.createElementVNode("div",{class:s.normalizeClass({"cube-recycle-list-transition":i.infinite}),style:s.normalizeStyle({opacity:a.loaded})},[s.renderSlot(e.$slots,"item",{data:a.data})],6)],4))),256)),s.createElementVNode("div",Cu,[!i.infinite&&l.preload?(s.openBlock(!0),s.createElementBlock(s.Fragment,{key:0},s.renderList(l.items,(a,c)=>s.withDirectives((s.openBlock(),s.createElementBlock("div",{class:"cube-recycle-list-item cube-recycle-list-invisible",ref_for:!0,ref:"preloads"+c},[s.renderSlot(e.$slots,"item",{data:a.data})],512)),[[s.vShow,a&&!a.isTombstone&&!a.height]])),256)):s.createCommentVNode("",!0),s.createElementVNode("div",Nu,[s.renderSlot(e.$slots,"tombstone")],512)])],4),!i.infinite&&!l.noMore?(s.openBlock(),s.createElementBlock("div",{key:0,class:"cube-recycle-list-loading",style:s.normalizeStyle({visibility:n.loading?"visible":"hidden"})},[s.renderSlot(e.$slots,"spinner",{},()=>[s.createElementVNode("div",$u,[s.createVNode(r,{class:"cube-recycle-list-spinner"})])])],4)):s.createCommentVNode("",!0),s.withDirectives(s.createElementVNode("div",vu,[s.renderSlot(e.$slots,"noMore")],512),[[s.vShow,l.noMore]])]),Vu])}const Vt=p(ku,[["render",Mu]]);Vt.install=function(e){e.component(Vt.name,Vt)},R.Group,R.Item,oe.Item;const io=te.Radio;$e.Item,q.Panel,q.Item,le.Ele,re.Panel,ue.Tab,me.Panel,ee.Item;const so=[S,Y,H,Qe,de,ue,me,M,pe,ee,io,te,z,Be,be,Re,Te,x,ie,R,A,ke,_,k,se,we,ne,Se,Xe,q,We,X,oe,Ne,$e,le,re,Z,Vt];function Mt(e){Mt.installed||(Mt.installed=!0,so.forEach(t=>{t!==io&&t.install(e)}))}const bi={version:"2.0.0-alpha",install:Mt,BScroll:N,createAPI:B},Pu=Symbol("style");return bi[Pu]=oo,so.forEach(e=>{const t=fo(e,{firstUpperCase:!0});bi[t]=e}),typeof window<"u"&&window.Vue&&window.Vue.use(Mt),bi});
